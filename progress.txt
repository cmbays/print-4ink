# Screen Print Pro â€” Progress

## Current State

**Phase**: 1 â€” Mockup with mock data
**Last Updated**: 2026-02-10
**Last Verified**: 2026-02-10
**Status**: Customer Management feedback round COMPLETE (PR #35). 8 user feedback items implemented + CodeRabbit fixes + Zod enum refactor + generated customer ID flow. Quality gate (PR #33) merged. Both verticals (Quoting + Customer Management) ready for demo.

## What's Built

### Infrastructure
- [x] Next.js 16.1.6 scaffold with App Router, TypeScript, Turbopack
- [x] Tailwind v4 with design tokens in `globals.css` (`@theme inline`)
- [x] shadcn/ui components: button, card, dialog, input, table, badge, dropdown-menu, tabs, separator, tooltip, label, select, textarea, sheet, breadcrumb, avatar, form, accordion, checkbox, command, popover, scroll-area, sonner
- [x] Fonts: Inter + JetBrains Mono via `next/font`
- [x] Dark mode default (`className="dark"` on `<html>`)
- [x] Vitest setup with schema tests (264 tests, 12 test files)
- [x] GitHub Actions CI: type check + lint + test + build on push/PR to main

### Layout Shell
- [x] `app/(dashboard)/layout.tsx` â€” sidebar + topbar + main content area
- [x] `components/layout/sidebar.tsx` â€” navigation with 6 links (Dashboard, Jobs, Quotes, Customers, Screen Room, Garments)
- [x] `components/layout/topbar.tsx` â€” top bar component

### Dashboard (`/`)
- [x] Summary cards: Blocked, In Progress, Shipped, Total Jobs
- [x] "Needs Attention" section â€” jobs awaiting artwork approval
- [x] "In Progress" section â€” active jobs with status + priority badges
- [x] Uses mock data from `lib/mock-data.ts`

### Data Layer
- [x] Zod schemas: `job.ts`, `quote.ts`, `customer.ts`, `garment.ts`, `screen.ts`, `color.ts`, `artwork.ts`, `contact.ts`, `group.ts`, `address.ts`, `note.ts`
- [x] Constants: production state labels/colors, priority labels/colors, burn status labels, quote status labels/colors, lifecycle stage labels/colors, health status labels/colors, customer type tag labels/colors, payment terms labels, pricing tier labels
- [x] Mock data: 10 customers (with embedded contacts/groups/addresses), 13 contacts, 2 groups, 20 addresses, 21 notes, 6 jobs, 6 quotes, 5 screens, 42 colors, 5 garment catalog entries, 8 artworks
- [x] Reverse lookup helpers: `getCustomerQuotes()`, `getCustomerJobs()`, `getCustomerContacts()`, `getCustomerNotes()`, `getCustomerArtworks()`

### Quoting Vertical (PR #13)
- [x] **Quotes List** (`/quotes`) â€” DataTable with status tab filters, debounced search, column sort, row actions, empty state
- [x] **New Quote Form** (`/quotes/new`) â€” Single-page form with CustomerCombobox, LineItemRows (garment + color swatch + sizes + print locations), PricingSummary with price override, notes accordion, Save as Draft / Save & Send
- [x] **Quote Detail** (`/quotes/[id]`) â€” Read-only view with breadcrumbs, customer info, line items, pricing breakdown, notes, action buttons
- [x] **ColorSwatchPicker** â€” S&S Activewear-style dense grid, search, favorites, keyboard nav, ARIA
- [x] **CustomerCombobox** â€” Type-ahead with info card, "Add New Customer" modal
- [x] **AddCustomerModal** â€” Dialog with name/email/company fields, validation
- [x] **EmailPreviewModal** â€” Email preview with mock send
- [x] **StatusBadge** â€” Reusable badge with semantic color mapping
- [x] **Color schema** (`lib/schemas/color.ts`) â€” id, name, hex, swatchTextColor, family, isFavorite
- [x] **Quote schema** updated â€” 5 statuses, lineItems with sizes/locations/pricing, priceOverride, notes
- [x] **Garment schema** updated â€” catalog with brand, SKU, basePrice, availableColors/Sizes
- [x] **116 tests** across 7 test files â€” all passing

### Customer Management Vertical â€” Data Foundation (PR #24, MERGED)
- [x] **Customer schema expanded** â€” company, lifecycle stage (prospect/new/repeat/contract), health status (active/potentially-churning/churned), type tags (retail/sports-school/corporate/storefront-merch/wholesale), payment terms, pricing tier, tax exempt, referral tracking, embedded contacts/groups/addresses
- [x] **Contact schema** â€” name, email, phone, role (ordering/art-approver/billing/owner/other), isPrimary, groupId
- [x] **Group schema** â€” name, customerId (Company â†’ Group â†’ Contact hierarchy)
- [x] **Address schema** â€” label, street/city/state/zip, type (billing/shipping), isDefault
- [x] **Note schema** â€” content, channel (phone/email/text/social/in-person), entityType (customer/quote/artwork/job), isPinned
- [x] **10 customers** with realistic Austin TX businesses, embedded contacts/groups/addresses
- [x] **13 contacts** across 10 customers with various roles
- [x] **20 addresses** (billing + shipping) with type-specific UUID prefixes
- [x] **21 notes** (2+ per customer, 1+ pinned each) with channel tags
- [x] **Badge components** â€” LifecycleBadge, HealthBadge, TypeTagBadges, CustomerQuickStats (bar + header variants)
- [x] **CustomerStats type** exported for shared contract
- [x] **Constants** â€” labels, colors, status mappings for lifecycle stages, health statuses, type tags, payment terms, pricing tiers
- [x] **Reverse lookup helpers** â€” getCustomerQuotes, getCustomerJobs, getCustomerContacts, getCustomerNotes, getCustomerArtworks
- [x] **Legacy field migration documented** â€” customer.name/.tag/.email/.phone/.address usage mapped across 4 quoting files for Step 13
- [x] **264 tests** across 12 test files â€” schema validation, referential integrity (embedded contacts match standalone, addresses embedded in customers), data coverage
- [x] **Code review fixes** â€” 3 critical (UUID collisions, invalid UUID, empty company bypass), 5 high (quote math x5, mutable counter), 7 CodeRabbit items (icon sizes, code block langs, blockquote formatting, compound adjective hyphenation, implicit event fix)

### Customer Management Feedback (PR #35, MERGED)
- [x] **ColumnHeaderMenu component** â€” Reusable column header with sort toggle + optional inline filter dropdown (Radix DropdownMenu). Replaces filter chips with clean column-level filtering.
- [x] **CustomersDataTable refactor** â€” Removed filter chip rows, replaced all TableHead headers with ColumnHeaderMenu instances. Type/Lifecycle/Health columns have inline filter dropdowns. Added health filter (URL param). Sort by Type (first tag alphabetical) and Health (ordinal).
- [x] **QuotesDataTable consistency** â€” Search bar moved to left (matches Customers layout). Added clear (X) button. Replaced inline sort with ColumnHeaderMenu instances.
- [x] **CustomerQuotesTable column reorder** â€” Quote # | Date | Status | Total (was Quote # | Status | Total | Date)
- [x] **AddContactSheet custom role** â€” "Other" role shows text input for role description
- [x] **AddCustomerModal "Save & View Details"** â€” New button navigates to customer detail page using generated UUID (`crypto.randomUUID()`)
- [x] **ActivityTimeline interactivity** â€” Quote icons are Links to `/quotes/{id}`, note icons switch to Notes tab. Controlled Tabs in CustomerTabs.
- [x] **CodeRabbit fixes** â€” focus-visible states on interactive timeline elements, explicit sort direction in ColumnHeaderMenu dropdown items
- [x] **Zod enum refactor** â€” SortKey/SortDir types derived from `z.enum()` schemas with `.catch()` fallback for safe URL param parsing

### Agent & Skill Infrastructure
- [x] **5 agents** in `.claude/agents/`: frontend-builder, requirements-interrogator, design-auditor, feature-strategist, doc-sync
- [x] **8 skills** in `.claude/skills/`:
  - `vertical-discovery` â€” 7-step competitor research + user interview + journey design methodology
  - `breadboarding` â€” UI/code affordance mapping with wiring, component boundaries, and build order
  - `screen-builder` â€” Workflow + templates + checklists + reference for building screens
  - `quality-gate` â€” 10-category audit with pass/fail scoring
  - `pre-build-interrogator` â€” Exhaustive questioning before building complex features
  - `design-audit` â€” 15-dimension Jobs/Ive-style design review
  - `feature-strategy` â€” Product strategy frameworks and feature plan templates
  - `doc-sync` â€” Drift detection and documentation synchronization
- [x] `docs/AGENTS.md` â€” Agent registry, orchestration patterns, calling conventions
- [x] `agent-outputs/` â€” Structured output directory for agent audit trail
- [x] `docs/breadboards/` â€” Directory for breadboard output documents

### Documentation
- [x] `CLAUDE.md` â€” AI operating rules, design system, coding standards
- [x] `docs/PROJECT_BIBLE.md` â€” Domain context and workflow overview
- [x] `docs/reference/FRONTEND_GUIDELINES.md` â€” Full design tokens + component patterns
- [x] `docs/reference/UX_USER_RESEARCH.md` â€” User pain points, "Love Factor"
- [x] `docs/reference/UX_HEURISTICS.md` â€” 10-point quality checklist
- [x] `docs/reference/UX_TASK_FLOWS.md` â€” Ideal user journey mappings
- [x] `docs/reference/APP_FLOW_STANDARD.md` â€” Template for APP_FLOW docs
- [x] `docs/TECH_STACK.md` â€” Tool choices with decision context
- [x] `docs/PRD.md` â€” Phase 1 features, scope, acceptance criteria
- [x] `docs/APP_FLOW.md` â€” Routes, screens, navigation paths
- [x] `docs/IMPLEMENTATION_PLAN.md` â€” Sequenced build steps

## What's Next

**STRATEGIC PIVOT (2026-02-08)**: Moving from linear 10-step implementation plan to **vertical-by-vertical approach** based on 4Ink's validated pain points.

### Document Map & Usage Guide

**Master Strategy** (READ FIRST):
- **`.claude/plans/vertical-by-vertical-strategy.md`** â€” Full strategic rationale, 5-phase methodology (Discovery â†’ Scope â†’ Breadboarding â†’ Build â†’ Demo), timeline, success criteria. Master reference for entire approach.

**Quoting Vertical â€” Discovery Phase** (COMPLETE):
- **`docs/strategy/quoting-discovery-interview-questions.md`** â€” Interview guide. **STATUS**: Used, interview complete.
- **`docs/competitive-analysis/print-life-quoting-analysis.md`** â€” Full competitive analysis with Playwright data + web research + user interview findings. 10 friction points, click/time metrics, UI patterns. **STATUS**: Complete.
- **`docs/competitive-analysis/print-life-journey-quoting.md`** â€” Full journey map with detailed step-by-step flow, friction point inventory, time distribution, success metrics. **STATUS**: Complete.

**Quoting Vertical â€” Improved Journey Design** (COMPLETE):
- **`docs/strategy/screen-print-pro-journey-quoting.md`** â€” Redesigned single-page quoting flow. Addresses all 10 friction points. Targets: 3-4 min simple quote (60-70% faster), 8-12 clicks (60% fewer). Includes S&S-style color swatch grid, instant pricing, hybrid approval workflow, quote reuse. **STATUS**: Complete.

**Quoting Vertical â€” Scope Definition** (COMPLETE, UPDATED):
- **`docs/strategy/quoting-scope-definition.md`** â€” Updated with all discovery findings: S&S color swatch component (CORE), price override, quote notes, "Revised" status, functional Duplicate/Edit, "Save & Send" flow. **STATUS**: Complete, ready for breadboarding.

**Quoting Vertical â€” Build** (COMPLETE):
- **PR #13** (`feature/quoting-build`) â€” Full implementation: 3 pages, 4 reusable components, expanded data layer. 31 files, 3874 lines. All checks pass. **STATUS**: Open for review.

**Navigation & Reference**:
- **`docs/strategy/STRATEGY_README.md`** â€” Master index of all strategy documents. How to use each folder by phase. Cross-references to related docs. **STATUS**: Complete.
- **`for_human/2026-02-08-strategic-pivot.html`** â€” Beautiful HTML summary of pivot. Timeline, methodology, success criteria, next steps, document map. **STATUS**: Complete.

**Related (Existing)**:
- `CLAUDE.md` â€” Project rules, design system, quality checklist
- `docs/AGENTS.md` â€” Agent registry (frontend-builder, requirements-interrogator, etc.)
- `progress.txt` â€” This file, session log and current state
- `docs/IMPLEMENTATION_PLAN.md` â€” Old 10-step plan (superseded, kept for reference)

### Quoting Patch v2 â€” Polish Session (PR #14, MERGED)
- [x] **Sticky top bar** â€” Summary bar showing customer, artwork thumbnails, notes toggle, grand total
- [x] **Artwork sync fix** â€” Deselecting artwork from library now clears per-location assignments too
- [x] **"Copy as New" rename** â€” "Duplicate" â†’ "Copy as New" across QuoteActions, DataTable, new page
- [x] **Flat setup fee model** â€” Screen-print: $40/quote flat. Embroidery: $20/line item. DTF: $0
- [x] **CodeRabbit review fixes** â€” 17 items: icon sizes (16/20/24px), a11y (Space key, aria-pressed, nested interactives), design tokens (Tailwind grid), lint warnings (0), originalTotal calc fix, mock data total fix
- [x] **"per line item" label** â€” Setup fee label corrected from "per item" to "per line item"
- [x] **172 tests** across 8 test files â€” all passing, 0 lint warnings

### Quoting Patch v3 â€” Sticky Bar & Pricing Polish (PR #20, MERGED)
- [x] **Sticky bar redesign** â€” Collapsed multi-row service type layout into single inline row: `[swatch][swatch] 455 Screen Print | [swatch] 700 DTF`. Artwork icons + discount badge + notes icon in top row.
- [x] **Tooltip system overhaul** â€” Dark mode styling (bg-elevated), shared TooltipProvider with skipDelayDuration, sideOffset gap, pointer-events-none on closing state. Fixed hover/flickering bugs.
- [x] **Swatch tooltips** â€” Garment name, color, sizes, print locations with artwork icons (2-column grid with cross-row alignment)
- [x] **Artwork tooltips** â€” Large preview image + name + color count (simplified, removed service type details)
- [x] **Pricing formula in review** â€” Line items show `($13.50 x 562 qty) + $40 setup = $7,627.00` with info tooltip explaining per-unit cost breakdown and setup fee rates
- [x] **Per-location decoration fee** â€” Shows `+$X.XX/unit` per location instead of setup cost
- [x] **Color count from artwork** â€” Removed manual input, auto-derived from assigned artwork. Resets on artwork removal or customer change.
- [x] **Review slide-out** â€” Grand total in sticky header, removed Edit Quote button
- [x] **CollapsibleSection** â€” Doubled summary max-width (200px â†’ 400px) to prevent clipping
- [x] **CodeRabbit fixes** â€” Empty state icon sizes (size-12 â†’ size-6) in ArtworkLibrary + QuotesDataTable

### Deferred Tech Debt (GitHub Issues)
- [ ] **#15** â€” Migrate forms to React Hook Form + Zod (QuoteForm, ArtworkUploadModal, AddCustomerModal)
- [ ] **#16** â€” Replace local LineItemRow interfaces with schema-derived types
- [ ] **#17** â€” Sync garment category filter with URL query params (may be exception to rule)
- [ ] **#18** â€” Extract shared formatCurrency/formatDate to lib/utils

### Next Actions â€” CUSTOMER MANAGEMENT BUILD PHASE

**âœ… Quoting vertical COMPLETE.** PRs #13, #14, #20 merged.
**âœ… Customer Management data foundation COMPLETE.** PR #24 merged.

**ðŸ“… Next Steps**:
1. ~~Build Quoting vertical~~ â€” DONE (PR #13)
2. ~~Quoting patch v2 polish~~ â€” DONE (PR #14)
3. ~~Quoting patch v3 polish~~ â€” DONE (PR #20)
4. ~~Customer Management data foundation~~ â€” DONE (PR #24)
5. ~~Build Customer Management screens~~ â€” DONE (Customer List + Customer Detail with 7 tabs)
6. ~~Run quality-gate audit on Customer Management screens~~ â€” DONE (PR #33, 10 fixes across 11 files)
7. ~~User feedback round on Customer Management~~ â€” DONE (PR #35, 8 items: layout consistency, ColumnHeaderMenu, timeline interactivity, Save & View Details, column reorder, custom role field, Zod enums, generated customer ID)
8. Demo both verticals to user (4Ink owner), collect final feedback
9. Iterate on feedback (target: 8+ rating on Clarity, Speed, Polish, Value)
9. Address deferred tech debt (#15-#18) as needed
10. Move to Invoicing vertical

**Key Design Requirements** (from discovery):
- Instant client-side pricing â€” never block input
- S&S-style dense color swatch grid (white text overlay, search, favorites)
- Single-page form (no multi-step wizard)
- Price override (editable grand total)
- Hybrid approval workflow (UI in Phase 1, backend in Phase 2)
- Quote statuses: Draft, Sent, Accepted, Declined, Revised
- Duplicate Quote for reuse
- Internal + customer-facing notes

### Timeline & Scope

- **Quoting Vertical (Pilot)**: 7.5-10 days (Discovery 2-3d + Scope 1d + Breadboarding 0.5-1d + Build 3-4d + Demo 1d)
- **Full MVP (4 verticals + Reporting stretch)**: 23-33 days
- **See**: `.claude/plans/vertical-by-vertical-strategy.md` for full timeline

### Quoting Patch v2 (COMPLETE)
- [x] **Bug Fix: Duplicate Quote** â€” `?duplicate=` param now reads source quote, transforms to initialData with new schema
- [x] **Bug Fix: Search** â€” Fixed re-render loop by removing searchParams from useEffect deps
- [x] **Artwork schema** (`lib/schemas/artwork.ts`) â€” New: id, customerId, name, fileName, thumbnailUrl, colorCount, tags[], createdAt, lastUsedAt
- [x] **Customer tags** â€” `"new" | "repeat" | "contract"` with behavior differentiation
- [x] **Service types** â€” `"screen-print" | "dtf" | "embroidery"` per line item
- [x] **Per-location print details** â€” Replaces flat `printLocations[]` + `colorsPerLocation` with structured `printLocationDetails[]` (location, colorCount, setupFee, artworkId)
- [x] **Discount model** â€” `discounts[]` with label/amount/type replaces `priceOverride`. Types: manual, contract, volume
- [x] **Shipping + Tax** fields on quote
- [x] **PricingSummary redesign** â€” Full breakdown: subtotal, setup fees, discounts (add/remove), shipping (FREE badge), tax, grand total, savings banner
- [x] **ArtworkLibrary** â€” Customer-tag-aware: new=upload dropzone, repeat=recently-used first, contract=full grid with search+tag filters
- [x] **ArtworkUploadModal** â€” Mock upload with name, color count, tags, save-to-library toggle
- [x] **ArtworkAssignmentPicker** â€” Per-location artwork assignment from quote's curated set
- [x] **ArtworkPreview** â€” Garment color swatch with artwork thumbnail overlay
- [x] **CollapsibleSection** â€” Wrapper with title, icon, summary, isComplete checkmark, expand/collapse
- [x] **QuoteDetailView** â€” Reusable for detail/review modes. Service type badges, per-location details, discount breakdown, artwork previews
- [x] **QuoteReviewSheet** â€” Full-screen slide-from-right Sheet before sending
- [x] **Form restructure** â€” Customer â†’ Artwork â†’ Garments & Print â†’ Pricing â†’ Notes (collapsible sections)
- [x] **Customer-aware defaults** â€” Contract: auto-discount + free shipping. New: upload-only artwork. Repeat: recently-used first
- [x] **CustomerCombobox** â€” Tag badges, phone display
- [x] **AddCustomerModal** â€” Phone field, tag selector
- [x] **QuoteActions** â€” Inline header bar (was card layout)
- [x] **Mock data** â€” 8 artworks, customer tags, migrated 6 quotes to new schema, discount examples
- [x] **172 tests** across 8 test files â€” all passing

## Session Log

| Date | Session | Work Done |
|------|---------|-----------||
| 2026-02-07 | Initial setup | Scaffolded project, installed deps, configured Tailwind v4 + shadcn/ui |
| 2026-02-07 | Dashboard MVP | Built dashboard with summary cards, blocked/in-progress sections |
| 2026-02-07 | Data layer | Created Zod schemas, constants, mock data |
| 2026-02-07 | Documentation | Created canonical doc framework: PRD, APP_FLOW, TECH_STACK, IMPLEMENTATION_PLAN |
| 2026-02-07 | Methodology | Evaluated Ryan Singer's shaping-skills repo. Decided against full adoption (project past 0-to-1 phase, existing docs cover most needs). Extracted 3 patterns: spikes for unknowns, affordance decomposition, pre-build interview. Added Pre-Build Ritual to CLAUDE.md and pre-build tasks to Steps 4 and 6 in IMPLEMENTATION_PLAN. Created `docs/spikes/` directory. |
| 2026-02-07 | For Human Docs | Created `for_human/` framework: index.html (navigable), README.md (index table + bundling rules), first session doc (shaping-skills evaluation). Added standing rule to CLAUDE.md to always create/update for_human docs after completing work. Configured CodeRabbit with local learning scope. |
| 2026-02-07 | Skills | Created 2 project skills in `.claude/skills/`: `screen-builder` (workflow + 3 templates + 2 checklists + 2 reference docs) and `quality-gate` (10-category audit + scoring rubric). Added Project Skills section to CLAUDE.md. Skills encode design system, quality checklist, and domain knowledge into repeatable workflows for Steps 1-10. |
| 2026-02-07 | CI + Testing | Set up Vitest with schema validation tests (66 tests across 6 files). Created GitHub Actions CI workflow (typecheck, lint, test, build). Fixed mock data UUIDs â€” Zod v4 validates RFC-4122 variant byte strictly. Added Vitest to TECH_STACK.md. |
| 2026-02-08 | Agent Architecture | Created 5 agents (.claude/agents/) and 4 new skills (.claude/skills/). Agents: frontend-builder, requirements-interrogator, design-auditor, feature-strategist, doc-sync. Skills: pre-build-interrogator, design-audit, feature-strategy, doc-sync. Created AGENTS.md registry, agent-outputs/ directory, and updated CLAUDE.md with agent infrastructure section. Addressed CodeRabbit review: fixed .gitignore nested file tracking, added markdown language tags, corrected branch metadata, added research methodology step to feature-strategy. Merged PR #6 to main. |
| 2026-02-08 | Strategic Pivot: Vertical-by-Vertical | Implemented comprehensive pivot from linear 10-step plan to vertical-by-vertical approach. Created: (1) `.claude/plans/vertical-by-vertical-strategy.md` (full strategic rationale, 4-phase methodology per vertical, pilot Quoting plan, roadmap for 4 subsequent verticals, success criteria, 23-33 day timeline); (2) `docs/strategy/quoting-discovery-interview-questions.md` (30-45 min interview guide, 25+ structured questions covering workflow/pain points/interconnections/wishlist); (3) `docs/competitive-analysis/print-life-quoting-analysis.md` (template for Print Life feature/UI/workflow analysis, ready for user's trial data); (4) `docs/competitive-analysis/print-life-journey-quoting.md` (template for journey map with friction points, click/time analysis, interconnections); (5) `docs/strategy/quoting-scope-definition.md` (comprehensive scope: CORE/PERIPHERAL/INTERCONNECTIONS, acceptance criteria per feature, quality checklist); (6) `docs/strategy/STRATEGY_README.md` (master index, how to use each doc by phase, cross-references); (7) `for_human/2026-02-08-strategic-pivot.html` (beautiful summary for user review). Committed 2 PRs: dfe61cd (#7) + abb6063. Updated progress.txt with document map and blocking dependencies. Ready for user's Quoting discovery phase (interview + Print Life trial). |
| 2026-02-08 | For Human Template Standardization | Created `for_human/_template.html` reference template. Standardized all 6 existing HTML files with consistent header: back nav, tag pills (6 types: Feature/Build/Plan/Decision/Research/Learning), meta grid (Date/Branch/Phase/Vertical), session resume, related session navigation. Updated `index.html` with multi-tag support, `README.md` with template docs, `CLAUDE.md` For Human Docs section with tag definitions and template rules. |
| 2026-02-08 | Quoting Discovery: COMPLETE | Conducted full discovery phase for Quoting vertical. (1) **Playwright exploration**: Set up headless browser in /tmp/pw-explorer/, navigated through 4Ink's customer portal at project-builder.app. Captured Steps 1-3 (product catalog, qty/size entry, art upload). Documented: 6-step flow, 103 color swatches, blocking recalculation, Angular SPA with S&S Activewear data. Steps 4-6 unreachable without art upload. (2) **Web research**: Print Life founded by Cam Earven, ~200 shops, Angular SPA, solo dev, QuickBooks integration. 2024 updates: impression cost display. Q1 2025: payment fixes, matrix pricing types. (3) **User interview**: 5-20 quotes/week, 50/50 simple/complex, 10 min per quote. Critical pain: recalculation blocks input, mandatory unused steps, forced color swatches, art style change resets all selections. Wants: hybrid approval (customer submits â†’ shop reviews price â†’ approves), quote reuse/duplication, keyboard navigation, simpler workflow. Currently builds quotes internally, communicates price by phone. No formal quote tracking. Tools: Print Life + QuickBooks + Excel + Email + Shopify + Square. (4) **Documents completed**: print-life-quoting-analysis.md (full feature list, 10 friction points, UI patterns, competitive landscape), print-life-journey-quoting.md (step-by-step journey, time distribution, success metrics), screen-print-pro-journey-quoting.md (redesigned single-page flow, targets 60-70% time reduction, S&S color swatch grid, instant pricing, hybrid approval). Updated quoting-scope-definition.md with all findings (S&S color swatch component, price override, quote notes, Revised status, functional Duplicate/Edit). (5) **4Ink owner request**: Color swatches should use S&S Activewear-style dense palette with color names in white font overlaid on swatches. |
| 2026-02-08 | Breadboarding Skill | Reassessed shaping-skills decision post-pivot. Promoted breadboarding from Phase 2 deferral to full Phase 1 skill. Created: (1) `.claude/skills/breadboarding/SKILL.md` (9-step workflow: identify places, map UI/code affordances, map data stores, verify wiring, identify component boundaries, define build order); (2) `.claude/skills/breadboarding/templates/breadboard-template.md` (output template with YAML frontmatter); (3) `.claude/skills/breadboarding/reference/concepts.md` (key concepts: affordances, places, wiring, component boundaries). Integrated into workflow: updated vertical-by-vertical-strategy.md with Phase 2.5 (Breadboarding), updated CLAUDE.md (architecture, pre-build ritual, skills table, orchestration patterns), updated frontend-builder agent (added breadboarding to skills, breadboard-first startup sequence), updated AGENTS.md (Vertical Build Chain pattern, 5 orchestration patterns). Created `docs/breadboards/` directory. Ran doc-sync agent to fix drift in MEMORY.md and STRATEGY_README.md. Skill count: 6 â†’ 8 (added vertical-discovery + breadboarding). |
| 2026-02-08 | Quoting Vertical: BUILD COMPLETE | Built full Quoting vertical using git worktree (`feature/quoting-build`) and 6 parallel agents via TeamCreate. **Phase A** (4 agents parallel): (1) schema-agent updated quote/garment schemas, created color schema, expanded mock data (5 customers, 42 colors, 5 garment catalog, 6 quotes), added 116 tests; (2) swatch-agent built ColorSwatchPicker (308 lines, S&S-style dense grid, search, favorites, keyboard nav); (3) combobox-agent built CustomerCombobox + AddCustomerModal; (4) list-agent built QuotesDataTable + StatusBadge + quotes page. **Phase B** (2 agents after A): (5) form-agent built QuoteForm + LineItemRow + PricingSummary + new quote page; (6) detail-agent built quote detail page + QuoteActions + EmailPreviewModal. Fixed all lint errors (7â†’0). All checks pass: tsc 0 errors, lint 0 errors/warnings, 116/116 tests, production build success. PR #13 created. 31 files changed, 3874 insertions. |
| 2026-02-08 | Quoting Patch v2 | Addressed 20 feedback items from 4Ink first-round review. **Phase A**: New artwork schema, customer tags (new/repeat/contract), service types (screen-print/dtf/embroidery), per-location print details (replaces flat locations), discount model (replaces priceOverride), shipping+tax fields, 8 mock artworks, 8 SVG placeholders. Updated all 6 mock quotes. 171 tests passing. **Phase B-F**: PricingSummary redesign (full breakdown with discounts/shipping/tax/savings), DiscountRow, LineItemRow rewrite (service type selector, per-location details with artwork assignment), ArtworkLibrary (customer-tag-aware), ArtworkUploadModal, ArtworkAssignmentPicker, ArtworkPreview, CollapsibleSection, QuoteDetailView (reusable detail/review), QuoteReviewSheet (slide-from-right), form restructure (5 collapsible sections), customer-aware defaults (contract=auto-discount+free-shipping, new=upload-only, repeat=recently-used-first), CustomerCombobox tags+phone, AddCustomerModal phone+tag, QuoteActions inline header bar. Fixed duplicate quote bug and search re-render loop. All checks pass: tsc 0 errors, lint 0 errors/2 warnings, 171/171 tests, production build success. |
| 2026-02-09 | Quoting Patch v2 Polish (PR #14 MERGED) | Completed sticky top bar (controlled CollapsibleSection for Notes, scrollIntoView). Fixed artwork sync: deselecting from library now clears per-location assignments; switching customers clears artwork from printLocationDetails. Renamed "Duplicate" â†’ "Copy as New" (4 files). Restructured setup fees: screen-print=$40/quote flat, embroidery=$20/line item, DTF=$0. Replaced SETUP_FEE_PER_COLOR with calculateLineItemSetupFee + calculateQuoteSetupFee. Fixed "per item" â†’ "per line item" label. Created PR #14, addressed full CodeRabbit review (28 comments): fixed icon sizes to 16/20/24px (6 files), added Space key handler + aria-pressed tags + fixed nested interactives (a11y), replaced hardcoded px with Tailwind grid tokens, swapped text "âœ“" for Lucide Check icon, replaced raw input with shadcn Input, fixed originalTotal strike-through calc, fixed Q-1028 mock data total, eliminated all lint warnings (0 errors, 0 warnings). Merged PR #14 (squash). Created 4 GitHub issues for deferred tech debt: #15 (RHF+Zod migration), #16 (schema-derived types), #17 (URL query params for garment filter), #18 (shared format utils). 172 tests, all passing. |
| 2026-02-09 | Quoting Patch v3 (PR #20 MERGED) | Sticky bar redesign: collapsed multi-row service types into single inline row with color swatches + qty labels. Tooltip system overhaul: dark mode (bg-elevated), shared TooltipProvider with skipDelayDuration/sideOffset, fixed hover/flickering bugs, swatch tooltips with garment details and 2-column location grid, artwork tooltips with large preview. Pricing formula in review view: `($X x qty) + setup = total` with info icon tooltip showing per-unit breakdown and setup fee rates. Per-location decoration fee display (+$X/unit). Auto-derived color count from artwork (removed manual input). Review slide-out: added grand total, removed Edit Quote button. Doubled CollapsibleSection summary max-width. CodeRabbit fixes: empty state icon sizes. |
| 2026-02-10 | Customer Mgmt Foundation (PR #24 MERGED) | Built Customer Management data foundation. New schemas: customer (expanded with lifecycle/health/typeTags/financial/referral), contact, group, address, note. 10 customers with embedded contacts/groups/addresses. 13 contacts, 2 groups, 20 addresses, 21 notes. Badge components: LifecycleBadge, HealthBadge, TypeTagBadges, CustomerQuickStats. Constants for all new enums. Reverse lookup helpers (getCustomerQuotes, getCustomerJobs, etc.). Exported CustomerStats type. Legacy field migration scope documented. 264 tests (12 files). Code review: fixed 3 critical (UUID collisions across entity types, invalid UUID in QuoteForm, empty company bypass), 5 high (quote math x5, mutable counter), 5 architecture recommendations (exported type, referential integrity tests, reverse lookups, hardcoded px, migration docs), 7 CodeRabbit items (icon sizes, code block langs, blockquote format, hyphenation, implicit event). Rebased on main via `but pull`, squash-merged. |
| 2026-02-10 | Customer Mgmt Quality Gate (PR #33) | Ran 5 parallel audit subagents (Visual List, Visual Detail, Scope Coverage, Cross-Vertical Navigation, Playwright). Found 4 FAILs + 5 WARNs + 1 bonus. Fixed all: bg-bg-elevatedâ†’bg-elevated (3 files), ?customer= param consumption in quotes/new, ?fromâ†’?duplicate param fix, clickable customer link in QuoteDetailView, wired AddContact/AddGroup sheets, focus-visible rings on sort headers + filter chips + CopyButton, keyboard accessibility on table rows (tabIndex/Enter/Space/role/aria-label), threaded customers prop through Tabsâ†’DetailsPanel, future date display fix in formatDaysAgo + relativeDate. Verified with Playwright (AddContact sheet opens, New Quote pre-fills, "In X days" displays correctly). 264 tests, clean build. |
| 2026-02-10 | Customer Mgmt Feedback (PR #35 MERGED) | Implemented 8 feedback items from 4Ink owner review. (1) Created ColumnHeaderMenu component â€” reusable column header with sort toggle + optional inline filter dropdown via Radix DropdownMenu. (2) Refactored CustomersDataTable â€” removed filter chip rows, replaced all 7 TableHead headers with ColumnHeaderMenu instances, added health filter URL param, sort by Type (first tag alphabetical) and Health (ordinal). (3) QuotesDataTable â€” search bar moved to left for layout consistency with Customers, added clear X button, replaced sort buttons with ColumnHeaderMenu. (4) CustomerQuotesTable â€” reordered columns to Quote # | Date | Status | Total. (5) AddContactSheet â€” "Other" role shows text input for role description. (6) AddCustomerModal "Save & View Details" â€” navigates to detail page using generated UUID. (7) ActivityTimeline interactivity â€” quote icons are Links, note icons switch tabs, controlled Tabs. (8) CodeRabbit fixes â€” focus-visible states on 3 timeline elements, explicit sort direction in ColumnHeaderMenu dropdown. Follow-up: replaced manual SortKey/SortDir union types with Zod enums + z.infer + .catch() for safe URL param parsing, AddCustomerModal now generates customer ID via crypto.randomUUID() and passes through onSaveAndView callback. Pushed via GitHub MCP API (GitButler bracket-path workaround). All checks pass: tsc 0 errors, lint 0 errors, Vercel deploy success, CodeRabbit approved. |
