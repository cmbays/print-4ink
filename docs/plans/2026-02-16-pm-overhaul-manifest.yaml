vertical: pm-system
waves:
  - name: "Wave 1: Foundation"
    serial: false
    sessions:
      - topic: pm-label-cleanup
        stage: build
        prompt: |
          ## PM Label Cleanup (B1.1)

          You are cleaning up the GitHub label taxonomy for cmbays/print-4ink.
          This is an API-only session — you modify GitHub state via `gh` CLI, not files.

          ### Read First
          1. `CLAUDE.md` — project rules
          2. `docs/breadboards/pm-overhaul-breadboard.md` — affordances N1-N3, U1
          3. `docs/plans/2026-02-16-pm-overhaul-impl-plan.md` — Task 1.1

          ### What to Do

          **1. Audit current labels**
          ```bash
          gh label list --repo cmbays/print-4ink --json name --limit 200
          ```
          Verify current state before making changes.

          **2. Re-label affected issues (N1)**

          For each ad-hoc label, find issues and replace:

          | Ad-Hoc Label | Replacement |
          |--------------|-------------|
          | `enhancement` | `type/feature` |
          | `meta` | `type/tooling` |
          | `devx` | `vertical/devx` |
          | `refactor` | `type/refactor` (just delete, replacement exists) |
          | `data-quality` | `type/tech-debt` |
          | `knowledge-base` | `vertical/devx` |
          | `polish` | `type/refactor` |
          | `accessibility` | `type/tech-debt` |

          Pattern for each:
          ```bash
          # Find issues with the label
          gh issue list -l "<ad-hoc-label>" --json number --jq '.[].number' --repo cmbays/print-4ink
          # For each issue:
          gh issue edit <N> --remove-label "<ad-hoc-label>" --add-label "<replacement>" --repo cmbays/print-4ink
          ```

          **3. Delete 8 ad-hoc labels (N2)**
          ```bash
          gh label delete "<name>" --yes --repo cmbays/print-4ink
          ```

          **4. Delete 4 unused default labels (N3)**
          Delete: `documentation`, `good first issue`, `help wanted`, `question`
          Keep defaults: `duplicate`, `invalid`, `wontfix`

          **5. Verify discovered labels**
          Keep `priority/low` and `vertical/colors` — they were discovered during audit.
          Note: `type/ux-review` disposition deferred to Task 3.1 (grooming).

          ### Important
          - This is API-only. No file changes. No PR needed.
          - Double-check that replacement labels exist before removing ad-hoc ones.
          - If a replacement label doesn't exist, create it first.

          ### Acceptance
          `gh label list --repo cmbays/print-4ink` shows ~37 labels, all within
          `type/*`, `priority/*`, `vertical/*`, `phase/*`, `source/*` dimensions.
          Zero orphan labels outside the taxonomy.

      - topic: pm-project-board
        stage: build
        prompt: |
          ## PM Project Board (B1.2)

          You are creating a GitHub Projects v2 board for cmbays/print-4ink.
          This is an API-only session — you modify GitHub state via `gh` CLI.

          ### Read First
          1. `CLAUDE.md` — project rules
          2. `docs/breadboards/pm-overhaul-breadboard.md` — affordances N4-N7, U2-U5
          3. `docs/plans/2026-02-16-pm-overhaul-impl-plan.md` — Task 1.2
          4. `config/products.json` — product dropdown values
          5. `config/tools.json` — tool dropdown values
          6. `config/stages.json` — pipeline stage values

          ### Prerequisites
          Human must have run `gh auth refresh -s project` before this session.
          Verify: `gh auth status` shows `project` in scopes. If not, STOP and ask.

          ### What to Do

          **1. Create project (N5)**
          ```bash
          gh project create --owner @me --title "Screen Print Pro" --format json
          ```
          Record the project number from output.

          **2. Create 8 custom fields (N6)**

          Use `gh project field-create` for each:

          | Field | Type | Options |
          |-------|------|---------|
          | Status | SINGLE_SELECT (built-in) | Triage, Backlog, Ready, In Progress, In Review, Done |
          | Priority | SINGLE_SELECT | Urgent, High, Normal, Low |
          | Product | SINGLE_SELECT | Dashboard, Quotes, Customers, Invoices, Jobs, Garments, Screens, Pricing |
          | Tool | SINGLE_SELECT | Work Orchestrator, Skills Framework, Agent System, Knowledge Base, CI Pipeline, PM System |
          | Pipeline ID | TEXT | — |
          | Pipeline Stage | SINGLE_SELECT | Research, Interview, Shaping, Breadboarding, Impl Planning, Build, Review, Wrap-up |
          | Effort | SINGLE_SELECT | Trivial, Small, Medium, Large |
          | Phase | SINGLE_SELECT | Phase 1, Phase 2, Phase 3 |

          Source option values from the config files listed above.
          Note: Status is the built-in field — you configure its options, not create it.

          **3. Configure 4 views (N7)**

          | View | Layout | Group By | Filter |
          |------|--------|----------|--------|
          | Board | Board | Status | `is:open` |
          | By Product | Table | Product | `is:open` |
          | Pipeline Tracker | Table | Pipeline Stage | Pipeline ID is not empty |
          | Roadmap | Roadmap | — | `is:open` |

          Views may require GraphQL or the web UI if `gh project view-create` is limited.
          Check `gh project --help` for available subcommands.

          **4. Record project URL**
          Output the project URL — Task 2.2 needs it for the auto-add action.
          Format: `https://github.com/users/cmbays/projects/<N>`

          ### Important
          - This is API-only. No file changes. No PR needed.
          - If `gh project` commands fail on scope, verify PAT has `project` scope.
          - The project is user-owned (@me), not org-owned.

          ### Acceptance
          Project visible at `https://github.com/users/cmbays/projects/<N>`.
          Board view shows 6 status columns. All 8 fields in field picker.
          4 views configured.

      - topic: pm-dday-milestone
        stage: build
        prompt: |
          ## PM D-Day Milestone (B1.3)

          You are creating the D-Day milestone for cmbays/print-4ink.
          This is an API-only session — small and fast.

          ### Read First
          1. `docs/plans/2026-02-16-pm-overhaul-impl-plan.md` — Task 1.3
          2. `docs/breadboards/pm-overhaul-breadboard.md` — affordances N8-N9, U6

          ### What to Do

          **1. Create milestone (N8)**
          ```bash
          gh api repos/cmbays/print-4ink/milestones \
            -f title="D-Day" \
            -f due_on="2026-02-21T00:00:00Z" \
            -f description="Demo prep: Wizards, DTF Pricing, Pricing Mobile"
          ```

          **2. Assign 3 issues (N9)**
          ```bash
          gh issue edit 145 --milestone "D-Day" --repo cmbays/print-4ink
          gh issue edit 144 --milestone "D-Day" --repo cmbays/print-4ink
          gh issue edit 177 --milestone "D-Day" --repo cmbays/print-4ink
          ```

          **3. Verify**
          ```bash
          gh api repos/cmbays/print-4ink/milestones --jq '.[].title'
          ```

          ### Important
          - This is API-only. No file changes. No PR needed.
          - If any issue number doesn't exist, skip it and note in output.

          ### Acceptance
          `gh api repos/cmbays/print-4ink/milestones` shows "D-Day" with
          Feb 21 due date. Three issues assigned.

      - topic: pm-sub-issue-migration
        stage: build
        prompt: |
          ## PM Sub-Issue Migration (B1.4)

          You are converting checkbox-based tracking issues into native GitHub
          sub-issue relationships for cmbays/print-4ink.
          This is an API-only session using GraphQL mutations.

          ### Read First
          1. `docs/plans/2026-02-16-pm-overhaul-impl-plan.md` — Task 1.4
          2. `docs/breadboards/pm-overhaul-breadboard.md` — affordances N10-N11, U7
          3. `docs/research/2026-02-15-pm-overhaul-interview.md` — Decision #11 (dependency encoding)

          ### What to Do

          **1. Scan for tracking issues (N10)**
          Find all open issues with checkbox references to other issues:
          ```bash
          gh issue list --state open --json number,body --limit 200 --repo cmbays/print-4ink | \
            jq -r '.[] | select(.body != null) | select(.body | test("- \\[[ x]\\] #[0-9]+")) | .number'
          ```
          Known tracking issues: #166, #192, #216. You may discover more.

          **2. Parse parent-child pairs**
          For each tracking issue, extract `- [ ] #N` and `- [x] #N` patterns from the body.
          Each `#N` becomes a child of the tracking issue.

          **3. Get node IDs**
          ```bash
          gh issue view <NUMBER> --json id --jq '.id' --repo cmbays/print-4ink
          ```

          **4. Create sub-issue relationships (N11)**
          ```bash
          gh api graphql -f query='
            mutation {
              addSubIssue(input: {
                issueId: "<parent_node_id>",
                subIssueId: "<child_node_id>"
              }) {
                issue { id number }
                subIssue { id number }
              }
            }'
          ```

          **5. Optionally clean checkbox lines**
          After successful migration, consider removing the checkbox lines from
          parent issue bodies (the sub-issue UI replaces them). Only do this if
          ALL children for a parent were successfully migrated.

          ### Important
          - This is API-only. No file changes. No PR needed.
          - If `addSubIssue` mutation doesn't exist or fails, document the error.
            GitHub sub-issues API may still be in preview — check if you need
            a preview header: `gh api graphql -H "GraphQL-Features: sub_issues"`.
          - Some issues referenced in checkboxes may be closed — that's fine,
            still create the relationship.
          - Log all successful and failed migrations.

          ### Acceptance
          Known tracking issues (#166, #192, #216) show sub-issue trees in
          GitHub UI. Clicking parent shows child issues as expandable sub-issues.

  - name: "Wave 2: Infrastructure"
    serial: false
    sessions:
      - topic: pm-issue-templates
        stage: build
        dependsOn: pm-label-cleanup
        prompt: |
          ## PM Issue Templates (B2.1)

          You are creating GitHub issue form templates and a PR template
          for cmbays/print-4ink.

          ### Read First
          1. `CLAUDE.md` — project rules, design system
          2. `docs/breadboards/pm-overhaul-breadboard.md` — affordances N12-N17, U8-U12
          3. `docs/plans/2026-02-16-pm-overhaul-impl-plan.md` — Task 2.1
          4. `docs/shaping/pm-overhaul/shaping.md` — Decision D3 (template dropdowns)
          5. `config/products.json` — product names for dropdown
          6. `config/tools.json` — tool names for dropdown

          ### What to Build

          **1. Feature Request** (`.github/ISSUE_TEMPLATE/feature-request.yml` — NEW, N12)
          - Fields: Title (input, required), Description (textarea, required),
            Product/Tool (dropdown, required — combined from products + tools config),
            Acceptance Criteria (textarea, required), Files to Read (textarea, optional),
            Priority (dropdown, optional — now/next/later/icebox),
            Phase (dropdown, optional — Phase 1/2/3)
          - Auto-labels: `type/feature`

          **2. Bug Report** (`.github/ISSUE_TEMPLATE/bug-report.yml` — NEW, N13)
          - Fields: Title, What happened (textarea, required),
            Expected behavior (textarea, required),
            Steps to reproduce (textarea, required),
            Product/Tool (dropdown, required),
            Severity (dropdown, optional — Critical/High/Normal/Low)
          - Auto-labels: `type/bug`

          **3. Research Task** (`.github/ISSUE_TEMPLATE/research-task.yml` — NEW, N14)
          - Fields: Title, Goal (textarea, required — "What are we trying to learn?"),
            Questions (textarea, required), Product/Tool (dropdown, required),
            Files to Read (textarea, optional)
          - Auto-labels: `type/research`

          **4. Tracking Issue** (`.github/ISSUE_TEMPLATE/tracking-issue.yml` — NEW, N15)
          - Fields: Title, Goal (textarea, required — "What does completion look like?"),
            Sub-issues planned (textarea, optional), Product/Tool (dropdown, required),
            Milestone context (textarea, optional)
          - Auto-labels: `type/tooling`

          **5. Config** (`.github/ISSUE_TEMPLATE/config.yml` — NEW, N16)
          ```yaml
          blank_issues_enabled: false
          ```

          **6. PR Template** (`.github/pull_request_template.md` — NEW, N17)
          Sections:
          - Summary (1-3 bullets)
          - Related Issues (`Closes #X`)
          - Type checkboxes (Feature, Bug Fix, Refactor, Tooling, Docs)
          - Product checkboxes (from `config/products.json`)
          - Test Plan
          - Quality Checklist (from CLAUDE.md quality checklist)

          ### Template Format Reference (YAML Issue Forms)
          ```yaml
          name: Feature Request
          description: Suggest a new feature
          labels: ["type/feature"]
          body:
            - type: input
              id: title
              attributes:
                label: Title
              validations:
                required: true
            - type: dropdown
              id: product
              attributes:
                label: Product/Tool
                options:
                  - Dashboard
                  - Quotes
                  # ... from config files
              validations:
                required: true
          ```

          ### Files Created
          - `.github/ISSUE_TEMPLATE/feature-request.yml`
          - `.github/ISSUE_TEMPLATE/bug-report.yml`
          - `.github/ISSUE_TEMPLATE/research-task.yml`
          - `.github/ISSUE_TEMPLATE/tracking-issue.yml`
          - `.github/ISSUE_TEMPLATE/config.yml`
          - `.github/pull_request_template.md`

          ### Quality
          - Validate YAML syntax on each template
          - Ensure dropdown options match config files exactly
          - Use `build-session-protocol` for completion flow

          ### Acceptance
          "New Issue" on GitHub shows 4 template options (no blank issue).
          Each form has required fields and auto-applies correct `type/*` label.
          PR template pre-fills on `gh pr create`.

      - topic: pm-auto-add-action
        stage: build
        dependsOn: pm-project-board
        prompt: |
          ## PM Auto-Add Action (B2.2)

          You are creating a GitHub Action that auto-adds new issues and PRs
          to the project board for cmbays/print-4ink.

          ### Read First
          1. `CLAUDE.md` — project rules
          2. `docs/breadboards/pm-overhaul-breadboard.md` — affordances N18-N19
          3. `docs/plans/2026-02-16-pm-overhaul-impl-plan.md` — Task 2.2

          ### Prerequisites
          - Task 1.2 (project board) must be complete. You need the project URL.
          - Human must provide PROJECT_PAT value (a classic PAT with `project` scope).

          ### What to Build

          **1. Workflow file** (`.github/workflows/auto-project.yml` — NEW, N18)
          ```yaml
          name: Auto-add to project
          on:
            issues:
              types: [opened]
            pull_request:
              types: [opened, ready_for_review]
          jobs:
            add-to-project:
              runs-on: ubuntu-latest
              steps:
                - uses: actions/add-to-project@v1.0.2
                  with:
                    project-url: https://github.com/users/cmbays/projects/<N>
                    github-token: ${{ secrets.PROJECT_PAT }}
          ```
          Replace `<N>` with the actual project number from Task 1.2.

          **How to find the project number:**
          ```bash
          gh project list --owner @me --format json --jq '.[].number'
          ```
          Use the project titled "Screen Print Pro".

          **2. Set repository secret (N19)**
          ```bash
          gh secret set PROJECT_PAT --repo cmbays/print-4ink
          ```
          Human pastes the PAT value when prompted.

          ### Files Created
          - `.github/workflows/auto-project.yml`

          ### Quality
          - Validate YAML syntax
          - Use `build-session-protocol` for completion flow

          ### Acceptance
          Create a test issue → it appears on the project board within 60 seconds.
          Delete the test issue after verifying.

      - topic: pm-pr-labeler
        stage: build
        dependsOn: pm-label-cleanup
        prompt: |
          ## PM PR Auto-Labeler (B2.3)

          You are creating a GitHub Action that auto-labels PRs based on
          changed file paths for cmbays/print-4ink.

          ### Read First
          1. `CLAUDE.md` — project rules
          2. `docs/breadboards/pm-overhaul-breadboard.md` — affordances N20-N21
          3. `docs/plans/2026-02-16-pm-overhaul-impl-plan.md` — Task 2.3
          4. `docs/shaping/pm-overhaul/shaping.md` — Decision D7 (vertical/* only)

          ### What to Build

          **1. Labeler config** (`.github/labeler.yml` — NEW, N20)

          Map `vertical/*` labels to file paths only (Decision D7):
          ```yaml
          'vertical/quoting':
            - changed-files:
              - any-glob-to-any-file: 'app/(dashboard)/quotes/**'

          'vertical/jobs':
            - changed-files:
              - any-glob-to-any-file: 'app/(dashboard)/jobs/**'

          'vertical/garments':
            - changed-files:
              - any-glob-to-any-file: 'app/(dashboard)/garments/**'

          'vertical/price-matrix':
            - changed-files:
              - any-glob-to-any-file: 'app/(dashboard)/settings/pricing/**'

          'vertical/devx':
            - changed-files:
              - any-glob-to-any-file:
                - 'knowledge-base/**'
                - 'scripts/**'
                - 'config/**'
                - '.github/**'

          'vertical/colors':
            - changed-files:
              - any-glob-to-any-file: 'app/(dashboard)/settings/colors/**'
          ```

          Cross-cutting paths (`lib/schemas/**`, `docs/**`, `components/ui/**`)
          are deliberately left unmapped — not every PR needs an auto-label.

          **2. Labeler workflow** (`.github/workflows/labeler.yml` — NEW, N21)
          ```yaml
          name: PR Labeler
          on:
            pull_request_target:
              types: [opened, synchronize]
          jobs:
            label:
              runs-on: ubuntu-latest
              permissions:
                contents: read
                pull-requests: write
              steps:
                - uses: actions/labeler@v5
                  with:
                    configuration-path: .github/labeler.yml
          ```

          ### Files Created
          - `.github/labeler.yml`
          - `.github/workflows/labeler.yml`

          ### Quality
          - Validate YAML syntax on both files
          - Verify label names match actual labels (from Task 1.1 cleanup)
          - Use `build-session-protocol` for completion flow

          ### Acceptance
          Open a PR touching `app/(dashboard)/quotes/` → gets `vertical/quoting`
          label automatically.

      - topic: pm-work-progress
        stage: build
        dependsOn: pm-project-board
        prompt: |
          ## PM Work Progress Command + Config (B2.4 + B2.5)

          You are building the `work progress` shell command and migrating
          PROGRESS.md from tracked to gitignored for cmbays/print-4ink.

          ### Read First
          1. `CLAUDE.md` — project rules
          2. `docs/breadboards/pm-overhaul-breadboard.md` — affordances N22-N25, U13
          3. `docs/plans/2026-02-16-pm-overhaul-impl-plan.md` — Task 2.4
          4. `scripts/work.sh` — existing dispatcher pattern
          5. `docs/research/2026-02-15-pm-overhaul-interview.md` — Decision #4 (PROGRESS.md strategy)
          6. `config/tools.json` — add pm-system entry

          ### What to Build

          **1. PROGRESS.md migration (N24) — DO THIS FIRST**
          ```bash
          git rm --cached PROGRESS.md
          ```
          Then add `PROGRESS.md` to `.gitignore`. Both steps on the feature branch
          so the PR carries the tracked→gitignored transition.

          **2. Add dispatcher case (N22)**
          In `scripts/work.sh`, find the `work()` function's case statement.
          Add after the existing cases:
          ```bash
          progress)   shift; _work_progress "$@" ;;
          ```

          **3. Write `_work_progress()` function (N23)**
          Queries GitHub API and writes `PROGRESS.md`:

          | Section | Query |
          |---------|-------|
          | Milestones | `gh api repos/{owner}/{repo}/milestones --jq '...'` |
          | Now | `gh issue list -l priority/now` |
          | Next | `gh issue list -l priority/next` (cap at 10) |
          | Blocked | Sub-issue dependency queries via GraphQL |
          | Recent PRs | `gh pr list --state merged --limit 10` |
          | Stale | `gh issue list --sort updated` (>30 days) |

          Output format:
          ```markdown
          # Progress Report
          Generated: YYYY-MM-DD HH:MM

          ## Milestones
          ### D-Day (Feb 21) — 1/3 complete
          - [x] #177 Pricing Mobile
          - [ ] #145 Wizards (in progress)
          - [ ] #144 DTF Pricing (blocked by #143)

          ## Now (priority/now)
          - #216 PM Overhaul — In Progress

          ## Next (priority/next) — N items
          ...

          ## Blocked
          - #144 blocked by #143

          ## Recent PRs (last 7 days)
          - #210 feat(kb): taxonomy restructure (merged Feb 15)

          ## Stale (>30 days)
          ...
          ```

          **4. Config update (N25)**
          Add to `config/tools.json`:
          ```json
          { "slug": "pm-system", "label": "PM System" }
          ```

          ### Files Modified
          - `scripts/work.sh` (MODIFY — add case + function)
          - `.gitignore` (MODIFY — add PROGRESS.md)
          - `config/tools.json` (MODIFY — add pm-system)

          ### Quality
          - Test: `source scripts/work.sh && work progress` generates PROGRESS.md
          - Verify PROGRESS.md is in `.gitignore`
          - Verify `git rm --cached PROGRESS.md` is committed
          - Validate `config/tools.json` is valid JSON
          - Use `build-session-protocol` for completion flow

          ### Acceptance
          - `work progress` generates PROGRESS.md with all 6 sections and live data
          - `PROGRESS.md` is in `.gitignore` (not tracked)
          - `config/tools.json` includes `pm-system` entry
          - `git rm --cached PROGRESS.md` is committed on the branch

  - name: "Wave 3: Convergence"
    serial: true
    sessions:
      - topic: pm-backlog-grooming
        stage: build
        dependsOn: pm-work-progress
        prompt: |
          ## PM Backlog Grooming (B3.1)

          You are grooming the full open backlog for cmbays/print-4ink.
          This is an INTERACTIVE session — present each issue to the human
          for decisions.

          ### Read First
          1. `CLAUDE.md` — project rules
          2. `docs/breadboards/pm-overhaul-breadboard.md` — affordances N26-N29, U14
          3. `docs/plans/2026-02-16-pm-overhaul-impl-plan.md` — Task 3.1
          4. `docs/shaping/pm-overhaul/shaping.md` — requirements R4-R7

          ### What to Do

          **For each open issue, present to human (N26) and apply decisions:**

          Grooming checklist per issue:
          1. Has correct `type/*` label
          2. Has correct `priority/*` label (hard triage: `priority/next` ≤ 8-10 items)
          3. Has correct `vertical/*` label
          4. Assigned to milestone or explicitly `priority/icebox`
          5. Added to project board
          6. Stale/duplicate → close with reason comment
          7. Known blocked-by/blocking relationships set

          **Workflow:**
          ```bash
          # Get all open issues
          gh issue list --state open --json number,title,labels --limit 200 --repo cmbays/print-4ink
          ```

          For each issue, show: number, title, current labels, and ask the human
          what changes to make. Then apply:
          ```bash
          # Re-label (N27)
          gh issue edit <N> --add-label <label> --remove-label <label> --repo cmbays/print-4ink
          # Close (N28)
          gh issue close <N> --comment "Reason" --repo cmbays/print-4ink
          ```

          **Known close candidates:**
          - #85 (gh dash filters) — superseded by #216
          - #63 (KB CodeRabbit feedback) — likely resolved
          - #73 (React Hook Form) — duplicate of #15

          **Pending decision from Task 1.1:**
          `type/ux-review` → ask human: fold into `type/feedback` or `source/review`?

          **Bulk board add (N29):**
          After all issues groomed, add surviving issues to project board:
          ```bash
          gh project item-add <PROJECT_NUMBER> --owner @me \
            --url https://github.com/cmbays/print-4ink/issues/<N>
          ```

          ### Important
          - This session requires human interaction — present, don't auto-decide.
          - Target: ~40-45 clean open issues when done.
          - `priority/next` should have ~8-10 truly-next items (hard triage).
          - This is mostly API-only. No major file changes. No PR needed.

          ### Acceptance
          `gh issue list --state open` shows ~40-45 issues. All correctly labeled
          and milestoned. `priority/next` has ~8-10 items. All issues on project board.

      - topic: pm-doc
        stage: build
        dependsOn: pm-backlog-grooming
        prompt: |
          ## PM Doc (B3.2)

          You are writing the canonical PM reference document for cmbays/print-4ink.
          This is the final task — it documents everything built in this pipeline.

          ### Read First
          1. `CLAUDE.md` — project rules, canonical docs table
          2. `docs/breadboards/pm-overhaul-breadboard.md` — affordances N30-N31, U15
          3. `docs/plans/2026-02-16-pm-overhaul-impl-plan.md` — Task 3.2
          4. `docs/shaping/pm-overhaul/shaping.md` — full requirements (R0-R8),
             Decision D8 (PM doc structure)
          5. `docs/research/2026-02-15-pm-overhaul-interview.md` — all 17 decisions
          6. Current state of labels: `gh label list --repo cmbays/print-4ink`
          7. Current state of project: `gh project list --owner @me`
          8. Current state of templates: `.github/ISSUE_TEMPLATE/`
          9. Current state of workflows: `.github/workflows/`

          ### What to Build

          **1. Write `docs/PM.md` (N30)**

          10 sections. Each section starts with a 2-line agent quick-scan summary
          (italicized) that tells an agent the essential facts without reading further.

          | # | Section | Contents |
          |---|---------|----------|
          | 1 | Quick Reference | 4 agent workflows as `gh` commands: find work, create issue, update status, close issue |
          | 2 | Issue Lifecycle | Status flow: Created → Triage → Backlog → Ready → In Progress → In Review → Done. Maps to board Status field. |
          | 3 | Label Taxonomy | Complete reference table. Rules: every issue needs `type/*` + `priority/*` + `vertical/*`. List all valid labels. |
          | 4 | Issue Templates | When to use each (feature, bug, research, tracking). What fields mean. Auto-label behavior. |
          | 5 | Dependency Patterns | Three types: hierarchy (sub-issues), dependency (blocked-by/blocking), context (mentions). Commands for each. |
          | 6 | Epic Pattern | Parent issue = goal/pipeline. Sub-issues = stages. Progressive creation. Post-D-Day pattern description. |
          | 7 | Pipeline Flow | Pipeline ID format (`YYYYMMDD-topic`), stage tracking, issue creation during pipeline. |
          | 8 | Agent Conventions | How to find work, create issues, update status. Comment routing: `@cmbays` for human-needed, regular for agent-to-agent. |
          | 9 | Milestones & Cycles | Shape Up rhythm. Three human touchpoints: Bet, Interview, Smoke Test. Cooldown flow. |
          | 10 | Automation | What Actions handle (auto-add, auto-label). What agents handle. What humans handle (grooming, closing). |

          Design principle: PM.md is "how we work" — complement to CLAUDE.md's "how we build."

          Query live state to fill in real data:
          ```bash
          gh label list --repo cmbays/print-4ink --json name
          gh project list --owner @me
          ```

          **2. Update CLAUDE.md (N31)**
          Add row to the canonical documents table:

          | Document | Purpose | Update When |
          |----------|---------|-------------|
          | `docs/PM.md` | PM workflows, labels, templates, dependencies, agent conventions | PM infrastructure changes |

          ### Files
          - `docs/PM.md` (NEW)
          - `CLAUDE.md` (MODIFY — canonical doc table)

          ### Quality
          - Every section has the 2-line italicized summary
          - All label names match actual labels (query to verify)
          - All `gh` commands are tested and work
          - CLAUDE.md canonical doc table includes PM.md row
          - Use `build-session-protocol` for completion flow

          ### Acceptance
          `docs/PM.md` exists with all 10 sections. Each section has 2-line summary
          + expanded detail. CLAUDE.md canonical doc table includes `docs/PM.md` row.
