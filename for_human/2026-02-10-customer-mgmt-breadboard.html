<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Customer Management Breadboard &mdash; Screen Print Pro</title>
  <style>
    :root {
      --bg-primary: #09090b;
      --bg-elevated: #18181b;
      --bg-surface: #1c1c1f;
      --text-primary: rgba(255,255,255,0.87);
      --text-secondary: rgba(255,255,255,0.60);
      --text-muted: rgba(255,255,255,0.38);
      --action: #22d3ee;
      --success: #34d399;
      --error: #f87171;
      --warning: #fbbf24;
      --purple: #a78bfa;
      --border: rgba(255,255,255,0.08);
      --border-bright: rgba(255,255,255,0.15);
      --font-ui: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      --font-mono: 'JetBrains Mono', 'Fira Code', monospace;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: var(--bg-primary);
      color: var(--text-primary);
      font-family: var(--font-ui);
      line-height: 1.6;
      padding: 48px 24px;
    }

    .container { max-width: 1100px; margin: 0 auto; }

    /* --- TOP NAV --- */
    .top-nav { margin-bottom: 24px; }
    .back-btn {
      display: inline-flex; align-items: center; gap: 6px;
      color: var(--text-muted); font-size: 13px; font-weight: 500;
      text-decoration: none; padding: 6px 12px; border-radius: 6px;
      border: 1px solid var(--border); transition: all 0.15s ease;
    }
    .back-btn:hover { color: var(--action); border-color: rgba(34,211,238,0.3); }

    /* --- HEADER --- */
    header { margin-bottom: 32px; }
    .tag-row { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 16px; }
    .tag {
      display: inline-block; font-size: 11px; font-weight: 600;
      text-transform: uppercase; letter-spacing: 0.05em; padding: 4px 10px; border-radius: 4px;
    }
    .tag-plan { background: rgba(34,211,238,0.12); color: var(--action); }
    .tag-build { background: rgba(52,211,153,0.12); color: var(--success); }

    h1 { font-size: 28px; font-weight: 700; letter-spacing: -0.02em; margin-bottom: 8px; }
    .subtitle { color: var(--text-secondary); font-size: 15px; margin-bottom: 20px; }

    .meta-grid {
      display: grid; grid-template-columns: 1fr 1fr; gap: 1px;
      background: var(--border); border: 1px solid var(--border); border-radius: 8px;
      overflow: hidden; margin-bottom: 12px;
    }
    .meta-item { background: var(--bg-elevated); padding: 12px 16px; }
    .meta-label {
      display: block; font-size: 10px; font-weight: 600;
      text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-muted); margin-bottom: 4px;
    }
    .meta-value { font-size: 13px; color: var(--text-primary); }

    .session-resume {
      background: var(--bg-elevated); border: 1px solid var(--border);
      border-radius: 8px; padding: 12px 16px; margin-bottom: 16px;
    }
    .session-resume code {
      font-family: var(--font-mono); font-size: 12px; color: var(--action);
      user-select: all; cursor: pointer;
    }

    .related-nav { margin-bottom: 32px; }
    .related-label {
      display: block; font-size: 10px; font-weight: 600; text-transform: uppercase;
      letter-spacing: 0.05em; color: var(--text-muted); margin-bottom: 8px;
    }
    .related-links { display: flex; gap: 8px; flex-wrap: wrap; }
    .related-link {
      display: inline-flex; align-items: center; gap: 6px; font-size: 13px;
      color: var(--text-secondary); text-decoration: none; padding: 8px 14px;
      border-radius: 6px; border: 1px solid var(--border); background: var(--bg-elevated);
      transition: all 0.15s ease;
    }
    .related-link:hover { color: var(--action); border-color: rgba(34,211,238,0.3); }
    .related-link .related-desc { color: var(--text-muted); font-size: 11px; }

    .header-divider { border: none; border-top: 1px solid var(--border); margin: 0 0 32px 0; }

    /* --- SECTION HEADERS --- */
    h2 {
      font-size: 11px; font-weight: 600; text-transform: uppercase;
      letter-spacing: 0.05em; color: var(--text-muted); margin-top: 48px; margin-bottom: 16px;
    }
    h3 { font-size: 16px; font-weight: 600; margin-top: 24px; margin-bottom: 8px; }
    p { color: var(--text-secondary); font-size: 14px; margin-bottom: 12px; }
    a { color: var(--action); text-decoration: none; }
    a:hover { text-decoration: underline; }
    code {
      font-family: var(--font-mono); font-size: 12px; background: var(--bg-surface);
      padding: 2px 6px; border-radius: 4px; color: var(--action);
    }

    /* --- STAT GRID --- */
    .stat-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-bottom: 32px; }
    .stat {
      background: var(--bg-elevated); border: 1px solid var(--border);
      border-radius: 8px; padding: 16px; text-align: center;
    }
    .stat-value { font-size: 24px; font-weight: 700; color: var(--action); }
    .stat-label {
      font-size: 11px; color: var(--text-muted); text-transform: uppercase;
      letter-spacing: 0.05em; margin-top: 4px;
    }

    /* --- VIEW TABS --- */
    .view-tabs {
      display: flex; gap: 0; border-bottom: 2px solid var(--border); margin-bottom: 32px;
    }
    .view-tab {
      padding: 10px 20px; font-size: 13px; font-weight: 500; color: var(--text-muted);
      cursor: pointer; border: none; background: none; border-bottom: 2px solid transparent;
      margin-bottom: -2px; transition: all 0.15s ease;
    }
    .view-tab:hover { color: var(--text-secondary); }
    .view-tab.active { color: var(--action); border-bottom-color: var(--action); }
    .view-content { display: none; }
    .view-content.active { display: block; }

    /* ==========================================
       VIEW 1: PLACE MAP (Navigation Flow)
       ========================================== */
    .place-map {
      position: relative; padding: 20px 0;
    }

    .place-row {
      display: flex; gap: 24px; align-items: flex-start; margin-bottom: 24px;
    }
    .place-row.indented { margin-left: 60px; }

    .place-card {
      background: var(--bg-elevated); border: 1px solid var(--border-bright);
      border-radius: 10px; padding: 16px 20px; min-width: 260px; max-width: 440px;
      flex: 1; position: relative; transition: all 0.2s ease;
    }
    .place-card:hover { border-color: rgba(34,211,238,0.3); transform: translateY(-1px); }
    .place-card.page { border-left: 3px solid var(--action); }
    .place-card.modal { border-left: 3px solid var(--purple); }

    .place-id {
      display: inline-block; font-size: 10px; font-weight: 700;
      font-family: var(--font-mono); color: var(--bg-primary); padding: 2px 6px;
      border-radius: 3px; margin-bottom: 8px;
    }
    .place-card.page .place-id { background: var(--action); }
    .place-card.modal .place-id { background: var(--purple); }

    .place-name { font-size: 15px; font-weight: 600; margin-bottom: 4px; }
    .place-route {
      font-family: var(--font-mono); font-size: 11px; color: var(--text-muted);
      margin-bottom: 8px;
    }
    .place-desc { font-size: 12px; color: var(--text-secondary); line-height: 1.5; }

    .place-affordances {
      margin-top: 10px; padding-top: 10px; border-top: 1px solid var(--border);
    }
    .affordance-count {
      font-size: 11px; color: var(--text-muted); font-weight: 500;
    }
    .affordance-count span { color: var(--action); font-weight: 700; }

    .flow-arrow {
      display: flex; align-items: center; color: var(--text-muted); font-size: 20px;
      padding: 0 4px; flex-shrink: 0;
    }

    .modal-group {
      display: flex; flex-wrap: wrap; gap: 12px;
    }
    .modal-group .place-card { min-width: 200px; max-width: 220px; flex: 0 1 auto; }

    /* ==========================================
       VIEW 2: COMPONENT MAP
       ========================================== */
    .component-section { margin-bottom: 32px; }
    .component-section-title {
      font-size: 13px; font-weight: 600; color: var(--text-primary);
      margin-bottom: 12px; display: flex; align-items: center; gap: 8px;
    }
    .section-badge {
      font-size: 10px; font-weight: 700; text-transform: uppercase;
      letter-spacing: 0.05em; padding: 3px 8px; border-radius: 3px;
    }
    .section-badge.shared { background: rgba(34,211,238,0.15); color: var(--action); }
    .section-badge.vertical { background: rgba(167,139,250,0.15); color: var(--purple); }

    .component-grid {
      display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 12px;
    }

    .comp-card {
      background: var(--bg-elevated); border: 1px solid var(--border);
      border-radius: 8px; padding: 14px 16px; transition: all 0.2s ease;
    }
    .comp-card:hover { border-color: rgba(255,255,255,0.15); }
    .comp-card.shared { border-left: 3px solid var(--action); }
    .comp-card.vertical-specific { border-left: 3px solid var(--purple); }
    .comp-card.existing { border-left: 3px solid var(--success); }

    .comp-name { font-size: 13px; font-weight: 600; font-family: var(--font-mono); margin-bottom: 4px; }
    .comp-path { font-size: 11px; color: var(--text-muted); font-family: var(--font-mono); margin-bottom: 6px; }
    .comp-places { font-size: 11px; color: var(--text-secondary); }
    .comp-places span { color: var(--action); font-weight: 500; }
    .comp-ids { font-size: 10px; color: var(--text-muted); font-family: var(--font-mono); margin-top: 4px; }

    /* ==========================================
       VIEW 3: BUILD ORDER
       ========================================== */
    .build-timeline { position: relative; padding-left: 40px; }
    .build-timeline::before {
      content: ''; position: absolute; left: 16px; top: 0; bottom: 0;
      width: 2px; background: var(--border);
    }

    .build-phase {
      position: relative; margin-bottom: 32px;
    }
    .build-phase::before {
      content: ''; position: absolute; left: -28px; top: 6px;
      width: 12px; height: 12px; border-radius: 50%; border: 2px solid var(--action);
      background: var(--bg-primary); z-index: 1;
    }
    .build-phase.phase-a::before { background: var(--action); }
    .build-phase.phase-b::before { background: var(--success); border-color: var(--success); }
    .build-phase.phase-c::before { background: var(--purple); border-color: var(--purple); }
    .build-phase.phase-d::before { background: var(--warning); border-color: var(--warning); }

    .phase-label {
      font-size: 12px; font-weight: 700; text-transform: uppercase;
      letter-spacing: 0.05em; margin-bottom: 8px;
    }
    .phase-a .phase-label { color: var(--action); }
    .phase-b .phase-label { color: var(--success); }
    .phase-c .phase-label { color: var(--purple); }
    .phase-d .phase-label { color: var(--warning); }

    .phase-note {
      font-size: 11px; color: var(--text-muted); margin-bottom: 12px; font-style: italic;
    }

    .build-steps { display: flex; flex-wrap: wrap; gap: 8px; }
    .build-step {
      background: var(--bg-elevated); border: 1px solid var(--border);
      border-radius: 6px; padding: 10px 14px; font-size: 12px;
      display: flex; align-items: center; gap: 8px; transition: all 0.15s ease;
    }
    .build-step:hover { border-color: var(--border-bright); }
    .step-num {
      font-size: 10px; font-weight: 700; font-family: var(--font-mono);
      color: var(--bg-primary); padding: 2px 5px; border-radius: 3px;
      background: var(--text-muted); min-width: 20px; text-align: center;
    }
    .phase-a .step-num { background: var(--action); }
    .phase-b .step-num { background: var(--success); }
    .phase-c .step-num { background: var(--purple); }
    .phase-d .step-num { background: var(--warning); }
    .step-name { color: var(--text-primary); font-weight: 500; }
    .step-complexity { font-size: 10px; color: var(--text-muted); margin-left: auto; }

    .dep-arrow {
      display: flex; align-items: center; justify-content: center;
      padding: 8px 0; color: var(--text-muted);
    }
    .dep-arrow svg { opacity: 0.5; }

    /* ==========================================
       VIEW 4: WIRING DIAGRAM (Data Flow)
       ========================================== */
    .flow-diagram { position: relative; }

    .flow-lane {
      margin-bottom: 24px;
    }
    .lane-title {
      font-size: 11px; font-weight: 600; text-transform: uppercase;
      letter-spacing: 0.05em; color: var(--text-muted); margin-bottom: 10px;
      padding-bottom: 6px; border-bottom: 1px solid var(--border);
    }

    .flow-nodes { display: flex; flex-wrap: wrap; gap: 8px; }

    .flow-node {
      background: var(--bg-elevated); border: 1px solid var(--border);
      border-radius: 6px; padding: 8px 12px; font-size: 11px;
      cursor: default; transition: all 0.2s ease; position: relative;
    }
    .flow-node:hover { border-color: var(--border-bright); z-index: 2; }

    .flow-node.url-state { border-left: 3px solid var(--action); }
    .flow-node.react-state { border-left: 3px solid var(--success); }
    .flow-node.mock-data { border-left: 3px solid var(--warning); }
    .flow-node.derived { border-left: 3px solid var(--purple); }

    .node-id { font-family: var(--font-mono); font-weight: 700; font-size: 10px; color: var(--text-muted); }
    .node-name { color: var(--text-primary); font-weight: 500; }
    .node-type { font-size: 10px; color: var(--text-muted); }
    .node-readers, .node-writers {
      font-size: 10px; color: var(--text-muted); margin-top: 4px;
    }
    .node-readers span { color: var(--action); }
    .node-writers span { color: var(--success); }

    .flow-legend {
      display: flex; gap: 16px; flex-wrap: wrap; margin-bottom: 20px;
      padding: 12px 16px; background: var(--bg-elevated); border-radius: 8px;
      border: 1px solid var(--border);
    }
    .legend-item { display: flex; align-items: center; gap: 6px; font-size: 11px; color: var(--text-secondary); }
    .legend-swatch {
      width: 12px; height: 12px; border-radius: 2px; border: 1px solid var(--border);
    }

    /* --- RESPONSIVE --- */
    @media (max-width: 768px) {
      .stat-grid { grid-template-columns: 1fr 1fr; }
      .place-row { flex-direction: column; gap: 12px; }
      .place-row.indented { margin-left: 20px; }
      .modal-group { flex-direction: column; }
      .modal-group .place-card { max-width: 100%; min-width: auto; }
      .component-grid { grid-template-columns: 1fr; }
      .view-tabs { overflow-x: auto; -webkit-overflow-scrolling: touch; }
      .meta-grid { grid-template-columns: 1fr; }
    }

    footer {
      margin-top: 48px; padding-top: 24px;
      border-top: 1px solid var(--border);
      font-size: 12px; color: var(--text-muted); text-align: center;
    }
  </style>
</head>
<body>
  <div class="container">

    <!-- TOP NAV -->
    <nav class="top-nav">
      <a class="back-btn" href="index.html">&larr; Back to Index</a>
    </nav>

    <!-- HEADER -->
    <header>
      <div class="tag-row">
        <span class="tag tag-plan">Plan</span>
        <span class="tag tag-build">Build</span>
      </div>

      <h1>Customer Management Breadboard</h1>
      <p class="subtitle">Interactive visualization of Places, Components, Wiring, and Build Order for the Customer Management vertical</p>

      <div class="meta-grid">
        <div class="meta-item">
          <span class="meta-label">Date</span>
          <span class="meta-value">2026-02-10</span>
        </div>
        <div class="meta-item">
          <span class="meta-label">Branch</span>
          <span class="meta-value"><code>session/0209-customer-mgmt-discovery</code></span>
        </div>
        <div class="meta-item">
          <span class="meta-label">Phase</span>
          <span class="meta-value">Phase 1 &mdash; Mock Data</span>
        </div>
        <div class="meta-item">
          <span class="meta-label">Vertical</span>
          <span class="meta-value">Customer Management</span>
        </div>
      </div>

      <div class="session-resume">
        <span class="meta-label">Resume Session</span>
        <code>claude --resume 69497710-9bb5-46d9-8e49-949cda0e9d65</code>
      </div>
    </header>

    <nav class="related-nav">
      <span class="related-label">Related Sessions</span>
      <div class="related-links">
        <a class="related-link" href="2026-02-08-strategic-pivot.html">
          &larr; Strategic Pivot <span class="related-desc">&mdash; Vertical-by-vertical strategy</span>
        </a>
      </div>
    </nav>

    <hr class="header-divider">

    <!-- STATS -->
    <div class="stat-grid">
      <div class="stat">
        <div class="stat-value">9</div>
        <div class="stat-label">Places</div>
      </div>
      <div class="stat">
        <div class="stat-value">102</div>
        <div class="stat-label">UI Affordances</div>
      </div>
      <div class="stat">
        <div class="stat-value">33</div>
        <div class="stat-label">Code Affordances</div>
      </div>
      <div class="stat">
        <div class="stat-value">21</div>
        <div class="stat-label">Components</div>
      </div>
    </div>

    <!-- VIEW TABS -->
    <div class="view-tabs">
      <button class="view-tab active" onclick="switchView('places')">Place Map</button>
      <button class="view-tab" onclick="switchView('components')">Component Map</button>
      <button class="view-tab" onclick="switchView('build')">Build Order</button>
      <button class="view-tab" onclick="switchView('data')">Data Flow</button>
    </div>

    <!-- ==========================================
         VIEW 1: PLACE MAP
         ========================================== -->
    <div id="view-places" class="view-content active">
      <p>Pages are bounded contexts where affordances live. Modals block what's behind them, creating sub-Places. Arrows show primary navigation paths.</p>

      <h2>Pages</h2>
      <div class="place-map">
        <div class="place-row">
          <div class="place-card page">
            <span class="place-id">P1</span>
            <div class="place-name">Customer List</div>
            <div class="place-route">/customers</div>
            <div class="place-desc">Browse, search, filter with 5 smart views (All, Prospects, Top, Needs Attention, Seasonal). Quick stats bar, type tag filters, sortable columns.</div>
            <div class="place-affordances">
              <div class="affordance-count"><span>16</span> UI affordances &middot; <span>7</span> code affordances</div>
            </div>
          </div>

          <div class="flow-arrow">&rarr;</div>

          <div class="place-card page">
            <span class="place-id">P2</span>
            <div class="place-name">Customer Detail</div>
            <div class="place-route">/customers/[id]</div>
            <div class="place-desc">Full customer dashboard. Header with stats + lifecycle badge + actions. 7 tabs: Activity, Quotes, Jobs, Artwork, Contacts, Details, Notes.</div>
            <div class="place-affordances">
              <div class="affordance-count"><span>73</span> UI affordances &middot; <span>23</span> code affordances</div>
            </div>
          </div>
        </div>
      </div>

      <h2>Modals &amp; Sub-Places</h2>
      <div class="place-map">
        <!-- P1 modals -->
        <p style="font-size: 12px; color: var(--text-muted); margin-bottom: 12px; font-weight: 600;">From Customer List (P1):</p>
        <div class="place-row indented">
          <div class="modal-group">
            <div class="place-card modal">
              <span class="place-id">P1.1</span>
              <div class="place-name">Add Customer Modal</div>
              <div class="place-desc">Quick-create: company, contact, email/phone, type tags. &lt; 30 seconds.</div>
              <div class="place-affordances">
                <div class="affordance-count"><span>8</span> UI &middot; <span>2</span> code</div>
              </div>
            </div>
          </div>
        </div>

        <!-- P2 modals -->
        <p style="font-size: 12px; color: var(--text-muted); margin-bottom: 12px; margin-top: 20px; font-weight: 600;">From Customer Detail (P2):</p>
        <div class="place-row indented">
          <div class="modal-group">
            <div class="place-card modal">
              <span class="place-id">P2.2</span>
              <div class="place-name">Add Contact</div>
              <div class="place-desc">Name, email, phone, role, group assignment, primary flag.</div>
              <div class="place-affordances">
                <div class="affordance-count"><span>8</span> UI</div>
              </div>
            </div>
            <div class="place-card modal">
              <span class="place-id">P2.3</span>
              <div class="place-name">Add Group</div>
              <div class="place-desc">Group name within company.</div>
              <div class="place-affordances">
                <div class="affordance-count"><span>3</span> UI</div>
              </div>
            </div>
            <div class="place-card modal">
              <span class="place-id">P2.4</span>
              <div class="place-name">Edit Customer</div>
              <div class="place-desc">Full profile: tags, payment terms, pricing, tax, addresses, referral, lifecycle override.</div>
              <div class="place-affordances">
                <div class="affordance-count"><span>13</span> UI</div>
              </div>
            </div>
            <div class="place-card modal">
              <span class="place-id">P2.5</span>
              <div class="place-name">Archive Confirm</div>
              <div class="place-desc">Confirmation dialog before archiving.</div>
              <div class="place-affordances">
                <div class="affordance-count"><span>3</span> UI</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <h2>Cross-Vertical Navigation</h2>
      <div style="background: var(--bg-elevated); border: 1px solid var(--border); border-radius: 8px; padding: 16px 20px; font-size: 12px; font-family: var(--font-mono); color: var(--text-secondary); line-height: 2;">
        <span style="color: var(--action);">P1</span> Customer List<br>
        &nbsp;&nbsp;<span style="color: var(--text-muted);">click row</span> &rarr; <span style="color: var(--action);">P2</span> /customers/[id]<br>
        &nbsp;&nbsp;<span style="color: var(--text-muted);">click Add Customer</span> &rarr; <span style="color: var(--purple);">P1.1</span> Add Customer Modal<br>
        <br>
        <span style="color: var(--action);">P2</span> Customer Detail<br>
        &nbsp;&nbsp;<span style="color: var(--text-muted);">click "New Quote"</span> &rarr; <span style="color: var(--warning);">/quotes/new?customer={id}</span><br>
        &nbsp;&nbsp;<span style="color: var(--text-muted);">click quote row</span> &rarr; <span style="color: var(--warning);">/quotes/[id]</span><br>
        &nbsp;&nbsp;<span style="color: var(--text-muted);">click job row</span> &rarr; <span style="color: var(--warning);">/jobs/[id]</span><br>
        &nbsp;&nbsp;<span style="color: var(--text-muted);">click "Copy as New"</span> &rarr; <span style="color: var(--warning);">/quotes/new?from={quoteId}</span><br>
        &nbsp;&nbsp;<span style="color: var(--text-muted);">click referrer</span> &rarr; <span style="color: var(--action);">P2</span> /customers/[referrerId]<br>
        &nbsp;&nbsp;<span style="color: var(--text-muted);">click "Archive"</span> &rarr; <span style="color: var(--action);">P1</span> /customers<br>
        &nbsp;&nbsp;<span style="color: var(--text-muted);">breadcrumb</span> &rarr; <span style="color: var(--action);">P1</span> /customers <span style="color: var(--text-muted);">or</span> / dashboard
      </div>

      <h2>P2 Tab Structure</h2>
      <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 8px;">
        <div style="background: var(--bg-elevated); border: 1px solid var(--action); border-radius: 6px; padding: 10px 12px; text-align: center;">
          <div style="font-size: 12px; font-weight: 600; color: var(--action);">Activity</div>
          <div style="font-size: 10px; color: var(--text-muted); margin-top: 2px;">Default tab</div>
          <div style="font-size: 10px; color: var(--text-muted);">3 affordances</div>
        </div>
        <div style="background: var(--bg-elevated); border: 1px solid var(--border); border-radius: 6px; padding: 10px 12px; text-align: center;">
          <div style="font-size: 12px; font-weight: 600;">Quotes</div>
          <div style="font-size: 10px; color: var(--text-muted); margin-top: 2px;">3 affordances</div>
        </div>
        <div style="background: var(--bg-elevated); border: 1px solid var(--border); border-radius: 6px; padding: 10px 12px; text-align: center;">
          <div style="font-size: 12px; font-weight: 600;">Jobs</div>
          <div style="font-size: 10px; color: var(--text-muted); margin-top: 2px;">2 affordances</div>
        </div>
        <div style="background: var(--bg-elevated); border: 1px solid var(--border); border-radius: 6px; padding: 10px 12px; text-align: center;">
          <div style="font-size: 12px; font-weight: 600;">Artwork</div>
          <div style="font-size: 10px; color: var(--text-muted); margin-top: 2px;">7 affordances</div>
        </div>
        <div style="background: var(--bg-elevated); border: 1px solid var(--border); border-radius: 6px; padding: 10px 12px; text-align: center;">
          <div style="font-size: 12px; font-weight: 600;">Contacts</div>
          <div style="font-size: 10px; color: var(--text-muted); margin-top: 2px;">7 affordances</div>
        </div>
        <div style="background: var(--bg-elevated); border: 1px solid var(--border); border-radius: 6px; padding: 10px 12px; text-align: center;">
          <div style="font-size: 12px; font-weight: 600;">Details</div>
          <div style="font-size: 10px; color: var(--text-muted); margin-top: 2px;">8 affordances</div>
        </div>
        <div style="background: var(--bg-elevated); border: 1px solid var(--border); border-radius: 6px; padding: 10px 12px; text-align: center;">
          <div style="font-size: 12px; font-weight: 600; color: var(--success);">Notes</div>
          <div style="font-size: 10px; color: var(--text-muted); margin-top: 2px;">Default for Prospects</div>
          <div style="font-size: 10px; color: var(--text-muted);">8 affordances</div>
        </div>
      </div>
    </div>

    <!-- ==========================================
         VIEW 2: COMPONENT MAP
         ========================================== -->
    <div id="view-components" class="view-content">
      <p>Components are grouped by reusability. <span style="color: var(--action);">Shared</span> components live in <code>components/features/</code> and are reused across verticals. <span style="color: var(--purple);">Vertical-specific</span> components live under <code>app/(dashboard)/customers/</code>. <span style="color: var(--success);">Existing</span> components are already built.</p>

      <div class="component-section">
        <div class="component-section-title">
          <span class="section-badge" style="background: rgba(52,211,153,0.15); color: var(--success);">Existing</span>
          Already Built (Enhance)
        </div>
        <div class="component-grid">
          <div class="comp-card existing">
            <div class="comp-name">AddCustomerModal</div>
            <div class="comp-path">components/features/</div>
            <div class="comp-places">Used in: <span>P1.1, Quoting</span></div>
            <div class="comp-ids">Needs: type tags, lifecycle auto-set, company required</div>
          </div>
          <div class="comp-card existing">
            <div class="comp-name">CustomerCombobox</div>
            <div class="comp-path">components/features/</div>
            <div class="comp-places">Used in: <span>Quoting, P2.4</span></div>
            <div class="comp-ids">Needs: lifecycle badge, enriched display</div>
          </div>
          <div class="comp-card existing">
            <div class="comp-name">StatusBadge</div>
            <div class="comp-path">components/features/</div>
            <div class="comp-places">Used in: <span>P2 Quotes tab</span></div>
            <div class="comp-ids">Reuse as-is for quote status display</div>
          </div>
        </div>
      </div>

      <div class="component-section">
        <div class="component-section-title">
          <span class="section-badge shared">Shared</span>
          New Shared Components (Reusable Across Verticals)
        </div>
        <div class="component-grid">
          <div class="comp-card shared">
            <div class="comp-name">LifecycleBadge</div>
            <div class="comp-path">components/features/</div>
            <div class="comp-places">Used in: <span>P1, P2, Quoting</span></div>
            <div class="comp-ids">U14, U34 &middot; Prospect(cyan) New(white) Repeat(green) Contract(amber)</div>
          </div>
          <div class="comp-card shared">
            <div class="comp-name">HealthBadge</div>
            <div class="comp-path">components/features/</div>
            <div class="comp-places">Used in: <span>P1, P2</span></div>
            <div class="comp-ids">U15, U35 &middot; Only shows when not Active</div>
          </div>
          <div class="comp-card shared">
            <div class="comp-name">TypeTagBadges</div>
            <div class="comp-path">components/features/</div>
            <div class="comp-places">Used in: <span>P1, P2, P2.4</span></div>
            <div class="comp-ids">U16, U36 &middot; Display + edit (multi-select) modes</div>
          </div>
          <div class="comp-card shared">
            <div class="comp-name">CustomerQuickStats</div>
            <div class="comp-path">components/features/</div>
            <div class="comp-places">Used in: <span>P1 (bar), P2 (header)</span></div>
            <div class="comp-ids">U13, U37 &middot; Revenue, orders, AOV, last order</div>
          </div>
          <div class="comp-card shared">
            <div class="comp-name">ArtworkGallery</div>
            <div class="comp-path">components/features/</div>
            <div class="comp-places">Used in: <span>P2 Artwork tab</span></div>
            <div class="comp-ids">U65-U71 &middot; Smart-sorted thumbnails, badges, tooltips</div>
          </div>
          <div class="comp-card shared">
            <div class="comp-name">NotesPanel</div>
            <div class="comp-path">components/features/</div>
            <div class="comp-places">Used in: <span>P2 Notes tab</span></div>
            <div class="comp-ids">U95-U102 &middot; Quick-add, pin, channel tags. Reusable for any entity.</div>
          </div>
        </div>
      </div>

      <div class="component-section">
        <div class="component-section-title">
          <span class="section-badge vertical">Vertical</span>
          Customer List Page Components
        </div>
        <div class="component-grid">
          <div class="comp-card vertical-specific">
            <div class="comp-name">SmartViewTabs</div>
            <div class="comp-path">app/.../customers/_components/</div>
            <div class="comp-places">Used in: <span>P1</span></div>
            <div class="comp-ids">U2-U6 &middot; All, Prospects, Top, Needs Attention, Seasonal</div>
          </div>
          <div class="comp-card vertical-specific">
            <div class="comp-name">CustomersDataTable</div>
            <div class="comp-path">app/.../customers/_components/</div>
            <div class="comp-places">Used in: <span>P1</span></div>
            <div class="comp-ids">U1, U7-U10, U12-U16 &middot; Extends shared table pattern</div>
          </div>
          <div class="comp-card vertical-specific">
            <div class="comp-name">CustomerListStatsBar</div>
            <div class="comp-path">app/.../customers/_components/</div>
            <div class="comp-places">Used in: <span>P1</span></div>
            <div class="comp-ids">U13 &middot; Total, Active, Revenue YTD, Prospects</div>
          </div>
        </div>
      </div>

      <div class="component-section">
        <div class="component-section-title">
          <span class="section-badge vertical">Vertical</span>
          Customer Detail Page Components
        </div>
        <div class="component-grid">
          <div class="comp-card vertical-specific">
            <div class="comp-name">CustomerDetailHeader</div>
            <div class="comp-path">app/.../customers/[id]/_components/</div>
            <div class="comp-places">Used in: <span>P2</span></div>
            <div class="comp-ids">U30-U41 &middot; Company, contact, badges, stats, actions</div>
          </div>
          <div class="comp-card vertical-specific">
            <div class="comp-name">ActivityTimeline</div>
            <div class="comp-path">app/.../customers/[id]/_components/</div>
            <div class="comp-places">Used in: <span>P2 Activity tab</span></div>
            <div class="comp-ids">U50-U52 &middot; Reverse-chronological merged events</div>
          </div>
          <div class="comp-card vertical-specific">
            <div class="comp-name">CustomerQuotesTable</div>
            <div class="comp-path">app/.../customers/[id]/_components/</div>
            <div class="comp-places">Used in: <span>P2 Quotes tab</span></div>
            <div class="comp-ids">U55-U57 &middot; Quote #, status, total, Copy as New</div>
          </div>
          <div class="comp-card vertical-specific">
            <div class="comp-name">CustomerJobsTable</div>
            <div class="comp-path">app/.../customers/[id]/_components/</div>
            <div class="comp-places">Used in: <span>P2 Jobs tab</span></div>
            <div class="comp-ids">U60-U61 &middot; Job #, status, due date</div>
          </div>
          <div class="comp-card vertical-specific">
            <div class="comp-name">ContactHierarchy</div>
            <div class="comp-path">app/.../customers/[id]/_components/</div>
            <div class="comp-places">Used in: <span>P2 Contacts tab</span></div>
            <div class="comp-ids">U75-U81 &middot; Company &rarr; Group &rarr; Contact tree</div>
          </div>
          <div class="comp-card vertical-specific">
            <div class="comp-name">CustomerDetailsPanel</div>
            <div class="comp-path">app/.../customers/[id]/_components/</div>
            <div class="comp-places">Used in: <span>P2 Details tab</span></div>
            <div class="comp-ids">U85-U92 &middot; Addresses, tax, payment, pricing, referral</div>
          </div>
          <div class="comp-card vertical-specific">
            <div class="comp-name">EditCustomerSheet</div>
            <div class="comp-path">app/.../customers/[id]/_components/</div>
            <div class="comp-places">Used in: <span>P2.4</span></div>
            <div class="comp-ids">U125-U137 &middot; Full profile edit form</div>
          </div>
          <div class="comp-card vertical-specific">
            <div class="comp-name">AddContactSheet</div>
            <div class="comp-path">app/.../customers/[id]/_components/</div>
            <div class="comp-places">Used in: <span>P2.2</span></div>
            <div class="comp-ids">U110-U117</div>
          </div>
          <div class="comp-card vertical-specific">
            <div class="comp-name">AddGroupSheet</div>
            <div class="comp-path">app/.../customers/[id]/_components/</div>
            <div class="comp-places">Used in: <span>P2.3</span></div>
            <div class="comp-ids">U120-U122</div>
          </div>
        </div>
      </div>
    </div>

    <!-- ==========================================
         VIEW 3: BUILD ORDER
         ========================================== -->
    <div id="view-build" class="view-content">
      <p>Build phases flow top-to-bottom. Steps within a phase can run in parallel. Phases B, C, and D can all run in parallel once Phase A completes.</p>

      <div class="build-timeline">
        <!-- Phase A -->
        <div class="build-phase phase-a">
          <div class="phase-label">Phase A &mdash; Foundation + Shared Components</div>
          <div class="phase-note">All steps in this phase can run in parallel (after steps 1-2 complete as the base)</div>
          <div class="build-steps">
            <div class="build-step">
              <span class="step-num">1</span>
              <span class="step-name">Schemas (contact, address, group, note, expanded customer)</span>
              <span class="step-complexity">Medium</span>
            </div>
            <div class="build-step">
              <span class="step-num">2</span>
              <span class="step-name">Mock Data Expansion (10 customers, contacts, notes, addresses)</span>
              <span class="step-complexity">High</span>
            </div>
          </div>
          <div class="dep-arrow">
            <svg width="20" height="24" viewBox="0 0 20 24" fill="none"><path d="M10 0v20M4 14l6 6 6-6" stroke="currentColor" stroke-width="2"/></svg>
          </div>
          <div class="build-steps">
            <div class="build-step">
              <span class="step-num">3</span>
              <span class="step-name">LifecycleBadge</span>
              <span class="step-complexity">Low</span>
            </div>
            <div class="build-step">
              <span class="step-num">4</span>
              <span class="step-name">HealthBadge</span>
              <span class="step-complexity">Low</span>
            </div>
            <div class="build-step">
              <span class="step-num">5</span>
              <span class="step-name">TypeTagBadges</span>
              <span class="step-complexity">Low</span>
            </div>
            <div class="build-step">
              <span class="step-num">6</span>
              <span class="step-name">NotesPanel (shared)</span>
              <span class="step-complexity">Medium</span>
            </div>
            <div class="build-step">
              <span class="step-num">7</span>
              <span class="step-name">ArtworkGallery (shared)</span>
              <span class="step-complexity">High</span>
            </div>
            <div class="build-step">
              <span class="step-num">8</span>
              <span class="step-name">AddCustomerModal (enhanced)</span>
              <span class="step-complexity">Low-Med</span>
            </div>
            <div class="build-step">
              <span class="step-num">9</span>
              <span class="step-name">CustomerQuickStats</span>
              <span class="step-complexity">Low</span>
            </div>
          </div>
        </div>

        <!-- Parallel split -->
        <div style="display: flex; gap: 20px; margin-bottom: 32px; position: relative; padding-left: 0; margin-left: -40px;">
          <div style="flex: 1; padding-left: 40px; position: relative;">
            <div style="position: absolute; left: 16px; top: 0; bottom: 0; width: 2px; background: var(--success);"></div>

            <!-- Phase B -->
            <div class="build-phase phase-b" style="margin-bottom: 0;">
              <div class="phase-label">Phase B &mdash; Customer List Page</div>
              <div class="phase-note">Can start as soon as Phase A schemas + badges are ready</div>
              <div class="build-steps">
                <div class="build-step">
                  <span class="step-num">10</span>
                  <span class="step-name">Customer List (/customers)</span>
                  <span class="step-complexity">High</span>
                </div>
              </div>
            </div>
          </div>

          <div style="flex: 1; padding-left: 40px; position: relative;">
            <div style="position: absolute; left: 16px; top: 0; bottom: 0; width: 2px; background: var(--purple);"></div>

            <!-- Phase C -->
            <div class="build-phase phase-c" style="margin-bottom: 0;">
              <div class="phase-label">Phase C &mdash; Customer Detail Page</div>
              <div class="phase-note">Largest phase &mdash; header + 7 tabs + 4 modals</div>
              <div class="build-steps">
                <div class="build-step">
                  <span class="step-num">11</span>
                  <span class="step-name">Customer Detail + All Sub-components</span>
                  <span class="step-complexity">Very High</span>
                </div>
              </div>
            </div>
          </div>

          <div style="flex: 1; padding-left: 40px; position: relative;">
            <div style="position: absolute; left: 16px; top: 0; bottom: 0; width: 2px; background: var(--warning);"></div>

            <!-- Phase D -->
            <div class="build-phase phase-d" style="margin-bottom: 0;">
              <div class="phase-label">Phase D &mdash; Interconnections</div>
              <div class="phase-note">Enhance existing quoting combobox</div>
              <div class="build-steps">
                <div class="build-step">
                  <span class="step-num">13</span>
                  <span class="step-name">Quoting Interconnection</span>
                  <span class="step-complexity">Low-Med</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <h2>Dependency Graph Summary</h2>
      <div style="background: var(--bg-elevated); border: 1px solid var(--border); border-radius: 8px; padding: 16px 20px; font-size: 12px; font-family: var(--font-mono); color: var(--text-secondary); line-height: 2.2;">
        <span style="color: var(--action);">Step 1</span> Schemas &rarr; <span style="color: var(--text-muted);">blocks everything</span><br>
        <span style="color: var(--action);">Step 2</span> Mock Data &rarr; <span style="color: var(--text-muted);">blocks all display components</span><br>
        <span style="color: var(--action);">Steps 3-9</span> Shared Components &rarr; <span style="color: var(--text-muted);">run in parallel, block pages</span><br>
        <span style="color: var(--success);">Step 10</span> Customer List &rarr; <span style="color: var(--text-muted);">needs 1-5, 8-9</span><br>
        <span style="color: var(--purple);">Step 11</span> Customer Detail &rarr; <span style="color: var(--text-muted);">needs 1-9 (all shared components)</span><br>
        <span style="color: var(--warning);">Step 13</span> Quoting &rarr; <span style="color: var(--text-muted);">needs 1-3 only (schemas, data, LifecycleBadge)</span>
      </div>
    </div>

    <!-- ==========================================
         VIEW 4: DATA FLOW
         ========================================== -->
    <div id="view-data" class="view-content">
      <p>Shows where state lives and how it flows between affordances. Color indicates state type.</p>

      <div class="flow-legend">
        <div class="legend-item">
          <div class="legend-swatch" style="background: var(--action);"></div>
          URL State (filters, search, sort)
        </div>
        <div class="legend-item">
          <div class="legend-swatch" style="background: var(--success);"></div>
          React State (form inputs, tab selection)
        </div>
        <div class="legend-item">
          <div class="legend-swatch" style="background: var(--warning);"></div>
          Mock Data (imported, mutated in-memory)
        </div>
        <div class="legend-item">
          <div class="legend-swatch" style="background: var(--purple);"></div>
          Derived (computed from other stores)
        </div>
      </div>

      <div class="flow-diagram">
        <div class="flow-lane">
          <div class="lane-title">URL State &mdash; Persists across page refreshes, shareable</div>
          <div class="flow-nodes">
            <div class="flow-node url-state">
              <div class="node-id">S1</div>
              <div class="node-name">Customer List Params</div>
              <div class="node-type">?q &middot; ?view &middot; ?tags &middot; ?lifecycle &middot; ?sort &middot; ?dir &middot; ?archived</div>
              <div class="node-readers"><span>Readers:</span> N1, N2, N3, N4, N5, N7, N33</div>
              <div class="node-writers"><span>Writers:</span> U1 search, U2-U6 tabs, U7 tags, U8 lifecycle, U9 sort, U12 archive</div>
            </div>
          </div>
        </div>

        <div class="flow-lane">
          <div class="lane-title">React State &mdash; Component-local, resets on navigation</div>
          <div class="flow-nodes">
            <div class="flow-node react-state">
              <div class="node-id">S2</div>
              <div class="node-name">Active Tab</div>
              <div class="node-type">P2 tab selection</div>
              <div class="node-readers"><span>Readers:</span> U42, tab content</div>
              <div class="node-writers"><span>Writers:</span> N13 setActiveTab, N32 (defaults: "notes" for Prospects, "activity" otherwise)</div>
            </div>
            <div class="flow-node react-state">
              <div class="node-id">S5</div>
              <div class="node-name">Add Customer Form</div>
              <div class="node-type">P1.1 form inputs</div>
              <div class="node-readers"><span>Readers:</span> U20-U24, N9 validate</div>
              <div class="node-writers"><span>Writers:</span> U20-U24 typing, N8 reset</div>
            </div>
            <div class="flow-node react-state">
              <div class="node-id">S6</div>
              <div class="node-name">Artwork View</div>
              <div class="node-type">sort mode, selected artwork</div>
              <div class="node-readers"><span>Readers:</span> U65, U69</div>
              <div class="node-writers"><span>Writers:</span> N19 sort, N21 select</div>
            </div>
            <div class="flow-node react-state">
              <div class="node-id">S7</div>
              <div class="node-name">Note Draft</div>
              <div class="node-type">content + channel tag</div>
              <div class="node-readers"><span>Readers:</span> U95, U96</div>
              <div class="node-writers"><span>Writers:</span> U95 type, U96 select, N23 clear</div>
            </div>
            <div class="flow-node react-state">
              <div class="node-id">S8</div>
              <div class="node-name">Contact Form</div>
              <div class="node-type">P2.2 inputs</div>
            </div>
            <div class="flow-node react-state">
              <div class="node-id">S9</div>
              <div class="node-name">Group Form</div>
              <div class="node-type">P2.3 inputs</div>
            </div>
            <div class="flow-node react-state">
              <div class="node-id">S10</div>
              <div class="node-name">Edit Customer Form</div>
              <div class="node-type">P2.4 full profile edit</div>
              <div class="node-readers"><span>Readers:</span> U125-U135, N29</div>
              <div class="node-writers"><span>Writers:</span> U125-U135 inputs, P2.4 mount (pre-fill)</div>
            </div>
          </div>
        </div>

        <div class="flow-lane">
          <div class="lane-title">Mock Data &mdash; Imported from lib/mock-data.ts, mutated in-memory (Phase 1)</div>
          <div class="flow-nodes">
            <div class="flow-node mock-data">
              <div class="node-id">S3</div>
              <div class="node-name">All Mock Data</div>
              <div class="node-type">customers &middot; contacts &middot; groups &middot; notes &middot; quotes &middot; jobs &middot; artworks</div>
              <div class="node-readers"><span>Readers:</span> N1, N11, N14-N18, N24-N25, all display affordances</div>
              <div class="node-writers"><span>Writers:</span> N8 (add customer), N22 (set primary), N23 (add note), N26 (pin), N27-N30 (CRUD)</div>
            </div>
          </div>
        </div>

        <div class="flow-lane">
          <div class="lane-title">Derived &mdash; Computed from other stores, not persisted</div>
          <div class="flow-nodes">
            <div class="flow-node derived">
              <div class="node-id">S4</div>
              <div class="node-name">Quick Stats</div>
              <div class="node-type">Total customers, Active this month, YTD revenue, Prospect count</div>
              <div class="node-readers"><span>Readers:</span> U13 stats bar</div>
              <div class="node-writers"><span>Writers:</span> N31 (recomputed when S3 changes)</div>
            </div>
          </div>
        </div>
      </div>

      <h2>Key Data Flows</h2>
      <div style="display: grid; gap: 12px;">
        <div style="background: var(--bg-elevated); border: 1px solid var(--border); border-radius: 8px; padding: 14px 16px;">
          <div style="font-size: 13px; font-weight: 600; margin-bottom: 4px;">Search &amp; Filter Flow</div>
          <div style="font-size: 12px; color: var(--text-secondary); font-family: var(--font-mono);">
            <span style="color: var(--success);">U1</span> type query &rarr;
            <span style="color: var(--action);">S1</span> ?q param &rarr;
            <span style="color: var(--purple);">N1</span> filterCustomers() &rarr;
            <span style="color: var(--text-primary);">Table rows update</span>
          </div>
        </div>
        <div style="background: var(--bg-elevated); border: 1px solid var(--border); border-radius: 8px; padding: 14px 16px;">
          <div style="font-size: 13px; font-weight: 600; margin-bottom: 4px;">Add Customer Flow</div>
          <div style="font-size: 12px; color: var(--text-secondary); font-family: var(--font-mono);">
            <span style="color: var(--success);">U25</span> click Save &rarr;
            <span style="color: var(--purple);">N9</span> validate &rarr;
            <span style="color: var(--purple);">N8</span> saveNewCustomer() &rarr;
            <span style="color: var(--warning);">S3</span> add to mock data &rarr;
            <span style="color: var(--text-primary);">Close modal, update list</span>
          </div>
        </div>
        <div style="background: var(--bg-elevated); border: 1px solid var(--border); border-radius: 8px; padding: 14px 16px;">
          <div style="font-size: 13px; font-weight: 600; margin-bottom: 4px;">Note Creation Flow</div>
          <div style="font-size: 12px; color: var(--text-secondary); font-family: var(--font-mono);">
            <span style="color: var(--success);">U95</span> type note +
            <span style="color: var(--success);">U96</span> select channel &rarr;
            <span style="color: var(--success);">S7</span> draft state &rarr;
            <span style="color: var(--success);">U97</span> click Add &rarr;
            <span style="color: var(--purple);">N23</span> addNote() &rarr;
            <span style="color: var(--warning);">S3</span> add to notes &rarr;
            <span style="color: var(--text-primary);">Prepend to list, clear draft</span>
          </div>
        </div>
        <div style="background: var(--bg-elevated); border: 1px solid var(--border); border-radius: 8px; padding: 14px 16px;">
          <div style="font-size: 13px; font-weight: 600; margin-bottom: 4px;">Cross-Vertical: New Quote from Customer</div>
          <div style="font-size: 12px; color: var(--text-secondary); font-family: var(--font-mono);">
            <span style="color: var(--success);">U38</span> click "New Quote" &rarr;
            <span style="color: var(--purple);">N12</span> navigateToNewQuote() &rarr;
            <span style="color: var(--text-primary);">/quotes/new?customer={id}</span> &rarr;
            <span style="color: var(--text-muted);">Quote form auto-selects customer</span>
          </div>
        </div>
      </div>
    </div>

    <footer>
      Screen Print Pro &mdash; Customer Management Breadboard &mdash; 2026-02-10
    </footer>
  </div>

  <script>
    function switchView(id) {
      document.querySelectorAll('.view-tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.view-content').forEach(c => c.classList.remove('active'));
      document.getElementById('view-' + id).classList.add('active');
      event.target.classList.add('active');
    }
  </script>
</body>
</html>
