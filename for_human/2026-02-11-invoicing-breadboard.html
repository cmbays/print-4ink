<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Invoicing Breadboard &mdash; Screen Print Pro</title>
  <style>
    :root {
      --bg-primary: #09090b;
      --bg-elevated: #18181b;
      --bg-surface: #1c1c1f;
      --text-primary: rgba(255,255,255,0.87);
      --text-secondary: rgba(255,255,255,0.60);
      --text-muted: rgba(255,255,255,0.38);
      --action: #22d3ee;
      --success: #34d399;
      --error: #f87171;
      --warning: #fbbf24;
      --border: rgba(255,255,255,0.08);
      --font-ui: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      --font-mono: 'JetBrains Mono', 'Fira Code', monospace;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: var(--bg-primary);
      color: var(--text-primary);
      font-family: var(--font-ui);
      line-height: 1.6;
      padding: 48px 24px;
    }

    .container { max-width: 720px; margin: 0 auto; }

    .top-nav { margin-bottom: 24px; }

    .back-btn {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      color: var(--text-muted);
      font-size: 13px;
      font-weight: 500;
      text-decoration: none;
      padding: 6px 12px;
      border-radius: 6px;
      border: 1px solid var(--border);
      transition: all 0.15s ease;
    }

    .back-btn:hover {
      color: var(--action);
      border-color: rgba(34, 211, 238, 0.3);
      text-decoration: none;
    }

    header { margin-bottom: 32px; }

    .tag-row {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-bottom: 16px;
    }

    .tag {
      display: inline-block;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      padding: 4px 10px;
      border-radius: 4px;
    }

    .tag-plan     { background: rgba(34, 211, 238, 0.12); color: var(--action); }
    .tag-research { background: rgba(167, 139, 250, 0.12); color: #a78bfa; }

    h1 {
      font-size: 28px;
      font-weight: 700;
      letter-spacing: -0.02em;
      margin-bottom: 8px;
    }

    .subtitle {
      color: var(--text-secondary);
      font-size: 15px;
      margin-bottom: 20px;
    }

    .meta-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1px;
      background: var(--border);
      border: 1px solid var(--border);
      border-radius: 8px;
      overflow: hidden;
      margin-bottom: 12px;
    }

    .meta-item {
      background: var(--bg-elevated);
      padding: 12px 16px;
    }

    .meta-label {
      display: block;
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-muted);
      margin-bottom: 4px;
    }

    .meta-value {
      font-size: 13px;
      color: var(--text-primary);
    }

    .session-resume {
      background: var(--bg-elevated);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 12px 16px;
      margin-bottom: 16px;
    }

    .session-resume code {
      font-family: var(--font-mono);
      font-size: 12px;
      color: var(--action);
      user-select: all;
      cursor: pointer;
    }

    .related-nav { margin-bottom: 32px; }

    .related-label {
      display: block;
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-muted);
      margin-bottom: 8px;
    }

    .related-links {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .related-link {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 13px;
      color: var(--text-secondary);
      text-decoration: none;
      padding: 8px 14px;
      border-radius: 6px;
      border: 1px solid var(--border);
      background: var(--bg-elevated);
      transition: all 0.15s ease;
    }

    .related-link:hover {
      color: var(--action);
      border-color: rgba(34, 211, 238, 0.3);
      text-decoration: none;
    }

    .related-link .related-desc {
      color: var(--text-muted);
      font-size: 11px;
    }

    .header-divider {
      border: none;
      border-top: 1px solid var(--border);
      margin: 0 0 32px 0;
    }

    h2 {
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-muted);
      margin-top: 40px;
      margin-bottom: 16px;
    }

    h3 {
      font-size: 16px;
      font-weight: 600;
      margin-top: 24px;
      margin-bottom: 8px;
    }

    p {
      color: var(--text-secondary);
      font-size: 14px;
      margin-bottom: 12px;
    }

    a { color: var(--action); text-decoration: none; }
    a:hover { text-decoration: underline; }

    .card {
      background: var(--bg-elevated);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 12px;
    }

    .card-title {
      font-size: 15px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 6px;
    }

    .card-desc {
      font-size: 13px;
      color: var(--text-secondary);
    }

    .card-label {
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-muted);
      margin-bottom: 8px;
    }

    ul, ol { padding-left: 20px; margin-bottom: 16px; }
    li { font-size: 14px; color: var(--text-secondary); margin-bottom: 6px; }
    li strong { color: var(--text-primary); }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 16px;
      font-size: 13px;
    }

    th {
      text-align: left;
      font-weight: 600;
      color: var(--text-muted);
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      padding: 8px 12px;
      border-bottom: 1px solid var(--border);
    }

    td {
      padding: 10px 12px;
      border-bottom: 1px solid var(--border);
      color: var(--text-secondary);
    }

    td:first-child { color: var(--text-primary); }

    code {
      font-family: var(--font-mono);
      font-size: 12px;
      background: var(--bg-surface);
      padding: 2px 6px;
      border-radius: 4px;
      color: var(--action);
    }

    .code-block {
      font-family: var(--font-mono);
      font-size: 12px;
      background: var(--bg-surface);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 12px 16px;
      margin-top: 8px;
      color: var(--text-primary);
      user-select: all;
      cursor: pointer;
    }

    hr {
      border: none;
      border-top: 1px solid var(--border);
      margin: 32px 0;
    }

    .count-badge {
      display: inline-block;
      font-size: 12px;
      font-weight: 600;
      background: rgba(34, 211, 238, 0.1);
      color: var(--action);
      padding: 2px 8px;
      border-radius: 4px;
    }

    .stat-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-bottom: 24px;
    }

    .stat {
      background: var(--bg-elevated);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 16px;
      text-align: center;
    }

    .stat-value {
      font-size: 24px;
      font-weight: 700;
      color: var(--action);
    }

    .stat-label {
      font-size: 11px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-top: 4px;
    }

    .place-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-bottom: 24px;
    }

    .place-card {
      background: var(--bg-elevated);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 16px;
    }

    .place-id {
      font-family: var(--font-mono);
      font-size: 11px;
      color: var(--action);
      margin-bottom: 4px;
    }

    .place-name {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 2px;
    }

    .place-type {
      font-size: 12px;
      color: var(--text-muted);
    }

    .place-route {
      font-family: var(--font-mono);
      font-size: 11px;
      color: var(--text-secondary);
      margin-top: 4px;
    }

    .build-step {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 12px 0;
      border-bottom: 1px solid var(--border);
    }

    .build-step:last-child { border-bottom: none; }

    .step-num {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 28px;
      height: 28px;
      min-width: 28px;
      border-radius: 6px;
      background: rgba(34, 211, 238, 0.1);
      color: var(--action);
      font-size: 13px;
      font-weight: 700;
    }

    .step-content { flex: 1; }

    .step-title {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 2px;
    }

    .step-deps {
      font-size: 12px;
      color: var(--text-muted);
    }

    .complexity-low { color: var(--success); }
    .complexity-med { color: var(--warning); }
    .complexity-high { color: var(--error); }

    .source-link {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 13px;
      color: var(--action);
      text-decoration: none;
      padding: 10px 16px;
      border-radius: 8px;
      border: 1px solid rgba(34, 211, 238, 0.3);
      background: rgba(34, 211, 238, 0.05);
      margin-bottom: 24px;
      transition: all 0.15s ease;
    }

    .source-link:hover {
      background: rgba(34, 211, 238, 0.12);
      text-decoration: none;
    }

    footer {
      margin-top: 48px;
      padding-top: 24px;
      border-top: 1px solid var(--border);
      font-size: 12px;
      color: var(--text-muted);
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="container">

    <!-- ========== TOP NAV ========== -->
    <nav class="top-nav">
      <a class="back-btn" href="index.html">&larr; Back to Index</a>
    </nav>

    <!-- ========== HEADER ========== -->
    <header>
      <div class="tag-row">
        <span class="tag tag-plan">Plan</span>
        <span class="tag tag-research">Research</span>
      </div>

      <h1>Invoicing Breadboard</h1>
      <p class="subtitle">UI affordances, code affordances, wiring, and component boundaries for the invoicing vertical &mdash; the buildable blueprint before code.</p>

      <div class="meta-grid">
        <div class="meta-item">
          <span class="meta-label">Date</span>
          <span class="meta-value">2026-02-11</span>
        </div>
        <div class="meta-item">
          <span class="meta-label">Branch</span>
          <span class="meta-value"><code>session/0211-invoicing-breadboard</code></span>
        </div>
        <div class="meta-item">
          <span class="meta-label">Phase</span>
          <span class="meta-value">Phase 1 (Mock Data)</span>
        </div>
        <div class="meta-item">
          <span class="meta-label">Vertical</span>
          <span class="meta-value">Invoicing</span>
        </div>
      </div>

      <div class="session-resume">
        <span class="meta-label">Resume Session</span>
        <code>claude --resume ba5ae290-306e-47a6-b09b-c2c10320dad0</code>
      </div>
    </header>

    <!-- ========== RELATED SESSIONS ========== -->
    <nav class="related-nav">
      <span class="related-label">Related Sessions</span>
      <div class="related-links">
        <a class="related-link" href="2026-02-10-invoicing-vertical-research.html">
          &larr; Invoicing Research <span class="related-desc">&mdash; Industry analysis, competitor deep-dive, 19 decisions</span>
        </a>
      </div>
    </nav>

    <hr class="header-divider">

    <!-- ========== BODY CONTENT ========== -->

    <h2>Source Document</h2>
    <a class="source-link" href="https://github.com/cmbays/print-4ink/blob/session/0211-invoicing-breadboard/docs/breadboards/invoicing-breadboard.md">
      docs/breadboards/invoicing-breadboard.md &rarr;
    </a>

    <h2>At a Glance</h2>

    <div class="stat-grid">
      <div class="stat">
        <div class="stat-value">9</div>
        <div class="stat-label">Places</div>
      </div>
      <div class="stat">
        <div class="stat-value">99</div>
        <div class="stat-label">UI Affordances</div>
      </div>
      <div class="stat">
        <div class="stat-value">44</div>
        <div class="stat-label">Code Affordances</div>
      </div>
      <div class="stat">
        <div class="stat-value">25</div>
        <div class="stat-label">Data Stores</div>
      </div>
    </div>

    <div class="stat-grid">
      <div class="stat">
        <div class="stat-value">18</div>
        <div class="stat-label">Components</div>
      </div>
      <div class="stat">
        <div class="stat-value">13</div>
        <div class="stat-label">Build Steps</div>
      </div>
    </div>

    <h2>Places (Screens & Modals)</h2>

    <div class="place-grid">
      <div class="place-card">
        <div class="place-id">P1</div>
        <div class="place-name">Invoices List</div>
        <div class="place-type">Page</div>
        <div class="place-route">/invoices</div>
      </div>
      <div class="place-card">
        <div class="place-id">P2</div>
        <div class="place-name">Invoice Detail</div>
        <div class="place-type">Page</div>
        <div class="place-route">/invoices/[id]</div>
      </div>
      <div class="place-card">
        <div class="place-id">P2.1</div>
        <div class="place-name">Record Payment</div>
        <div class="place-type">Sheet</div>
        <div class="place-route">&mdash;</div>
      </div>
      <div class="place-card">
        <div class="place-id">P2.2</div>
        <div class="place-name">Send Reminder</div>
        <div class="place-type">Modal</div>
        <div class="place-route">&mdash;</div>
      </div>
      <div class="place-card">
        <div class="place-id">P2.3</div>
        <div class="place-name">Void Invoice</div>
        <div class="place-type">Dialog</div>
        <div class="place-route">&mdash;</div>
      </div>
      <div class="place-card">
        <div class="place-id">P2.4</div>
        <div class="place-name">Credit Memo</div>
        <div class="place-type">Modal</div>
        <div class="place-route">&mdash;</div>
      </div>
      <div class="place-card">
        <div class="place-id">P3</div>
        <div class="place-name">New Invoice Form</div>
        <div class="place-type">Page</div>
        <div class="place-route">/invoices/new</div>
      </div>
      <div class="place-card">
        <div class="place-id">P3.1</div>
        <div class="place-name">Review &amp; Send</div>
        <div class="place-type">Sheet</div>
        <div class="place-route">&mdash;</div>
      </div>
      <div class="place-card">
        <div class="place-id">P4</div>
        <div class="place-name">Edit Invoice</div>
        <div class="place-type">Page (Draft only)</div>
        <div class="place-route">/invoices/[id]/edit</div>
      </div>
    </div>

    <h2>Key Design Decisions</h2>

    <div class="card">
      <div class="card-title">Single Invoice + Partial Payments</div>
      <div class="card-desc">One invoice for the full amount. Deposits recorded as partial payments. Balance due updates automatically. Simpler than two-invoice approach.</div>
    </div>
    <div class="card">
      <div class="card-title">Smart Deposit Defaults</div>
      <div class="card-desc">Deposit amount pre-calculated from customer tier (standard=50%, contract=per agreement). Manual override with % or flat $ toggle.</div>
    </div>
    <div class="card">
      <div class="card-title">Quote-to-Invoice Conversion</div>
      <div class="card-desc">One-click from accepted quote. Prices locked from quote (never recalculated). Change tracking shows what diverged. Tax recalculated from customer exempt status.</div>
    </div>
    <div class="card">
      <div class="card-title">Configurable Itemization</div>
      <div class="card-desc">Toggle between itemized view (every component as separate line) and bundled view (one line per garment style) per invoice.</div>
    </div>
    <div class="card">
      <div class="card-title">Status Lifecycle</div>
      <div class="card-desc"><code>draft &rarr; sent &rarr; partial &rarr; paid</code> with computed <code>overdue</code> (past due + unpaid). Void from any non-paid state. Credit memos for paid invoices.</div>
    </div>

    <h2>Component Reuse from Quoting</h2>

    <table>
      <thead>
        <tr>
          <th>Component</th>
          <th>Source</th>
          <th>Reuse Strategy</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>StatusBadge</td>
          <td><code>components/features/</code></td>
          <td>Extend for invoice statuses</td>
        </tr>
        <tr>
          <td>CustomerCombobox</td>
          <td><code>components/features/</code></td>
          <td>Reuse as-is</td>
        </tr>
        <tr>
          <td>CollapsibleSection</td>
          <td><code>quotes/_components/</code></td>
          <td>Reuse for form sections</td>
        </tr>
        <tr>
          <td>PricingSummary</td>
          <td><code>quotes/_components/</code></td>
          <td>Pattern reference (new impl)</td>
        </tr>
        <tr>
          <td>EmailPreviewModal</td>
          <td><code>quotes/_components/</code></td>
          <td>Pattern reference for reminders</td>
        </tr>
      </tbody>
    </table>

    <h2>New Components</h2>

    <table>
      <thead>
        <tr>
          <th>Component</th>
          <th>Purpose</th>
        </tr>
      </thead>
      <tbody>
        <tr><td>InvoiceStatsBar</td><td>4 KPI cards: Outstanding, Overdue, Paid This Month, Avg Days to Pay</td></tr>
        <tr><td>InvoicesDataTable</td><td>Filterable table with smart view tabs and batch operations</td></tr>
        <tr><td>InvoiceForm</td><td>Create/edit form shared between new + edit pages</td></tr>
        <tr><td>PaymentLedger</td><td>Table of payments with running balance</td></tr>
        <tr><td>RecordPaymentSheet</td><td>Slide-out form for recording payments</td></tr>
        <tr><td>DepositSection</td><td>Smart deposit with % / flat toggle</td></tr>
        <tr><td>ChangeDiffPanel</td><td>Quote vs invoice change tracking</td></tr>
        <tr><td>ReminderTimeline</td><td>Timeline of sent/scheduled payment reminders</td></tr>
        <tr><td>CreateCreditMemoModal</td><td>Formal CM document creation</td></tr>
        <tr><td>OverdueBadge</td><td>Shared badge with days count + pulse animation</td></tr>
      </tbody>
    </table>

    <h2>Build Order</h2>

    <div class="card" style="padding: 16px 20px;">
      <div class="build-step">
        <div class="step-num">1</div>
        <div class="step-content">
          <div class="step-title">Schema creation <span class="complexity-med">(Medium)</span></div>
          <div class="step-deps">invoice.ts, credit-memo.ts, payment method enum</div>
        </div>
      </div>
      <div class="build-step">
        <div class="step-num">2</div>
        <div class="step-content">
          <div class="step-title">Constants update <span class="complexity-low">(Low)</span></div>
          <div class="step-deps">Status labels/colors, payment methods, CM reasons</div>
        </div>
      </div>
      <div class="build-step">
        <div class="step-num">3</div>
        <div class="step-content">
          <div class="step-title">Mock data <span class="complexity-med">(Medium)</span></div>
          <div class="step-deps">6-8 invoices, 10+ payments, 1-2 credit memos</div>
        </div>
      </div>
      <div class="build-step">
        <div class="step-num">4</div>
        <div class="step-content">
          <div class="step-title">Shared components <span class="complexity-low">(Low)</span></div>
          <div class="step-deps">StatusBadge extension + OverdueBadge (parallel)</div>
        </div>
      </div>
      <div class="build-step">
        <div class="step-num">5</div>
        <div class="step-content">
          <div class="step-title">Invoices List page <span class="complexity-med">(Medium)</span></div>
          <div class="step-deps">StatsBar + DataTable + smart view tabs + batch ops</div>
        </div>
      </div>
      <div class="build-step">
        <div class="step-num">6</div>
        <div class="step-content">
          <div class="step-title">InvoiceForm + line items + pricing <span class="complexity-high">(High)</span></div>
          <div class="step-deps">Critical path &mdash; highest complexity, shared between new + edit</div>
        </div>
      </div>
      <div class="build-step">
        <div class="step-num">7</div>
        <div class="step-content">
          <div class="step-title">Invoice Detail + actions + payment ledger <span class="complexity-high">(High)</span></div>
          <div class="step-deps">Detail view, context-aware actions, reminders, change diff</div>
        </div>
      </div>
      <div class="build-step">
        <div class="step-num">8</div>
        <div class="step-content">
          <div class="step-title">New Invoice page + Review Sheet <span class="complexity-med">(Medium)</span></div>
          <div class="step-deps">Quote-to-invoice populate logic is key</div>
        </div>
      </div>
      <div class="build-step">
        <div class="step-num">9</div>
        <div class="step-content">
          <div class="step-title">Detail modals/sheets <span class="complexity-med">(Medium)</span></div>
          <div class="step-deps">RecordPayment, SendReminder, Void, CreditMemo</div>
        </div>
      </div>
      <div class="build-step">
        <div class="step-num">10</div>
        <div class="step-content">
          <div class="step-title">Edit Invoice page <span class="complexity-low">(Low)</span></div>
          <div class="step-deps">Reuses InvoiceForm, draft only</div>
        </div>
      </div>
      <div class="build-step">
        <div class="step-num">11</div>
        <div class="step-content">
          <div class="step-title">Customer Detail integration <span class="complexity-med">(Medium)</span></div>
          <div class="step-deps">Invoices tab + financial summary on customer page</div>
        </div>
      </div>
      <div class="build-step">
        <div class="step-num">12</div>
        <div class="step-content">
          <div class="step-title">Sidebar nav link <span class="complexity-low">(Low)</span></div>
          <div class="step-deps">Add "Invoices" between Quotes and Customers</div>
        </div>
      </div>
      <div class="build-step">
        <div class="step-num">13</div>
        <div class="step-content">
          <div class="step-title">Quote Detail wiring <span class="complexity-low">(Low)</span></div>
          <div class="step-deps">"Create Invoice" button on accepted quotes</div>
        </div>
      </div>
    </div>

    <p style="margin-top: 16px;"><strong>Critical path:</strong> 1 &rarr; 2 &rarr; 3 &rarr; 6 &rarr; 8 (InvoiceForm with quote-to-invoice conversion)</p>

    <h2>Deferred to Phase 2</h2>

    <table>
      <thead>
        <tr>
          <th>Feature</th>
          <th>Why Deferred</th>
        </tr>
      </thead>
      <tbody>
        <tr><td>PDF generation</td><td>Requires library (react-pdf), not critical for mock</td></tr>
        <tr><td>Real email sending</td><td>Requires backend + SMTP</td></tr>
        <tr><td>QuickBooks sync</td><td>Requires OAuth + QBO API</td></tr>
        <tr><td>Square payment gateway</td><td>Requires Square SDK</td></tr>
        <tr><td>Late fee auto-calculation</td><td>Schema supports, UI deferred</td></tr>
        <tr><td>Read receipts</td><td>Requires customer portal</td></tr>
        <tr><td>Customer portal</td><td>Separate vertical per decision #7</td></tr>
        <tr><td>Recurring invoices</td><td>Contract customer feature, Phase 2</td></tr>
      </tbody>
    </table>

    <h2>Input Documents</h2>

    <ul>
      <li><a href="2026-02-10-invoicing-vertical-research.html">Invoicing Vertical Research</a> &mdash; Industry analysis, competitor deep-dive, 19 key decisions</li>
      <li><code>docs/spikes/invoicing-decisions.md</code> &mdash; Decision record</li>
      <li><code>docs/spikes/invoicing-ux-patterns.md</code> &mdash; Screen designs and component reuse</li>
      <li><code>docs/spikes/invoicing-integration-map.md</code> &mdash; Schema dependencies and data flow</li>
      <li><code>docs/spikes/invoicing-compliance.md</code> &mdash; Tax, legal, audit requirements</li>
      <li><code>docs/breadboards/quoting-breadboard.md</code> &mdash; Upstream quoting vertical</li>
    </ul>

    <footer>
      Screen Print Pro &mdash; Invoicing Breadboard &mdash; 2026-02-11
    </footer>
  </div>
</body>
</html>
