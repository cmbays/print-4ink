<!DOCTYPE html>
<html lang="en" class="dark"
  data-doc-id="2026-02-08-vercel-setup"
  data-title="Vercel Setup with Access Code Protection"
  data-subtitle="4Ink demo deployment infrastructure"
  data-date="2026-02-08"
  data-phase="1"
  data-vertical="meta"
  data-vertical-secondary=""
  data-stage="build"
  data-tags="build"
  data-session-id="09b70260-83ac-4830-9b02-ed8c0683f699"
  data-branch="feat/vercel-setup"
  data-pr=""
  data-status="complete"
>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vercel Setup with Access Code Protection</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Inter', sans-serif;
            background: #09090b;
            color: rgba(255, 255, 255, 0.87);
            line-height: 1.6;
            padding: 2rem;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .back-link {
            display: inline-block;
            margin-bottom: 2rem;
            color: #22d3ee;
            text-decoration: none;
            font-size: 0.875rem;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 2rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .header-content h1 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .header-content p {
            color: rgba(255, 255, 255, 0.6);
            font-size: 1rem;
        }

        .tags {
            display: flex;
            gap: 0.5rem;
        }

        .tag {
            display: inline-block;
            padding: 0.375rem 0.75rem;
            border-radius: 0.375rem;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .tag-build {
            background: rgba(52, 211, 153, 0.2);
            color: #34d399;
        }

        .meta-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
            padding: 1.5rem;
            background: #18181b;
            border-radius: 0.5rem;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .meta-item {
            display: flex;
            flex-direction: column;
        }

        .meta-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            color: rgba(255, 255, 255, 0.38);
            margin-bottom: 0.5rem;
            letter-spacing: 0.5px;
        }

        .meta-value {
            font-size: 0.95rem;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.87);
            font-family: 'JetBrains Mono', monospace;
        }

        .code-block {
            background: #0f0f11;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 0.5rem;
            padding: 1rem;
            margin: 1rem 0;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.875rem;
            overflow-x: auto;
            color: #22d3ee;
        }

        .resume-command {
            background: #18181b;
            border-left: 3px solid #22d3ee;
            padding: 1rem;
            margin: 1.5rem 0;
            border-radius: 0.375rem;
        }

        .resume-command code {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.875rem;
            color: #22d3ee;
        }

        .section {
            margin: 2rem 0;
        }

        .section h2 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: rgba(255, 255, 255, 0.87);
            padding-bottom: 0.5rem;
            border-bottom: 1px solid rgba(34, 211, 238, 0.2);
        }

        .section h3 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            color: #22d3ee;
        }

        .content-text {
            color: rgba(255, 255, 255, 0.87);
            margin-bottom: 1rem;
        }

        ul, ol {
            margin-left: 1.5rem;
            margin-bottom: 1rem;
        }

        li {
            margin-bottom: 0.5rem;
            color: rgba(255, 255, 255, 0.87);
        }

        .highlight {
            background: rgba(34, 211, 238, 0.1);
            color: #22d3ee;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9em;
        }

        .checkmark {
            color: #34d399;
            margin-right: 0.5rem;
        }

        .divider {
            height: 1px;
            background: rgba(255, 255, 255, 0.1);
            margin: 2rem 0;
        }

        .artifact-links {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            margin: 1rem 0;
        }

        .artifact-link {
            display: inline-flex;
            align-items: center;
            padding: 0.75rem;
            background: #18181b;
            border: 1px solid rgba(34, 211, 238, 0.3);
            border-radius: 0.375rem;
            color: #22d3ee;
            text-decoration: none;
            font-size: 0.9rem;
        }

        .artifact-link:hover {
            background: #1c1c1f;
            border-color: #22d3ee;
        }

        .stage-tag {
            display: inline-block;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            padding: 2px 8px;
            border-radius: 4px;
            background: rgba(34, 211, 238, 0.1);
            color: #22d3ee;
        }

        .next-steps {
            background: rgba(34, 211, 238, 0.05);
            border-left: 3px solid #22d3ee;
            padding: 1.5rem;
            border-radius: 0.375rem;
            margin: 1.5rem 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">← Back to Index</a>

        <div class="header">
            <div class="header-content">
                <h1>Vercel Setup with Access Code Protection</h1>
                <p>4Ink demo deployment infrastructure</p>
            </div>
            <div class="tags">
                <span class="tag tag-build">Build</span>
            </div>
        </div>

        <div class="meta-grid">
            <div class="meta-item">
                <span class="meta-label">Date</span>
                <span class="meta-value">2026-02-08</span>
            </div>
            <div class="meta-item">
                <span class="meta-label">Branch</span>
                <span class="meta-value">feat/vercel-setup</span>
            </div>
            <div class="meta-item">
                <span class="meta-label">Phase</span>
                <span class="meta-value">Phase 1 — Mockup</span>
            </div>
            <div class="meta-item">
                <span class="meta-label">Vertical</span>
                <span class="meta-value">Infrastructure</span>
            </div>
            <div class="meta-item">
                <span class="meta-label">Stage</span>
                <span class="meta-value"><span class="stage-tag">Build</span></span>
            </div>
            <div class="meta-item">
                <span class="meta-label">Status</span>
                <span class="meta-value">Complete</span>
            </div>
        </div>

        <div class="resume-command">
            <strong>Resume this session:</strong>
            <br><code>claude --resume 09b70260-83ac-4830-9b02-ed8c0683f699</code>
        </div>

        <div class="section">
            <h2>Overview</h2>
            <p class="content-text">Set up Vercel deployment for Screen Print Pro with password protection using an access code stored securely in Vercel's environment variables. This allows secure demo access to 4Ink without exposing the app publicly.</p>
            <p class="content-text"><strong>⚠️ Security Note:</strong> The actual access code is stored in the <span class="highlight">DEMO_ACCESS_CODE</span> environment variable in Vercel. Never commit the code to git. To view it:</p>
            <div class="code-block">vercel env list</div>
        </div>

        <div class="section">
            <h2>What Was Built</h2>

            <h3><span class="checkmark">✓</span>Vercel Project Linked</h3>
            <ul>
                <li>Linked GitHub repository to Vercel hobby account</li>
                <li>Project auto-configured for Next.js 16.1.6</li>
                <li>Auto-detected production settings</li>
            </ul>

            <h3><span class="checkmark">✓</span>Access Code Protection System</h3>
            <ul>
                <li><strong>Middleware</strong> (<span class="highlight">middleware.ts</span>) — Protects all routes except login pages</li>
                <li><strong>Login Page</strong> (<span class="highlight">/demo-login</span>) — Clean, branded interface for access code entry</li>
                <li><strong>API Route</strong> (<span class="highlight">/api/demo-login</span>) — Validates code and sets secure httpOnly cookie</li>
                <li><strong>Environment Variable</strong> — <span class="highlight">DEMO_ACCESS_CODE</span> encrypted in Vercel (default: <REDACTED_ACCESS_CODE>)</li>
            </ul>

            <h3>Security Details</h3>
            <ul>
                <li>Cookie is <span class="highlight">httpOnly</span> (cannot be accessed via JavaScript)</li>
                <li>Cookie is <span class="highlight">secure</span> (only sent over HTTPS in production)</li>
                <li>Cookie is <span class="highlight">sameSite=lax</span> (CSRF protection)</li>
                <li>Cookie expires in 30 days</li>
                <li>Access code stored as encrypted environment variable</li>
                <li>Protection only active in production (dev mode bypassed for testing)</li>
            </ul>
        </div>

        <div class="section">
            <h2>How It Works</h2>
            <ol>
                <li>User visits deployed app (e.g., <span class="highlight">print-4ink.vercel.app</span>)</li>
                <li>Middleware checks for <span class="highlight">demo-access</span> cookie</li>
                <li>If missing, redirect to <span class="highlight">/demo-login</span></li>
                <li>User enters code: <span class="highlight"><REDACTED_ACCESS_CODE></span></li>
                <li>API validates against environment variable</li>
                <li>If valid, cookie is set and user redirected to dashboard</li>
                <li>Cookie persists for 30 days or until browser cleared</li>
            </ol>
        </div>

        <div class="section">
            <h2>Files Changed</h2>
            <div class="artifact-links">
                <a href="https://github.com/cmbays/print-4ink/blob/feat/vercel-setup/middleware.ts" class="artifact-link">
                    → middleware.ts (created)
                </a>
                <a href="https://github.com/cmbays/print-4ink/blob/feat/vercel-setup/app/demo-login/page.tsx" class="artifact-link">
                    → app/demo-login/page.tsx (created)
                </a>
                <a href="https://github.com/cmbays/print-4ink/blob/feat/vercel-setup/app/api/demo-login/route.ts" class="artifact-link">
                    → app/api/demo-login/route.ts (created)
                </a>
                <a href="https://github.com/cmbays/print-4ink/compare/main...feat/vercel-setup" class="artifact-link">
                    → Full PR diff
                </a>
            </div>
        </div>

        <div class="section">
            <h2>Next Steps</h2>
            <div class="next-steps">
                <h3 style="margin-top: 0; color: #22d3ee;">To Deploy to Production</h3>
                <ol>
                    <li>PR receives CodeRabbit review</li>
                    <li>Merge to main when approved</li>
                    <li>Vercel auto-deploys main branch</li>
                    <li>Get production URL from Vercel dashboard</li>
                    <li>Share URL with 4Ink, access code separately</li>
                </ol>
            </div>

            <h3>To View or Change Access Code</h3>
            <p class="content-text"><strong>View current code:</strong></p>
            <div class="code-block">vercel env list</div>
            <p class="content-text"><strong>Change the code:</strong></p>
            <p class="content-text">Update <span class="highlight">DEMO_ACCESS_CODE</span> in the Vercel dashboard (recommended) or via CLI:</p>
            <div class="code-block">vercel env rm DEMO_ACCESS_CODE && printf "your-new-code" | vercel env add DEMO_ACCESS_CODE production</div>
            <p class="content-text">Then redeploy: <span class="highlight">vercel deploy --prod</span></p>
        </div>

        <div class="divider"></div>

        <div class="section">
            <p class="content-text" style="color: rgba(255, 255, 255, 0.6); font-size: 0.875rem;">
                Session ID: <span class="highlight">09b70260-83ac-4830-9b02-ed8c0683f699</span> |
                Built: 2026-02-08 |
                Phase: 1 — Mockup
            </p>
        </div>
    </div>
</body>
</html>
