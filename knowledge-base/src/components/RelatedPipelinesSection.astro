---
import DocCard from './DocCard.astro';
import EmptyDocsState from './EmptyDocsState.astro';

interface Props {
  pipelines: Array<{
    id: string;
    data: {
      title: string;
      subtitle: string;
      date: Date;
      pipelineName: string;
      pipelineType: string;
      stage: string;
      tags: string[];
      status: string;
    };
  }>;
  emptyMessage: string;
}

const { pipelines, emptyMessage } = Astro.props;
---

{pipelines.length > 0 && (
  <div class="mb-8">
    <h2 class="text-[11px] font-semibold uppercase tracking-widest text-text-muted mb-4">Related Pipeline Sessions</h2>
    <div class="space-y-2.5">
      {pipelines.map((pl) => (
        <DocCard
          title={pl.data.title}
          subtitle={pl.data.subtitle}
          date={pl.data.date}
          pipeline={pl.data.pipelineName}
          pipelineType={pl.data.pipelineType}
          stage={pl.data.stage}
          tags={pl.data.tags}
          status={pl.data.status}
          slug={pl.id}
        />
      ))}
    </div>
  </div>
)}

{pipelines.length === 0 && (
  <div class="mb-8">
    <EmptyDocsState message={emptyMessage} />
  </div>
)}
