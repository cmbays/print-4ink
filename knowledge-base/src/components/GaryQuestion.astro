---
import { pipelineLabel } from '../lib/utils';
import Badge from './Badge.astro';

interface Props {
  questionId: string;
  vertical: string;
  status: 'unanswered' | 'answered';
  questionText: string;
  context: string;
  answer?: string;
  answeredDate?: string;
}

const { questionId, vertical, status, questionText, context, answer, answeredDate } = Astro.props;
---

<div class="bg-bg-elevated border border-border border-l-[3px] border-l-purple rounded-lg p-4 mb-3" data-question-id={questionId}>
  <div class="flex items-center justify-between mb-2">
    <span class="text-[11px] font-semibold uppercase tracking-wide text-purple">{questionId}</span>
    <div class="flex items-center gap-2">
      <span class="text-[11px] font-medium uppercase tracking-wide text-text-muted">{pipelineLabel(vertical)}</span>
      {status === 'answered' ? (
        <Badge colorClass="bg-success/12 text-success">Answered</Badge>
      ) : (
        <Badge colorClass="bg-warning/12 text-warning">Unanswered</Badge>
      )}
    </div>
  </div>

  <p class="text-sm font-semibold text-text-primary mb-1">{questionText}</p>
  <p class="text-[13px] text-text-muted italic">{context}</p>

  {answer && (
    <div class="mt-3 pt-3 border-t border-border">
      <div class="text-[11px] font-semibold uppercase tracking-wide text-text-muted mb-1">
        Answer
        {answeredDate && <span class="ml-2 font-normal normal-case">({answeredDate})</span>}
      </div>
      <p class="text-sm text-text-secondary">{answer}</p>
    </div>
  )}
</div>
