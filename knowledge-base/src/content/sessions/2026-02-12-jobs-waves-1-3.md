---
title: "Jobs Build — Waves 1-3"
subtitle: "Foundation schemas, 5-lane production board with 3 card types, dnd-kit drag-and-drop, scratch notes, block tracking, and capacity summary"
date: 2026-02-12
phase: 1
vertical: jobs
verticalSecondary: [quoting]
stage: build
tags: [feature, build]
branch: "session/0212-jobs-wave4"
pr: "https://github.com/cmbays/print-4ink/pull/58"
status: complete
---

## At a Glance

| Stat | Value |
|------|-------|
| Commit | f334b00 |
| PR | #58 |
| Waves Covered | 1, 2, 3 |
| New Files | ~24 |

Three waves delivered in sequence: foundation data layer, static board layout, and interactive drag-and-drop.

## Wave 1 — Foundation

Schema rewrites and data layer for the entire Jobs vertical.

- **job.ts** rewrite -- 5-lane enum (`ready`, `in_progress`, `review`, `blocked`, `done`), risk levels, canonical task templates per service type
- **scratch-note.ts** -- New schema for quick-capture notes on the board
- **board-card.ts** -- Discriminated union: `JobCard | QuoteCard | ScratchNoteCard` with per-type fields
- **constants.ts** -- Lane labels, lane colors, risk labels, service type labels, canonical task definitions
- **mock-data.ts** -- Realistic sample data: 6 jobs, 4 quotes, 3 scratch notes across all lanes
- **job-utils.ts** -- Pure functions: `computeCapacitySummary`, `computeRiskLevel`, `computeTaskProgress`, `computeFilteredCards`
- Tests: job.test.ts rewritten, board-card.test.ts new

## Wave 2 — Board Core

Static production board with all card types and filtering.

- **2-section layout**: Quotes row (scratch notes + quote cards) and Jobs row (job cards), each spanning 5 lanes
- **3 card types**: `JobBoardCard` (service badge, risk indicator, task progress, due date), `QuoteBoardCard` (status badge, quantity, customer), `ScratchNoteCard` (inline edit, relative time, archive)
- **CapacitySummaryBar**: Rush count, total pieces, cards-by-lane breakdown
- **BoardFilterBar**: Today toggle, service type, risk level, horizon (due date range), combined/split layout toggle
- **Shared components**: `ServiceTypeBadge`, `RiskIndicator`, `LaneBadge`, `TaskProgressBar`

## Wave 3 — Board DnD

Interactive drag-and-drop with dnd-kit.

- **DndContext** with `PointerSensor` (8px activation distance) and collision detection
- **DraggableCard** wrapper with spring animations (`cubic-bezier(0.34, 1.56, 0.64, 1)`)
- **DragOverlay** with rotated ghost card during drag
- **Lane-to-lane moves** update card state, with blocked lane triggering block reason input
- **BlockReasonDialog** captures why a card is blocked (shared between board and detail views)
- **ScratchNoteCapture** inline input in the Quotes > Ready cell
- **Combined/Split layout**: Combined shows all cards in one grid; Split separates quotes and jobs into distinct sections
