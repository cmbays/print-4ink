[["Map",1,2,9,10],"meta::meta",["Map",3,4,5,6,7,8],"astro-version","5.17.2","content-config-digest","9c36cd36a616bcf9","astro-config-digest","{\"root\":{},\"srcDir\":{},\"publicDir\":{},\"outDir\":{},\"cacheDir\":{},\"compressHTML\":true,\"base\":\"/\",\"trailingSlash\":\"ignore\",\"output\":\"static\",\"scopedStyleStrategy\":\"attribute\",\"build\":{\"format\":\"directory\",\"client\":{},\"server\":{},\"assets\":\"_astro\",\"serverEntry\":\"entry.mjs\",\"redirects\":true,\"inlineStylesheets\":\"auto\",\"concurrency\":1},\"server\":{\"open\":false,\"host\":false,\"port\":4321,\"streaming\":true,\"allowedHosts\":[]},\"redirects\":{},\"image\":{\"endpoint\":{\"route\":\"/_image\"},\"service\":{\"entrypoint\":\"astro/assets/services/sharp\",\"config\":{}},\"domains\":[],\"remotePatterns\":[],\"responsiveStyles\":false},\"devToolbar\":{\"enabled\":true},\"markdown\":{\"syntaxHighlight\":{\"type\":\"shiki\",\"excludeLangs\":[\"math\"]},\"shikiConfig\":{\"langs\":[],\"langAlias\":{},\"theme\":\"github-dark\",\"themes\":{},\"wrap\":false,\"transformers\":[]},\"remarkPlugins\":[],\"rehypePlugins\":[],\"remarkRehype\":{},\"gfm\":true,\"smartypants\":true},\"security\":{\"checkOrigin\":true,\"allowedDomains\":[]},\"env\":{\"schema\":{},\"validateSecrets\":false},\"experimental\":{\"clientPrerender\":false,\"contentIntellisense\":false,\"headingIdCompat\":false,\"preserveScriptOrder\":false,\"liveContentCollections\":false,\"csp\":false,\"staticImportMetaEnv\":false,\"chromeDevtoolsWorkspace\":false,\"failOnPrerenderConflict\":false,\"svgo\":false},\"legacy\":{\"collections\":false}}","sessions",["Map",11,12,68,69,121,122,179,180,243,244,296,297,335,336,421,422,486,487,535,536,608,609,652,653,696,697,748,749,857,858,899,900,965,966,1063,1064,1255,1256,1317,1318,1361,1362,1443,1444,1512,1513],"2026-02-07-shaping-skills",{"id":11,"data":13,"body":26,"filePath":27,"digest":28,"rendered":29},{"title":14,"subtitle":15,"date":16,"phase":17,"vertical":18,"verticalSecondary":19,"stage":20,"tags":21,"sessionId":23,"branch":24,"status":25},"Shaping Skills Evaluation","Evaluated Ryan Singer's shaping-skills methodology and extracted three high-value patterns for Screen Print Pro's build process.",["Date","2026-02-07T00:00:00.000Z"],1,"meta",[],"research",[22,20],"decision","b8b97fce-ca40-4f39-972f-420469febfc5","main","complete","## Context\n\nRyan Singer (author of Basecamp's \"Shape Up\") published a [shaping-skills repo](https://github.com/rjs/shaping-skills) with two Claude Code skills: **Shaping** (~800 lines, collaborative problem/solution framing) and **Breadboarding** (~1600 lines, UI + code affordance mapping). The question: adopt as-is, ignore, or extract selectively?\n\n## Decision\n\n**Selective extraction.** Don't adopt full framework. Don't ignore. Extract 3 patterns that fill genuine gaps.\n\n### Extracted\n\n- **Spikes** -- structured investigation of technical unknowns before building\n- **Affordance decomposition** -- UI elements + code mechanisms + wiring table\n- **Pre-build interview** -- 3-5 clarifying questions before coding complex screens\n\n### Deferred / Skipped\n\n- Full shaping skill (~800 lines of prompt)\n- Full breadboarding skill (~1600 lines)\n- R x S fit matrices (single solution, no competing shapes)\n- shaping.md files (APP_FLOW is source of truth)\n\n## Why Not Adopt As-Is\n\nScreen Print Pro is past the 0-to-1 phase where shaping provides maximum value. The project already has equivalent coverage:\n\n| Shaping Provides | We Already Have |\n|------------------|-----------------|\n| Frame (Problem/Outcome) | `docs/PRD.md` |\n| Requirements (R0, R1...) | PRD features + APP_FLOW specs |\n| Shape selection (A, B, C) | Single solution -- tech stack locked |\n| Vertical slicing | `IMPLEMENTATION_PLAN.md` |\n\nInstalling the full skills would add ~2400 lines of prompt overhead to every session and create conflicting sources of truth.\n\n## Where Pre-Build Applies\n\nOnly 2 of the 10 remaining steps are complex enough to warrant the ritual:\n\n| Step | Screen | Complexity | Pre-Build? |\n|------|--------|------------|------------|\n| 1 | Shared Components | Low | No |\n| 2 | Jobs List | Low | No |\n| 3 | Job Detail | Medium | No |\n| 4 | Kanban Board | High | Yes |\n| 5 | Quotes List + Detail | Low | No |\n| 6 | New Quote Form | High | Yes |\n| 7-10 | Customers, Screens, Garments, Polish | Low-Med | No |\n\n## Phase 1 Workflow\n\n**Print Life** (competitor software) is our starting point. The workflow for Phase 1:\n\n1. User provides Print Life screenshots for reference\n2. Discuss user journey and friction points the customer experiences daily\n3. Identify opportunities: time savings, capability gaps, nice-to-haves Print Life does poorly\n4. Design an improved flow that's 10x better\n5. Build the mockup with mock data\n\n## Phase 2 Note\n\nWhen the project moves to Phase 2+ (real backend, API integration, database), the full shaping-skills methodology becomes valuable. Specifically:\n\n- **Shaping skill** -- for framing new features from real user feedback\n- **Breadboarding skill** -- for mapping UI-to-API-to-database wiring\n\nAt that point, revisit importing from [rjs/shaping-skills](https://github.com/rjs/shaping-skills) or building a custom version.\n\n## Artifacts\n\n| File | Change |\n|------|--------|\n| `CLAUDE.md` | Added \"Pre-Build Ritual (Complex Steps Only)\" section |\n| `docs/IMPLEMENTATION_PLAN.md` | Added pre-build tasks to Steps 4 and 6 |\n| `docs/spikes/` | Created directory for spike investigation documents |\n| `progress.txt` | Logged methodology evaluation decision |","src/content/sessions/2026-02-07-shaping-skills.md","ea98506d34db14f1",{"html":30,"metadata":31},"\u003Ch2 id=\"context\">Context\u003C/h2>\n\u003Cp>Ryan Singer (author of Basecamp’s “Shape Up”) published a \u003Ca href=\"https://github.com/rjs/shaping-skills\">shaping-skills repo\u003C/a> with two Claude Code skills: \u003Cstrong>Shaping\u003C/strong> (~800 lines, collaborative problem/solution framing) and \u003Cstrong>Breadboarding\u003C/strong> (~1600 lines, UI + code affordance mapping). The question: adopt as-is, ignore, or extract selectively?\u003C/p>\n\u003Ch2 id=\"decision\">Decision\u003C/h2>\n\u003Cp>\u003Cstrong>Selective extraction.\u003C/strong> Don’t adopt full framework. Don’t ignore. Extract 3 patterns that fill genuine gaps.\u003C/p>\n\u003Ch3 id=\"extracted\">Extracted\u003C/h3>\n\u003Cul>\n\u003Cli>\u003Cstrong>Spikes\u003C/strong> — structured investigation of technical unknowns before building\u003C/li>\n\u003Cli>\u003Cstrong>Affordance decomposition\u003C/strong> — UI elements + code mechanisms + wiring table\u003C/li>\n\u003Cli>\u003Cstrong>Pre-build interview\u003C/strong> — 3-5 clarifying questions before coding complex screens\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"deferred--skipped\">Deferred / Skipped\u003C/h3>\n\u003Cul>\n\u003Cli>Full shaping skill (~800 lines of prompt)\u003C/li>\n\u003Cli>Full breadboarding skill (~1600 lines)\u003C/li>\n\u003Cli>R x S fit matrices (single solution, no competing shapes)\u003C/li>\n\u003Cli>shaping.md files (APP_FLOW is source of truth)\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"why-not-adopt-as-is\">Why Not Adopt As-Is\u003C/h2>\n\u003Cp>Screen Print Pro is past the 0-to-1 phase where shaping provides maximum value. The project already has equivalent coverage:\u003C/p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Shaping Provides\u003C/th>\u003Cth>We Already Have\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>Frame (Problem/Outcome)\u003C/td>\u003Ctd>\u003Ccode>docs/PRD.md\u003C/code>\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Requirements (R0, R1…)\u003C/td>\u003Ctd>PRD features + APP_FLOW specs\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Shape selection (A, B, C)\u003C/td>\u003Ctd>Single solution — tech stack locked\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Vertical slicing\u003C/td>\u003Ctd>\u003Ccode>IMPLEMENTATION_PLAN.md\u003C/code>\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Cp>Installing the full skills would add ~2400 lines of prompt overhead to every session and create conflicting sources of truth.\u003C/p>\n\u003Ch2 id=\"where-pre-build-applies\">Where Pre-Build Applies\u003C/h2>\n\u003Cp>Only 2 of the 10 remaining steps are complex enough to warrant the ritual:\u003C/p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Step\u003C/th>\u003Cth>Screen\u003C/th>\u003Cth>Complexity\u003C/th>\u003Cth>Pre-Build?\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>1\u003C/td>\u003Ctd>Shared Components\u003C/td>\u003Ctd>Low\u003C/td>\u003Ctd>No\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>2\u003C/td>\u003Ctd>Jobs List\u003C/td>\u003Ctd>Low\u003C/td>\u003Ctd>No\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>3\u003C/td>\u003Ctd>Job Detail\u003C/td>\u003Ctd>Medium\u003C/td>\u003Ctd>No\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>4\u003C/td>\u003Ctd>Kanban Board\u003C/td>\u003Ctd>High\u003C/td>\u003Ctd>Yes\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>5\u003C/td>\u003Ctd>Quotes List + Detail\u003C/td>\u003Ctd>Low\u003C/td>\u003Ctd>No\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>6\u003C/td>\u003Ctd>New Quote Form\u003C/td>\u003Ctd>High\u003C/td>\u003Ctd>Yes\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>7-10\u003C/td>\u003Ctd>Customers, Screens, Garments, Polish\u003C/td>\u003Ctd>Low-Med\u003C/td>\u003Ctd>No\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"phase-1-workflow\">Phase 1 Workflow\u003C/h2>\n\u003Cp>\u003Cstrong>Print Life\u003C/strong> (competitor software) is our starting point. The workflow for Phase 1:\u003C/p>\n\u003Col>\n\u003Cli>User provides Print Life screenshots for reference\u003C/li>\n\u003Cli>Discuss user journey and friction points the customer experiences daily\u003C/li>\n\u003Cli>Identify opportunities: time savings, capability gaps, nice-to-haves Print Life does poorly\u003C/li>\n\u003Cli>Design an improved flow that’s 10x better\u003C/li>\n\u003Cli>Build the mockup with mock data\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"phase-2-note\">Phase 2 Note\u003C/h2>\n\u003Cp>When the project moves to Phase 2+ (real backend, API integration, database), the full shaping-skills methodology becomes valuable. Specifically:\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Shaping skill\u003C/strong> — for framing new features from real user feedback\u003C/li>\n\u003Cli>\u003Cstrong>Breadboarding skill\u003C/strong> — for mapping UI-to-API-to-database wiring\u003C/li>\n\u003C/ul>\n\u003Cp>At that point, revisit importing from \u003Ca href=\"https://github.com/rjs/shaping-skills\">rjs/shaping-skills\u003C/a> or building a custom version.\u003C/p>\n\u003Ch2 id=\"artifacts\">Artifacts\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>File\u003C/th>\u003Cth>Change\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>\u003Ccode>CLAUDE.md\u003C/code>\u003C/td>\u003Ctd>Added “Pre-Build Ritual (Complex Steps Only)” section\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>docs/IMPLEMENTATION_PLAN.md\u003C/code>\u003C/td>\u003Ctd>Added pre-build tasks to Steps 4 and 6\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>docs/spikes/\u003C/code>\u003C/td>\u003Ctd>Created directory for spike investigation documents\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>progress.txt\u003C/code>\u003C/td>\u003Ctd>Logged methodology evaluation decision\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>",{"headings":32,"localImagePaths":61,"remoteImagePaths":62,"frontmatter":63,"imagePaths":67},[33,37,39,43,46,49,52,55,58],{"depth":34,"slug":35,"text":36},2,"context","Context",{"depth":34,"slug":22,"text":38},"Decision",{"depth":40,"slug":41,"text":42},3,"extracted","Extracted",{"depth":40,"slug":44,"text":45},"deferred--skipped","Deferred / Skipped",{"depth":34,"slug":47,"text":48},"why-not-adopt-as-is","Why Not Adopt As-Is",{"depth":34,"slug":50,"text":51},"where-pre-build-applies","Where Pre-Build Applies",{"depth":34,"slug":53,"text":54},"phase-1-workflow","Phase 1 Workflow",{"depth":34,"slug":56,"text":57},"phase-2-note","Phase 2 Note",{"depth":34,"slug":59,"text":60},"artifacts","Artifacts",[],[],{"title":14,"subtitle":15,"date":64,"phase":17,"vertical":18,"verticalSecondary":65,"stage":20,"tags":66,"sessionId":23,"branch":24,"status":25},["Date","2026-02-07T00:00:00.000Z"],[],[22,20],[],"2026-02-08-agent-architecture",{"id":68,"data":70,"body":80,"filePath":81,"digest":82,"rendered":83},{"title":71,"subtitle":72,"date":73,"phase":17,"vertical":18,"verticalSecondary":74,"stage":75,"tags":76,"sessionId":78,"branch":79,"status":25},"Agent Architecture","5 specialized agents, 4 new skills, orchestration patterns, and an agent registry. Agents preload skills for domain expertise and chain together for complex workflows.",["Date","2026-02-08T00:00:00.000Z"],[],"build",[77,75],"feature","5799011a-0503-4ea3-b856-2d19cf66b9ac","infra/agent-architecture","## Agents vs Skills\n\n**Agents** (`.claude/agents/`) are specialized AI assistants with their own context windows, system prompts, tool restrictions, and preloaded skills. They run isolated from the main conversation.\n\n**Skills** (`.claude/skills/`) are domain expertise containers with instructions, templates, and references. Agents preload skills at startup for domain knowledge.\n\nThink of agents as specialists hired for specific jobs, and skills as the training manuals they carry.\n\n## Agents Created\n\n5 agents in `.claude/agents/`:\n\n| Agent | Purpose | Skills |\n|-------|---------|--------|\n| frontend-builder | Build screens & components | screen-builder, quality-gate |\n| requirements-interrogator | Question features before building | pre-build-interrogator |\n| design-auditor | Audit screens against design system | design-audit |\n| feature-strategist | Competitive analysis & feature planning | feature-strategy |\n| doc-sync | Keep docs synchronized with code | doc-sync |\n\n### How to Invoke\n\nUse explicit delegation (recommended):\n\n- `Use the frontend-builder agent to build PageHeader`\n- `Have the design-auditor agent review the jobs screen`\n- `Ask requirements-interrogator about the Kanban board workflow`\n- `Use feature-strategist for quote system competitive analysis`\n- `Have doc-sync check APP_FLOW against built screens`\n\n---\n\n## Skills Created\n\n4 new skills in `.claude/skills/`:\n\n| Skill | Files | Purpose |\n|-------|-------|---------|\n| pre-build-interrogator | SKILL.md + spike template | Exhaustive questioning before building |\n| design-audit | SKILL.md + 15-dimension audit ref | Jobs/Ive-style design review |\n| feature-strategy | SKILL.md + frameworks ref + plan template | Product strategy & feature discovery |\n| doc-sync | SKILL.md + drift detection checklist | Documentation synchronization |\n\nAdded to existing 2 skills (screen-builder, quality-gate). Total: 6 skills.\n\n---\n\n## Orchestration Patterns\n\n4 workflow chains:\n\n| Pattern | Chain | Use For |\n|---------|-------|---------|\n| Linear | builder -> quality-gate -> progress | Steps 2, 3, 5, 7, 8, 9 |\n| Pre-Build | interrogator -> spike -> builder -> gate | Steps 4, 6 |\n| Checkpoint | auditor -> report -> approval -> fixes | After Steps 3, 6, 10 |\n| Competitive | strategist -> plan -> approval | Print Life analysis |\n\n---\n\n## Files Created & Modified\n\n### Created (18 files)\n\n- `docs/AGENTS.md` -- Agent registry, orchestration, calling conventions\n- `.claude/agents/frontend-builder.md`\n- `.claude/agents/requirements-interrogator.md`\n- `.claude/agents/design-auditor.md`\n- `.claude/agents/feature-strategist.md`\n- `.claude/agents/doc-sync.md`\n- `.claude/skills/pre-build-interrogator/SKILL.md`\n- `.claude/skills/pre-build-interrogator/templates/spike-template.md`\n- `.claude/skills/design-audit/SKILL.md`\n- `.claude/skills/design-audit/reference/audit-dimensions.md`\n- `.claude/skills/feature-strategy/SKILL.md`\n- `.claude/skills/feature-strategy/reference/feature-frameworks.md`\n- `.claude/skills/feature-strategy/templates/feature-plan-template.md`\n- `.claude/skills/doc-sync/SKILL.md`\n- `.claude/skills/doc-sync/checklists/drift-detection.md`\n- `agent-outputs/README.md`\n- `agent-outputs/.gitkeep`\n- `for_human/session-2026-02-08-agent-architecture.html` (this file)\n\n### Modified\n\n- `CLAUDE.md` -- Added AGENTS.md to canonical docs, updated \"Project Skills\" -> \"Agent & Skill Infrastructure\", added agent-outputs/ and .claude/ to architecture tree\n\n---\n\n## Decision Rationale\n\n- **5 agents, not 3**: doc-sync and feature-strategist seem \"nice to have\" but they prevent the two biggest Phase 1 risks: stale docs and building a \"me too\" product.\n- **Skills as knowledge, agents as workflow**: Skills are reusable across agents. The design-audit skill could be preloaded into a different agent in Phase 2 without rewriting it.\n- **Read-only where possible**: interrogator, auditor, and strategist are read-only by design. This prevents accidental code changes from analysis agents.\n- **agent-outputs/ for audit trail**: Every agent run produces structured markdown. This makes debugging agent behavior possible and creates a project history.\n- **Deferred to Phase 2**: Agent nesting, continuous learning, multi-agent teams, and script-heavy agents add complexity not justified for Phase 1 mockup work.","src/content/sessions/2026-02-08-agent-architecture.md","9f2cc108bde9f730",{"html":84,"metadata":85},"\u003Ch2 id=\"agents-vs-skills\">Agents vs Skills\u003C/h2>\n\u003Cp>\u003Cstrong>Agents\u003C/strong> (\u003Ccode>.claude/agents/\u003C/code>) are specialized AI assistants with their own context windows, system prompts, tool restrictions, and preloaded skills. They run isolated from the main conversation.\u003C/p>\n\u003Cp>\u003Cstrong>Skills\u003C/strong> (\u003Ccode>.claude/skills/\u003C/code>) are domain expertise containers with instructions, templates, and references. Agents preload skills at startup for domain knowledge.\u003C/p>\n\u003Cp>Think of agents as specialists hired for specific jobs, and skills as the training manuals they carry.\u003C/p>\n\u003Ch2 id=\"agents-created\">Agents Created\u003C/h2>\n\u003Cp>5 agents in \u003Ccode>.claude/agents/\u003C/code>:\u003C/p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Agent\u003C/th>\u003Cth>Purpose\u003C/th>\u003Cth>Skills\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>frontend-builder\u003C/td>\u003Ctd>Build screens &#x26; components\u003C/td>\u003Ctd>screen-builder, quality-gate\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>requirements-interrogator\u003C/td>\u003Ctd>Question features before building\u003C/td>\u003Ctd>pre-build-interrogator\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>design-auditor\u003C/td>\u003Ctd>Audit screens against design system\u003C/td>\u003Ctd>design-audit\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>feature-strategist\u003C/td>\u003Ctd>Competitive analysis &#x26; feature planning\u003C/td>\u003Ctd>feature-strategy\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>doc-sync\u003C/td>\u003Ctd>Keep docs synchronized with code\u003C/td>\u003Ctd>doc-sync\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch3 id=\"how-to-invoke\">How to Invoke\u003C/h3>\n\u003Cp>Use explicit delegation (recommended):\u003C/p>\n\u003Cul>\n\u003Cli>\u003Ccode>Use the frontend-builder agent to build PageHeader\u003C/code>\u003C/li>\n\u003Cli>\u003Ccode>Have the design-auditor agent review the jobs screen\u003C/code>\u003C/li>\n\u003Cli>\u003Ccode>Ask requirements-interrogator about the Kanban board workflow\u003C/code>\u003C/li>\n\u003Cli>\u003Ccode>Use feature-strategist for quote system competitive analysis\u003C/code>\u003C/li>\n\u003Cli>\u003Ccode>Have doc-sync check APP_FLOW against built screens\u003C/code>\u003C/li>\n\u003C/ul>\n\u003Chr>\n\u003Ch2 id=\"skills-created\">Skills Created\u003C/h2>\n\u003Cp>4 new skills in \u003Ccode>.claude/skills/\u003C/code>:\u003C/p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Skill\u003C/th>\u003Cth>Files\u003C/th>\u003Cth>Purpose\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>pre-build-interrogator\u003C/td>\u003Ctd>SKILL.md + spike template\u003C/td>\u003Ctd>Exhaustive questioning before building\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>design-audit\u003C/td>\u003Ctd>SKILL.md + 15-dimension audit ref\u003C/td>\u003Ctd>Jobs/Ive-style design review\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>feature-strategy\u003C/td>\u003Ctd>SKILL.md + frameworks ref + plan template\u003C/td>\u003Ctd>Product strategy &#x26; feature discovery\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>doc-sync\u003C/td>\u003Ctd>SKILL.md + drift detection checklist\u003C/td>\u003Ctd>Documentation synchronization\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Cp>Added to existing 2 skills (screen-builder, quality-gate). Total: 6 skills.\u003C/p>\n\u003Chr>\n\u003Ch2 id=\"orchestration-patterns\">Orchestration Patterns\u003C/h2>\n\u003Cp>4 workflow chains:\u003C/p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Pattern\u003C/th>\u003Cth>Chain\u003C/th>\u003Cth>Use For\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>Linear\u003C/td>\u003Ctd>builder -> quality-gate -> progress\u003C/td>\u003Ctd>Steps 2, 3, 5, 7, 8, 9\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Pre-Build\u003C/td>\u003Ctd>interrogator -> spike -> builder -> gate\u003C/td>\u003Ctd>Steps 4, 6\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Checkpoint\u003C/td>\u003Ctd>auditor -> report -> approval -> fixes\u003C/td>\u003Ctd>After Steps 3, 6, 10\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Competitive\u003C/td>\u003Ctd>strategist -> plan -> approval\u003C/td>\u003Ctd>Print Life analysis\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Chr>\n\u003Ch2 id=\"files-created--modified\">Files Created &#x26; Modified\u003C/h2>\n\u003Ch3 id=\"created-18-files\">Created (18 files)\u003C/h3>\n\u003Cul>\n\u003Cli>\u003Ccode>docs/AGENTS.md\u003C/code> — Agent registry, orchestration, calling conventions\u003C/li>\n\u003Cli>\u003Ccode>.claude/agents/frontend-builder.md\u003C/code>\u003C/li>\n\u003Cli>\u003Ccode>.claude/agents/requirements-interrogator.md\u003C/code>\u003C/li>\n\u003Cli>\u003Ccode>.claude/agents/design-auditor.md\u003C/code>\u003C/li>\n\u003Cli>\u003Ccode>.claude/agents/feature-strategist.md\u003C/code>\u003C/li>\n\u003Cli>\u003Ccode>.claude/agents/doc-sync.md\u003C/code>\u003C/li>\n\u003Cli>\u003Ccode>.claude/skills/pre-build-interrogator/SKILL.md\u003C/code>\u003C/li>\n\u003Cli>\u003Ccode>.claude/skills/pre-build-interrogator/templates/spike-template.md\u003C/code>\u003C/li>\n\u003Cli>\u003Ccode>.claude/skills/design-audit/SKILL.md\u003C/code>\u003C/li>\n\u003Cli>\u003Ccode>.claude/skills/design-audit/reference/audit-dimensions.md\u003C/code>\u003C/li>\n\u003Cli>\u003Ccode>.claude/skills/feature-strategy/SKILL.md\u003C/code>\u003C/li>\n\u003Cli>\u003Ccode>.claude/skills/feature-strategy/reference/feature-frameworks.md\u003C/code>\u003C/li>\n\u003Cli>\u003Ccode>.claude/skills/feature-strategy/templates/feature-plan-template.md\u003C/code>\u003C/li>\n\u003Cli>\u003Ccode>.claude/skills/doc-sync/SKILL.md\u003C/code>\u003C/li>\n\u003Cli>\u003Ccode>.claude/skills/doc-sync/checklists/drift-detection.md\u003C/code>\u003C/li>\n\u003Cli>\u003Ccode>agent-outputs/README.md\u003C/code>\u003C/li>\n\u003Cli>\u003Ccode>agent-outputs/.gitkeep\u003C/code>\u003C/li>\n\u003Cli>\u003Ccode>for_human/session-2026-02-08-agent-architecture.html\u003C/code> (this file)\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"modified\">Modified\u003C/h3>\n\u003Cul>\n\u003Cli>\u003Ccode>CLAUDE.md\u003C/code> — Added AGENTS.md to canonical docs, updated “Project Skills” -> “Agent &#x26; Skill Infrastructure”, added agent-outputs/ and .claude/ to architecture tree\u003C/li>\n\u003C/ul>\n\u003Chr>\n\u003Ch2 id=\"decision-rationale\">Decision Rationale\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Cstrong>5 agents, not 3\u003C/strong>: doc-sync and feature-strategist seem “nice to have” but they prevent the two biggest Phase 1 risks: stale docs and building a “me too” product.\u003C/li>\n\u003Cli>\u003Cstrong>Skills as knowledge, agents as workflow\u003C/strong>: Skills are reusable across agents. The design-audit skill could be preloaded into a different agent in Phase 2 without rewriting it.\u003C/li>\n\u003Cli>\u003Cstrong>Read-only where possible\u003C/strong>: interrogator, auditor, and strategist are read-only by design. This prevents accidental code changes from analysis agents.\u003C/li>\n\u003Cli>\u003Cstrong>agent-outputs/ for audit trail\u003C/strong>: Every agent run produces structured markdown. This makes debugging agent behavior possible and creates a project history.\u003C/li>\n\u003Cli>\u003Cstrong>Deferred to Phase 2\u003C/strong>: Agent nesting, continuous learning, multi-agent teams, and script-heavy agents add complexity not justified for Phase 1 mockup work.\u003C/li>\n\u003C/ul>",{"headings":86,"localImagePaths":114,"remoteImagePaths":115,"frontmatter":116,"imagePaths":120},[87,90,93,96,99,102,105,108,111],{"depth":34,"slug":88,"text":89},"agents-vs-skills","Agents vs Skills",{"depth":34,"slug":91,"text":92},"agents-created","Agents Created",{"depth":40,"slug":94,"text":95},"how-to-invoke","How to Invoke",{"depth":34,"slug":97,"text":98},"skills-created","Skills Created",{"depth":34,"slug":100,"text":101},"orchestration-patterns","Orchestration Patterns",{"depth":34,"slug":103,"text":104},"files-created--modified","Files Created & Modified",{"depth":40,"slug":106,"text":107},"created-18-files","Created (18 files)",{"depth":40,"slug":109,"text":110},"modified","Modified",{"depth":34,"slug":112,"text":113},"decision-rationale","Decision Rationale",[],[],{"title":71,"subtitle":72,"date":117,"phase":17,"vertical":18,"verticalSecondary":118,"stage":75,"tags":119,"sessionId":78,"branch":79,"status":25},["Date","2026-02-08T00:00:00.000Z"],[],[77,75],[],"2026-02-07-skills-implementation",{"id":121,"data":123,"body":130,"filePath":131,"digest":132,"rendered":133},{"title":124,"subtitle":125,"date":126,"phase":17,"vertical":18,"verticalSecondary":127,"stage":75,"tags":128,"sessionId":129,"branch":24,"status":25},"Skills Implementation","Built two project-specific Claude Code skills -- screen-builder and quality-gate -- encoding design system, quality checklist, and domain knowledge into repeatable workflows for all 10 remaining screens.",["Date","2026-02-07T00:00:00.000Z"],[],[77,75],"58358bf9-61aa-4451-a184-c3d91d1871bd","## What Was Built\n\n**2 skills, 20 files** in `.claude/skills/`. Skills are folders, not just markdown -- each contains a workflow (SKILL.md), templates, checklists, and reference docs.\n\n### screen-builder\n\nBuild any of the 10 remaining screens with consistent design system, patterns, and quality. 5-step workflow: Preflight -> Template -> Build -> Verify -> Update.\n\n8 files . 3 templates . 2 checklists . 2 ref docs\n\n### quality-gate\n\nAudit completed screens against 10 quality categories. Produces structured pass/warn/fail report with specific fix instructions and line references.\n\n12 files . 10 checklists . 1 scoring rubric\n\n## Directory Structure\n\n### screen-builder\n\n```\n.claude/skills/screen-builder/\n  SKILL.md -- 5-step workflow\n  templates/\n    data-table-screen.tsx -- list pages (Jobs, Quotes, Customers, etc.)\n    detail-screen.tsx -- detail pages (Job, Quote, Customer)\n    form-screen.tsx -- form pages (New Quote)\n  checklists/\n    quality-checklist.md -- 10-item quality pass/fail\n    cross-link-checklist.md -- navigation verification\n  reference/\n    design-tokens-quick-ref.md -- colors, spacing, typography\n    component-inventory.md -- what's available in components/\n```\n\n### quality-gate\n\n```\n.claude/skills/quality-gate/\n  SKILL.md -- audit workflow\n  checklists/\n    visual-hierarchy.md\n    spacing-layout.md\n    typography.md\n    color-usage.md\n    interactive-states.md\n    icons.md\n    motion-animation.md\n    empty-error-states.md\n    accessibility.md\n    jobs-filter.md\n  rubric/\n    scoring-guide.md -- pass/warn/fail criteria + report template\n```\n\n## The Insight\n\nAn X post argued that **skills are folders, not markdown files**. The SKILL.md is just the README -- the folder is the actual product. Inside: scripts for deterministic work, templates for consistent output, LLM instructions for creative/judgment work. The key insight is **deterministic + non-deterministic layering**:\n\n| Layer | What Provides It | Example |\n|-------|------------------|---------|\n| Deterministic | Templates, checklists, reference docs | Quality checklist, screen templates, design tokens |\n| Non-deterministic | AI judgment within constraints | Layout decisions, component composition, UX tradeoffs |\n| Reproducible | Consistent directory structure | Same workflow, same quality gates, every time |\n\n## What We Didn't Build\n\n- **Domain context skill** -- CLAUDE.md + docs already provide rich domain context automatically\n- **Workflow orchestration skill** -- the superpowers chain (brainstorming -> writing-plans -> executing-plans) already handles this\n- **Generic frontend patterns** -- existing plugins cover this\n- **Scripts** -- deferred to Phase 2 when real APIs exist. Phase 1 doesn't benefit from scripted automation.\n- **continuous-learning** -- deferred. Requires Stop hook, adds complexity.\n\n## Projected ROI\n\n| Skill | Applies To | Estimated Impact |\n|-------|------------|------------------|\n| screen-builder | 9 remaining screens (Steps 2-10) | 30-50% time savings per screen via templates + preflight workflow |\n| quality-gate | Every screen before marking done | 100% checklist coverage, fewer review cycles |\n\n## Design Token Fix\n\nCodeRabbit flagged `shadow-cyan-400` in template code as a hardcoded Tailwind palette color violating our design token guidelines. Replaced all occurrences with `shadow-action`.\n\n| Approach | Pros | Cons |\n|----------|------|------|\n| `shadow-cyan-400` | Guaranteed Tailwind utility | Hardcoded -- won't update if action color changes. Violates our own \"no colors outside design tokens\" rule. |\n| `shadow-action` | Semantic, future-proof, consistent with `text-action`/`bg-action` | None -- Tailwind v4 auto-generates `shadow-*` for any `--color-*` in `@theme inline` |\n\nFixed in 4 files: `FRONTEND_GUIDELINES.md`, `interactive-states.md`, `design-tokens-quick-ref.md`, `form-screen.tsx`. The root cause was FRONTEND_GUIDELINES.md -- all other files copied the pattern from there.\n\n## Other Changes\n\n| File | Change |\n|------|--------|\n| `CLAUDE.md` | Added \"Project Skills\" section documenting both skills |\n| `progress.txt` | Added skills to \"What's Built\" and session log |\n| `eslint.config.mjs` | Excluded `.claude/skills/**/templates/**` from linting (templates have intentional unused imports) |\n\n## Verification\n\n- **Pass** -- `npx tsc --noEmit`\n- **Pass** -- `npm run lint` (0 errors, 0 warnings after ESLint exclusion)\n- **Pass** -- `npm run build`\n\n## Next Steps\n\n- Build Step 1 (Shared Layout Polish) using `screen-builder` skill\n- Run `quality-gate` on the completed screen\n- Compare time/quality against Step 0 (built without skills)\n- Iterate skill content based on findings","src/content/sessions/2026-02-07-skills-implementation.md","8e2c8a4aca814f44",{"html":134,"metadata":135},"\u003Ch2 id=\"what-was-built\">What Was Built\u003C/h2>\n\u003Cp>\u003Cstrong>2 skills, 20 files\u003C/strong> in \u003Ccode>.claude/skills/\u003C/code>. Skills are folders, not just markdown — each contains a workflow (SKILL.md), templates, checklists, and reference docs.\u003C/p>\n\u003Ch3 id=\"screen-builder\">screen-builder\u003C/h3>\n\u003Cp>Build any of the 10 remaining screens with consistent design system, patterns, and quality. 5-step workflow: Preflight -> Template -> Build -> Verify -> Update.\u003C/p>\n\u003Cp>8 files . 3 templates . 2 checklists . 2 ref docs\u003C/p>\n\u003Ch3 id=\"quality-gate\">quality-gate\u003C/h3>\n\u003Cp>Audit completed screens against 10 quality categories. Produces structured pass/warn/fail report with specific fix instructions and line references.\u003C/p>\n\u003Cp>12 files . 10 checklists . 1 scoring rubric\u003C/p>\n\u003Ch2 id=\"directory-structure\">Directory Structure\u003C/h2>\n\u003Ch3 id=\"screen-builder-1\">screen-builder\u003C/h3>\n\u003Cpre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>.claude/skills/screen-builder/\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  SKILL.md -- 5-step workflow\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  templates/\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    data-table-screen.tsx -- list pages (Jobs, Quotes, Customers, etc.)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    detail-screen.tsx -- detail pages (Job, Quote, Customer)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    form-screen.tsx -- form pages (New Quote)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  checklists/\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    quality-checklist.md -- 10-item quality pass/fail\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    cross-link-checklist.md -- navigation verification\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  reference/\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    design-tokens-quick-ref.md -- colors, spacing, typography\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    component-inventory.md -- what's available in components/\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"quality-gate-1\">quality-gate\u003C/h3>\n\u003Cpre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>.claude/skills/quality-gate/\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  SKILL.md -- audit workflow\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  checklists/\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    visual-hierarchy.md\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    spacing-layout.md\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    typography.md\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    color-usage.md\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    interactive-states.md\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    icons.md\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    motion-animation.md\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    empty-error-states.md\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    accessibility.md\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    jobs-filter.md\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  rubric/\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    scoring-guide.md -- pass/warn/fail criteria + report template\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"the-insight\">The Insight\u003C/h2>\n\u003Cp>An X post argued that \u003Cstrong>skills are folders, not markdown files\u003C/strong>. The SKILL.md is just the README — the folder is the actual product. Inside: scripts for deterministic work, templates for consistent output, LLM instructions for creative/judgment work. The key insight is \u003Cstrong>deterministic + non-deterministic layering\u003C/strong>:\u003C/p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Layer\u003C/th>\u003Cth>What Provides It\u003C/th>\u003Cth>Example\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>Deterministic\u003C/td>\u003Ctd>Templates, checklists, reference docs\u003C/td>\u003Ctd>Quality checklist, screen templates, design tokens\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Non-deterministic\u003C/td>\u003Ctd>AI judgment within constraints\u003C/td>\u003Ctd>Layout decisions, component composition, UX tradeoffs\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Reproducible\u003C/td>\u003Ctd>Consistent directory structure\u003C/td>\u003Ctd>Same workflow, same quality gates, every time\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"what-we-didnt-build\">What We Didn’t Build\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Cstrong>Domain context skill\u003C/strong> — CLAUDE.md + docs already provide rich domain context automatically\u003C/li>\n\u003Cli>\u003Cstrong>Workflow orchestration skill\u003C/strong> — the superpowers chain (brainstorming -> writing-plans -> executing-plans) already handles this\u003C/li>\n\u003Cli>\u003Cstrong>Generic frontend patterns\u003C/strong> — existing plugins cover this\u003C/li>\n\u003Cli>\u003Cstrong>Scripts\u003C/strong> — deferred to Phase 2 when real APIs exist. Phase 1 doesn’t benefit from scripted automation.\u003C/li>\n\u003Cli>\u003Cstrong>continuous-learning\u003C/strong> — deferred. Requires Stop hook, adds complexity.\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"projected-roi\">Projected ROI\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Skill\u003C/th>\u003Cth>Applies To\u003C/th>\u003Cth>Estimated Impact\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>screen-builder\u003C/td>\u003Ctd>9 remaining screens (Steps 2-10)\u003C/td>\u003Ctd>30-50% time savings per screen via templates + preflight workflow\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>quality-gate\u003C/td>\u003Ctd>Every screen before marking done\u003C/td>\u003Ctd>100% checklist coverage, fewer review cycles\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"design-token-fix\">Design Token Fix\u003C/h2>\n\u003Cp>CodeRabbit flagged \u003Ccode>shadow-cyan-400\u003C/code> in template code as a hardcoded Tailwind palette color violating our design token guidelines. Replaced all occurrences with \u003Ccode>shadow-action\u003C/code>.\u003C/p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Approach\u003C/th>\u003Cth>Pros\u003C/th>\u003Cth>Cons\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>\u003Ccode>shadow-cyan-400\u003C/code>\u003C/td>\u003Ctd>Guaranteed Tailwind utility\u003C/td>\u003Ctd>Hardcoded — won’t update if action color changes. Violates our own “no colors outside design tokens” rule.\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>shadow-action\u003C/code>\u003C/td>\u003Ctd>Semantic, future-proof, consistent with \u003Ccode>text-action\u003C/code>/\u003Ccode>bg-action\u003C/code>\u003C/td>\u003Ctd>None — Tailwind v4 auto-generates \u003Ccode>shadow-*\u003C/code> for any \u003Ccode>--color-*\u003C/code> in \u003Ccode>@theme inline\u003C/code>\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Cp>Fixed in 4 files: \u003Ccode>FRONTEND_GUIDELINES.md\u003C/code>, \u003Ccode>interactive-states.md\u003C/code>, \u003Ccode>design-tokens-quick-ref.md\u003C/code>, \u003Ccode>form-screen.tsx\u003C/code>. The root cause was FRONTEND_GUIDELINES.md — all other files copied the pattern from there.\u003C/p>\n\u003Ch2 id=\"other-changes\">Other Changes\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>File\u003C/th>\u003Cth>Change\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>\u003Ccode>CLAUDE.md\u003C/code>\u003C/td>\u003Ctd>Added “Project Skills” section documenting both skills\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>progress.txt\u003C/code>\u003C/td>\u003Ctd>Added skills to “What’s Built” and session log\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>eslint.config.mjs\u003C/code>\u003C/td>\u003Ctd>Excluded \u003Ccode>.claude/skills/**/templates/**\u003C/code> from linting (templates have intentional unused imports)\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"verification\">Verification\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Cstrong>Pass\u003C/strong> — \u003Ccode>npx tsc --noEmit\u003C/code>\u003C/li>\n\u003Cli>\u003Cstrong>Pass\u003C/strong> — \u003Ccode>npm run lint\u003C/code> (0 errors, 0 warnings after ESLint exclusion)\u003C/li>\n\u003Cli>\u003Cstrong>Pass\u003C/strong> — \u003Ccode>npm run build\u003C/code>\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"next-steps\">Next Steps\u003C/h2>\n\u003Cul>\n\u003Cli>Build Step 1 (Shared Layout Polish) using \u003Ccode>screen-builder\u003C/code> skill\u003C/li>\n\u003Cli>Run \u003Ccode>quality-gate\u003C/code> on the completed screen\u003C/li>\n\u003Cli>Compare time/quality against Step 0 (built without skills)\u003C/li>\n\u003Cli>Iterate skill content based on findings\u003C/li>\n\u003C/ul>",{"headings":136,"localImagePaths":172,"remoteImagePaths":173,"frontmatter":174,"imagePaths":178},[137,140,142,144,147,149,151,154,157,160,163,166,169],{"depth":34,"slug":138,"text":139},"what-was-built","What Was Built",{"depth":40,"slug":141,"text":141},"screen-builder",{"depth":40,"slug":143,"text":143},"quality-gate",{"depth":34,"slug":145,"text":146},"directory-structure","Directory Structure",{"depth":40,"slug":148,"text":141},"screen-builder-1",{"depth":40,"slug":150,"text":143},"quality-gate-1",{"depth":34,"slug":152,"text":153},"the-insight","The Insight",{"depth":34,"slug":155,"text":156},"what-we-didnt-build","What We Didn’t Build",{"depth":34,"slug":158,"text":159},"projected-roi","Projected ROI",{"depth":34,"slug":161,"text":162},"design-token-fix","Design Token Fix",{"depth":34,"slug":164,"text":165},"other-changes","Other Changes",{"depth":34,"slug":167,"text":168},"verification","Verification",{"depth":34,"slug":170,"text":171},"next-steps","Next Steps",[],[],{"title":124,"subtitle":125,"date":175,"phase":17,"vertical":18,"verticalSecondary":176,"stage":75,"tags":177,"sessionId":129,"branch":24,"status":25},["Date","2026-02-07T00:00:00.000Z"],[],[77,75],[],"2026-02-08-quoting-breadboard",{"id":179,"data":181,"body":192,"filePath":193,"digest":194,"rendered":195},{"title":182,"subtitle":183,"date":184,"phase":17,"vertical":185,"verticalSecondary":186,"stage":187,"tags":188,"sessionId":190,"branch":191,"status":25},"Quoting Breadboard","Visual blueprint mapping all Places, UI affordances, code affordances, and wiring for the Quoting vertical. Produced by the breadboarding skill as input to the frontend-builder agent.",["Date","2026-02-08T00:00:00.000Z"],"quoting",[],"breadboarding",[189,75],"plan","09b70260-83ac-4830-9b02-ed8c0683f699","feat/quoting-discovery","| Metric | Value |\n|--------|-------|\n| 7 | Places |\n| 65 | UI Affordances |\n| 32 | Code Affordances |\n| 18 | Data Stores |\n\n## Places & Navigation Flow\n\n### How users move through the Quoting vertical\n\nPages (rectangles) are routes. Modals/popovers (rounded) block interaction with the parent Place. Shared components (dashed cyan) feed into multiple Places and will be reusable across future verticals.\n\n```mermaid\nflowchart TD\n    P1[\"P1: Quotes List\\n/quotes\"]\n    P2[\"P2: New Quote Form\\n/quotes/new\"]\n    P21[\"P2.1: Customer\\nCreation Modal\"]\n    P22[\"P2.2: Color Swatch\\nPicker\"]\n    P3[\"P3: Quote Detail\\n/quotes/[id]\"]\n    P31[\"P3.1: Email\\nPreview Modal\"]\n    P4[\"P4: Edit Quote\\n/quotes/[id]/edit\"]\n\n    P1 -- \"New Quote btn\" --> P2\n    P1 -- \"Row click\" --> P3\n    P1 -- \"Quick Edit\" --> P4\n    P1 -- \"Duplicate\" --> P2\n\n    P2 -- \"Add Customer\" --> P21\n    P21 -- \"Save + close\" --> P2\n    P2 -- \"Pick color\" --> P22\n    P22 -- \"Select + close\" --> P2\n    P2 -- \"Save Draft\" --> P3\n    P2 -- \"Save & Send\" --> P3\n\n    P3 -- \"Edit Quote\" --> P4\n    P3 -- \"Duplicate\" --> P2\n    P3 -- \"Send to Customer\" --> P31\n    P31 -- \"Send / Cancel\" --> P3\n    P4 -- \"Update Quote\" --> P3\n\n    SC1([ColorSwatchPicker]):::shared -.-> P22\n    SC2([CustomerCombobox]):::shared -.-> P2\n    SC3([StatusBadge]):::shared -.-> P1\n    SC3 -.-> P3\n\n    classDef shared fill:#164e63,stroke:#22d3ee,color:#22d3ee\n```\n\n## New Quote Form — Pricing Data Flow\n\n### How user inputs flow through the calculation chain\n\nEvery calculation is instant and client-side — never blocks input. This is the #1 improvement over Print Life (which blocks on every quantity change). The pricing formula is simplified for Phase 1; Phase 2 will read from a configurable pricing matrix.\n\n```mermaid\nflowchart TD\n    subgraph inputs [\"User Inputs (per line item)\"]\n        GARM[\"Garment Combobox\"]\n        SIZES[\"Size Qty Inputs\\nXS S M L XL 2XL 3XL\"]\n        LOCS[\"Location Checkboxes\\nFront Back L/R Sleeve\"]\n        COLCOUNT[\"Color Count\\nper location\"]\n    end\n\n    subgraph calc [\"Calculation Chain\"]\n        N32[\"calculateUnitPrice\\nbase + colors x $0.50 + locs x $0.25\"]\n        N10[\"sumSizeQtys\\ntotal quantity\"]\n        N11[\"calculateLineTotal\\nunitPrice x totalQty\"]\n    end\n\n    subgraph totals [\"Pricing Summary\"]\n        N16[\"calculateSubtotal\\nsum of all line totals\"]\n        SETUP[\"Setup Fees\\nuser input\"]\n        TOTAL[\"Grand Total\\nauto-calc OR manual override\"]\n    end\n\n    GARM --> N32\n    LOCS --> N32\n    COLCOUNT --> N32\n    SIZES --> N10\n    N32 --> N11\n    N10 --> N11\n    N11 -->|\"per line item\"| N16\n    SETUP --> N16\n    N16 --> TOTAL\n\n    classDef input fill:#1c1c1f,stroke:#a1a1aa,color:#fafafa\n    classDef calcNode fill:#164e63,stroke:#22d3ee,color:#cffafe\n    classDef totalNode fill:#052e16,stroke:#34d399,color:#d1fae5\n\n    class GARM,SIZES,LOCS,COLCOUNT,SETUP input\n    class N32,N10,N11,N16 calcNode\n    class TOTAL totalNode\n```\n\n## Places\n\n| ID | Place | Type | Entry Point |\n|----|-------|------|-------------|\n| P1 | Quotes List | Page | `/quotes` |\n| P2 | New Quote Form | Page | `/quotes/new` |\n| P2.1 | Customer Creation Modal | Modal | \"Add New Customer\" in P2 |\n| P2.2 | Color Swatch Picker | Popover | Color field in P2 line item |\n| P3 | Quote Detail | Page | `/quotes/[id]` |\n| P3.1 | Email Preview Modal | Modal | \"Send to Customer\" in P3 |\n| P4 | Edit Quote Form | Page | `/quotes/[id]/edit` |\n\n## Shared Components (Reusable)\n\nBuilt first, used across verticals.\n\n| Component | Used In | Location |\n|-----------|---------|----------|\n| **ColorSwatchPicker** | P2.2 (Quote Form color selection) | `components/features/` |\n| **CustomerCombobox** | P2, P4 (customer selection) | `components/features/` |\n| **StatusBadge** | P1, P3 (quote status display) | `components/features/` |\n\n## Build Order\n\nDependency-ordered execution plan:\n\n1. **Schema Updates** (Low) — Update quote.ts (new statuses, richer line items), new color.ts, garment catalog variant. Blocks everything.\n2. **Mock Data Expansion** (Medium) — 40 colors with S&S-aligned fields, 6+ garment styles, 6 quotes with full line items. Blocks all UI.\n3. **Shared Components** (Medium) — ColorSwatchPicker + CustomerCombobox + StatusBadge. Can run in parallel. Block the Quote Form.\n4. **Quotes List Page** (Medium) — P1: DataTable with filters, search, sort, quick actions. Can run in parallel with step 5.\n5. **QuoteForm + Pricing** (High) — Core form component: LineItemRow, PricingSummary, pricing calculations. Heart of the vertical.\n6. **New Quote + Edit Quote Pages** (Medium) — P2 + P4: Wire QuoteForm into page routes with Customer Modal integration.\n7. **Quote Detail + Email Preview** (Medium) — P3 + P3.1: Read-only view with action buttons and email mockup modal.\n\n**Critical path:** Schemas → Mock Data → ColorSwatchPicker → QuoteForm → New Quote page\n\n## Key Design Decisions\n\n### Single-page form, not a wizard\n\nPrint Life forces 6 sequential steps. We use one scrollable page with 4 collapsible sections. Users only interact with what they need.\n\n### Instant pricing (never block input)\n\nPrint Life's #1 friction: recalculation blocks typing. Our N32 → N11 → N16 chain runs synchronously on every keystroke with zero delay.\n\n### Color swatch picker as popover (P2.2)\n\nInline grids per line item would consume too much vertical space. Popover opens on click, blocks form, closes on selection. Passes the blocking test = its own Place.\n\n### QuoteForm shared between New + Edit\n\nP2 and P4 use the same component. P4 calls N31 (loadQuoteForEdit) on mount to pre-fill. Reduces build effort and ensures consistency.\n\n## Artifacts\n\nFull breadboard document (tables + diagrams): `docs/breadboards/quoting-breadboard.md`\n\nContains: Places, UI Affordances (65), Code Affordances (32), Data Stores (18), Wiring Verification, Component Boundaries, Build Order, Scope Coverage, Phase 2 Extensions. Mermaid diagrams render on GitHub.","src/content/sessions/2026-02-08-quoting-breadboard.md","bce50bbf6f5715b0",{"html":196,"metadata":197},"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Metric\u003C/th>\u003Cth>Value\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>7\u003C/td>\u003Ctd>Places\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>65\u003C/td>\u003Ctd>UI Affordances\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>32\u003C/td>\u003Ctd>Code Affordances\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>18\u003C/td>\u003Ctd>Data Stores\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"places--navigation-flow\">Places &#x26; Navigation Flow\u003C/h2>\n\u003Ch3 id=\"how-users-move-through-the-quoting-vertical\">How users move through the Quoting vertical\u003C/h3>\n\u003Cp>Pages (rectangles) are routes. Modals/popovers (rounded) block interaction with the parent Place. Shared components (dashed cyan) feed into multiple Places and will be reusable across future verticals.\u003C/p>\n\u003Cpre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"mermaid\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">flowchart TD\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    P1[\"P1: Quotes List\\n/quotes\"]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    P2[\"P2: New Quote Form\\n/quotes/new\"]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    P21[\"P2.1: Customer\\nCreation Modal\"]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    P22[\"P2.2: Color Swatch\\nPicker\"]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    P3[\"P3: Quote Detail\\n/quotes/[id]\"]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    P31[\"P3.1: Email\\nPreview Modal\"]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    P4[\"P4: Edit Quote\\n/quotes/[id]/edit\"]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    P1 -- \"New Quote btn\" --> P2\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    P1 -- \"Row click\" --> P3\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    P1 -- \"Quick Edit\" --> P4\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    P1 -- \"Duplicate\" --> P2\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    P2 -- \"Add Customer\" --> P21\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    P21 -- \"Save + close\" --> P2\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    P2 -- \"Pick color\" --> P22\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    P22 -- \"Select + close\" --> P2\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    P2 -- \"Save Draft\" --> P3\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    P2 -- \"Save &#x26; Send\" --> P3\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    P3 -- \"Edit Quote\" --> P4\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    P3 -- \"Duplicate\" --> P2\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    P3 -- \"Send to Customer\" --> P31\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    P31 -- \"Send / Cancel\" --> P3\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    P4 -- \"Update Quote\" --> P3\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    SC1([ColorSwatchPicker]):::shared -.-> P22\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    SC2([CustomerCombobox]):::shared -.-> P2\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    SC3([StatusBadge]):::shared -.-> P1\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    SC3 -.-> P3\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    classDef shared fill:#164e63,stroke:#22d3ee,color:#22d3ee\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"new-quote-form--pricing-data-flow\">New Quote Form — Pricing Data Flow\u003C/h2>\n\u003Ch3 id=\"how-user-inputs-flow-through-the-calculation-chain\">How user inputs flow through the calculation chain\u003C/h3>\n\u003Cp>Every calculation is instant and client-side — never blocks input. This is the #1 improvement over Print Life (which blocks on every quantity change). The pricing formula is simplified for Phase 1; Phase 2 will read from a configurable pricing matrix.\u003C/p>\n\u003Cpre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"mermaid\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">flowchart TD\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    subgraph inputs [\"User Inputs (per line item)\"]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">        GARM[\"Garment Combobox\"]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">        SIZES[\"Size Qty Inputs\\nXS S M L XL 2XL 3XL\"]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">        LOCS[\"Location Checkboxes\\nFront Back L/R Sleeve\"]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">        COLCOUNT[\"Color Count\\nper location\"]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    end\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    subgraph calc [\"Calculation Chain\"]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">        N32[\"calculateUnitPrice\\nbase + colors x $0.50 + locs x $0.25\"]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">        N10[\"sumSizeQtys\\ntotal quantity\"]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">        N11[\"calculateLineTotal\\nunitPrice x totalQty\"]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    end\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    subgraph totals [\"Pricing Summary\"]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">        N16[\"calculateSubtotal\\nsum of all line totals\"]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">        SETUP[\"Setup Fees\\nuser input\"]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">        TOTAL[\"Grand Total\\nauto-calc OR manual override\"]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    end\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    GARM --> N32\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    LOCS --> N32\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    COLCOUNT --> N32\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    SIZES --> N10\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    N32 --> N11\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    N10 --> N11\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    N11 -->|\"per line item\"| N16\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    SETUP --> N16\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    N16 --> TOTAL\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    classDef input fill:#1c1c1f,stroke:#a1a1aa,color:#fafafa\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    classDef calcNode fill:#164e63,stroke:#22d3ee,color:#cffafe\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    classDef totalNode fill:#052e16,stroke:#34d399,color:#d1fae5\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    class GARM,SIZES,LOCS,COLCOUNT,SETUP input\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    class N32,N10,N11,N16 calcNode\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">    class TOTAL totalNode\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"places\">Places\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>ID\u003C/th>\u003Cth>Place\u003C/th>\u003Cth>Type\u003C/th>\u003Cth>Entry Point\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>P1\u003C/td>\u003Ctd>Quotes List\u003C/td>\u003Ctd>Page\u003C/td>\u003Ctd>\u003Ccode>/quotes\u003C/code>\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>P2\u003C/td>\u003Ctd>New Quote Form\u003C/td>\u003Ctd>Page\u003C/td>\u003Ctd>\u003Ccode>/quotes/new\u003C/code>\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>P2.1\u003C/td>\u003Ctd>Customer Creation Modal\u003C/td>\u003Ctd>Modal\u003C/td>\u003Ctd>”Add New Customer” in P2\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>P2.2\u003C/td>\u003Ctd>Color Swatch Picker\u003C/td>\u003Ctd>Popover\u003C/td>\u003Ctd>Color field in P2 line item\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>P3\u003C/td>\u003Ctd>Quote Detail\u003C/td>\u003Ctd>Page\u003C/td>\u003Ctd>\u003Ccode>/quotes/[id]\u003C/code>\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>P3.1\u003C/td>\u003Ctd>Email Preview Modal\u003C/td>\u003Ctd>Modal\u003C/td>\u003Ctd>”Send to Customer” in P3\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>P4\u003C/td>\u003Ctd>Edit Quote Form\u003C/td>\u003Ctd>Page\u003C/td>\u003Ctd>\u003Ccode>/quotes/[id]/edit\u003C/code>\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"shared-components-reusable\">Shared Components (Reusable)\u003C/h2>\n\u003Cp>Built first, used across verticals.\u003C/p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Component\u003C/th>\u003Cth>Used In\u003C/th>\u003Cth>Location\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>\u003Cstrong>ColorSwatchPicker\u003C/strong>\u003C/td>\u003Ctd>P2.2 (Quote Form color selection)\u003C/td>\u003Ctd>\u003Ccode>components/features/\u003C/code>\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>CustomerCombobox\u003C/strong>\u003C/td>\u003Ctd>P2, P4 (customer selection)\u003C/td>\u003Ctd>\u003Ccode>components/features/\u003C/code>\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>StatusBadge\u003C/strong>\u003C/td>\u003Ctd>P1, P3 (quote status display)\u003C/td>\u003Ctd>\u003Ccode>components/features/\u003C/code>\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"build-order\">Build Order\u003C/h2>\n\u003Cp>Dependency-ordered execution plan:\u003C/p>\n\u003Col>\n\u003Cli>\u003Cstrong>Schema Updates\u003C/strong> (Low) — Update quote.ts (new statuses, richer line items), new color.ts, garment catalog variant. Blocks everything.\u003C/li>\n\u003Cli>\u003Cstrong>Mock Data Expansion\u003C/strong> (Medium) — 40 colors with S&#x26;S-aligned fields, 6+ garment styles, 6 quotes with full line items. Blocks all UI.\u003C/li>\n\u003Cli>\u003Cstrong>Shared Components\u003C/strong> (Medium) — ColorSwatchPicker + CustomerCombobox + StatusBadge. Can run in parallel. Block the Quote Form.\u003C/li>\n\u003Cli>\u003Cstrong>Quotes List Page\u003C/strong> (Medium) — P1: DataTable with filters, search, sort, quick actions. Can run in parallel with step 5.\u003C/li>\n\u003Cli>\u003Cstrong>QuoteForm + Pricing\u003C/strong> (High) — Core form component: LineItemRow, PricingSummary, pricing calculations. Heart of the vertical.\u003C/li>\n\u003Cli>\u003Cstrong>New Quote + Edit Quote Pages\u003C/strong> (Medium) — P2 + P4: Wire QuoteForm into page routes with Customer Modal integration.\u003C/li>\n\u003Cli>\u003Cstrong>Quote Detail + Email Preview\u003C/strong> (Medium) — P3 + P3.1: Read-only view with action buttons and email mockup modal.\u003C/li>\n\u003C/ol>\n\u003Cp>\u003Cstrong>Critical path:\u003C/strong> Schemas → Mock Data → ColorSwatchPicker → QuoteForm → New Quote page\u003C/p>\n\u003Ch2 id=\"key-design-decisions\">Key Design Decisions\u003C/h2>\n\u003Ch3 id=\"single-page-form-not-a-wizard\">Single-page form, not a wizard\u003C/h3>\n\u003Cp>Print Life forces 6 sequential steps. We use one scrollable page with 4 collapsible sections. Users only interact with what they need.\u003C/p>\n\u003Ch3 id=\"instant-pricing-never-block-input\">Instant pricing (never block input)\u003C/h3>\n\u003Cp>Print Life’s #1 friction: recalculation blocks typing. Our N32 → N11 → N16 chain runs synchronously on every keystroke with zero delay.\u003C/p>\n\u003Ch3 id=\"color-swatch-picker-as-popover-p22\">Color swatch picker as popover (P2.2)\u003C/h3>\n\u003Cp>Inline grids per line item would consume too much vertical space. Popover opens on click, blocks form, closes on selection. Passes the blocking test = its own Place.\u003C/p>\n\u003Ch3 id=\"quoteform-shared-between-new--edit\">QuoteForm shared between New + Edit\u003C/h3>\n\u003Cp>P2 and P4 use the same component. P4 calls N31 (loadQuoteForEdit) on mount to pre-fill. Reduces build effort and ensures consistency.\u003C/p>\n\u003Ch2 id=\"artifacts\">Artifacts\u003C/h2>\n\u003Cp>Full breadboard document (tables + diagrams): \u003Ccode>docs/breadboards/quoting-breadboard.md\u003C/code>\u003C/p>\n\u003Cp>Contains: Places, UI Affordances (65), Code Affordances (32), Data Stores (18), Wiring Verification, Component Boundaries, Build Order, Scope Coverage, Phase 2 Extensions. Mermaid diagrams render on GitHub.\u003C/p>",{"headings":198,"localImagePaths":236,"remoteImagePaths":237,"frontmatter":238,"imagePaths":242},[199,202,205,208,211,214,217,220,223,226,229,232,235],{"depth":34,"slug":200,"text":201},"places--navigation-flow","Places & Navigation Flow",{"depth":40,"slug":203,"text":204},"how-users-move-through-the-quoting-vertical","How users move through the Quoting vertical",{"depth":34,"slug":206,"text":207},"new-quote-form--pricing-data-flow","New Quote Form — Pricing Data Flow",{"depth":40,"slug":209,"text":210},"how-user-inputs-flow-through-the-calculation-chain","How user inputs flow through the calculation chain",{"depth":34,"slug":212,"text":213},"places","Places",{"depth":34,"slug":215,"text":216},"shared-components-reusable","Shared Components (Reusable)",{"depth":34,"slug":218,"text":219},"build-order","Build Order",{"depth":34,"slug":221,"text":222},"key-design-decisions","Key Design Decisions",{"depth":40,"slug":224,"text":225},"single-page-form-not-a-wizard","Single-page form, not a wizard",{"depth":40,"slug":227,"text":228},"instant-pricing-never-block-input","Instant pricing (never block input)",{"depth":40,"slug":230,"text":231},"color-swatch-picker-as-popover-p22","Color swatch picker as popover (P2.2)",{"depth":40,"slug":233,"text":234},"quoteform-shared-between-new--edit","QuoteForm shared between New + Edit",{"depth":34,"slug":59,"text":60},[],[],{"title":182,"subtitle":183,"date":239,"phase":17,"vertical":185,"verticalSecondary":240,"stage":187,"tags":241,"sessionId":190,"branch":191,"status":25},["Date","2026-02-08T00:00:00.000Z"],[],[189,75],[],"2026-02-08-breadboarding-skill",{"id":243,"data":245,"body":252,"filePath":253,"digest":254,"rendered":255},{"title":246,"subtitle":247,"date":248,"phase":17,"vertical":18,"verticalSecondary":249,"stage":75,"tags":250,"sessionId":190,"branch":251,"status":25},"Breadboarding Skill","Promoted breadboarding from Phase 2 deferral to full Phase 1 skill. Maps UI affordances, code affordances, data stores, and wiring before any code is written.",["Date","2026-02-08T00:00:00.000Z"],[185],[77,22],"feat/breadboarding-skill","## Why This Decision\n\nOn Feb 7, we evaluated Ryan Singer's shaping-skills methodology and deferred breadboarding to Phase 2. The reasoning was sound at the time: we were using a linear 10-step implementation plan and breadboarding seemed like over-engineering for simple screens.\n\nOn Feb 8, we pivoted to **vertical-by-vertical development**. This changed the equation significantly:\n\n- **Verticals are complex** -- each has 3+ screens with interconnected affordances, shared state, and wiring between pages\n- **The breadboarding README literally says** \"Good for slicing into vertical scopes\" -- it was designed for exactly this workflow\n- **Phase 2 will add backend** -- breadboards become even more valuable when mapping UI-to-API-to-database wiring\n- **Consistency pays compound interest** -- having a structured planning step between scope and build prevents discovering wiring issues during implementation\n\n## What Was Created\n\n| Stat | Value |\n|------|-------|\n| Skill Files | 3 |\n| Workflow Steps | 9 |\n| Total Skills | 8 |\n\n### Skill Files\n\n### SKILL.md\n\nMain skill definition with 9-step workflow: Read Inputs -> Identify Places -> Map UI Affordances -> Map Code Affordances -> Map Data Stores -> Verify Wiring -> Identify Component Boundaries -> Define Build Order -> Write Breadboard Document. Includes quality gate checklist and Phase 1/Phase 2 awareness.\n\n### templates/breadboard-template.md\n\nOutput template with YAML frontmatter (depends-on linking to scope definition and journey design). Sections: Places, UI Affordances, Code Affordances, Data Stores, Wiring Verification, Component Boundaries, Build Order, Scope Coverage, Phase 2 Extensions.\n\n### reference/concepts.md\n\nKey concepts reference: UI Affordances (U), Code Affordances (N), Data Stores (S), Places (blocking test, hierarchy), Wiring (control flow vs data flow), affordance naming rules, component boundary indicators, vertical slicing rules.\n\n## Three Core Concepts\n\n| Element | Symbol | What It Represents | Example |\n|---------|--------|---------------------|---------|\n| UI Affordance | `U` | Things users see and interact with | Customer Combobox, \"Save as Draft\" button |\n| Code Affordance | `N` | Functions that execute when triggered | `calculateLineTotal()`, `filterQuotes()` |\n| Data Store | `S` | State that persists and gets read/written | URL params, form state, mock data imports |\n\n## Workflow Integration\n\nBreadboarding is now **Phase 2.5** in the vertical-by-vertical methodology, sitting between Scope Definition and Build Execution:\n\n```\nDiscovery -> Scope Definition -> Breadboarding -> Build Execution -> Demo & Iteration\n```\n\n### What Changed\n\n| File | Change |\n|------|--------|\n| `.claude/skills/breadboarding/` | Created: SKILL.md, templates/, reference/ |\n| `docs/breadboards/` | Created: output directory for breadboard documents |\n| `vertical-by-vertical-strategy.md` | Added Phase 2.5: Breadboarding (with 2.5.1 and 2.5.2 sub-steps) |\n| `CLAUDE.md` | Architecture, pre-build ritual, skills table, orchestration patterns |\n| `frontend-builder.md` | Added breadboarding to skills, breadboard-first startup sequence |\n| `docs/AGENTS.md` | Vertical Build Chain pattern (Pattern 1), 5 orchestration patterns |\n| `progress.txt` | Skill count 6 -> 8, session log entry, breadboard as build step 1 |\n| `MEMORY.md` | Updated skill count, 5-phase methodology, shaping skills status |\n| `STRATEGY_README.md` | Added breadboarding phase section, updated document statuses |\n\n## Next Step\n\nCreate the **Quoting Breadboard** (`docs/breadboards/quoting-breadboard.md`) by running the breadboarding skill against the scope definition and improved journey design. This will produce the build blueprint for the frontend-builder agent to consume.","src/content/sessions/2026-02-08-breadboarding-skill.md","196a2bdff65e16be",{"html":256,"metadata":257},"\u003Ch2 id=\"why-this-decision\">Why This Decision\u003C/h2>\n\u003Cp>On Feb 7, we evaluated Ryan Singer’s shaping-skills methodology and deferred breadboarding to Phase 2. The reasoning was sound at the time: we were using a linear 10-step implementation plan and breadboarding seemed like over-engineering for simple screens.\u003C/p>\n\u003Cp>On Feb 8, we pivoted to \u003Cstrong>vertical-by-vertical development\u003C/strong>. This changed the equation significantly:\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Verticals are complex\u003C/strong> — each has 3+ screens with interconnected affordances, shared state, and wiring between pages\u003C/li>\n\u003Cli>\u003Cstrong>The breadboarding README literally says\u003C/strong> “Good for slicing into vertical scopes” — it was designed for exactly this workflow\u003C/li>\n\u003Cli>\u003Cstrong>Phase 2 will add backend\u003C/strong> — breadboards become even more valuable when mapping UI-to-API-to-database wiring\u003C/li>\n\u003Cli>\u003Cstrong>Consistency pays compound interest\u003C/strong> — having a structured planning step between scope and build prevents discovering wiring issues during implementation\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"what-was-created\">What Was Created\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Stat\u003C/th>\u003Cth>Value\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>Skill Files\u003C/td>\u003Ctd>3\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Workflow Steps\u003C/td>\u003Ctd>9\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Total Skills\u003C/td>\u003Ctd>8\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch3 id=\"skill-files\">Skill Files\u003C/h3>\n\u003Ch3 id=\"skillmd\">SKILL.md\u003C/h3>\n\u003Cp>Main skill definition with 9-step workflow: Read Inputs -> Identify Places -> Map UI Affordances -> Map Code Affordances -> Map Data Stores -> Verify Wiring -> Identify Component Boundaries -> Define Build Order -> Write Breadboard Document. Includes quality gate checklist and Phase 1/Phase 2 awareness.\u003C/p>\n\u003Ch3 id=\"templatesbreadboard-templatemd\">templates/breadboard-template.md\u003C/h3>\n\u003Cp>Output template with YAML frontmatter (depends-on linking to scope definition and journey design). Sections: Places, UI Affordances, Code Affordances, Data Stores, Wiring Verification, Component Boundaries, Build Order, Scope Coverage, Phase 2 Extensions.\u003C/p>\n\u003Ch3 id=\"referenceconceptsmd\">reference/concepts.md\u003C/h3>\n\u003Cp>Key concepts reference: UI Affordances (U), Code Affordances (N), Data Stores (S), Places (blocking test, hierarchy), Wiring (control flow vs data flow), affordance naming rules, component boundary indicators, vertical slicing rules.\u003C/p>\n\u003Ch2 id=\"three-core-concepts\">Three Core Concepts\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Element\u003C/th>\u003Cth>Symbol\u003C/th>\u003Cth>What It Represents\u003C/th>\u003Cth>Example\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>UI Affordance\u003C/td>\u003Ctd>\u003Ccode>U\u003C/code>\u003C/td>\u003Ctd>Things users see and interact with\u003C/td>\u003Ctd>Customer Combobox, “Save as Draft” button\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Code Affordance\u003C/td>\u003Ctd>\u003Ccode>N\u003C/code>\u003C/td>\u003Ctd>Functions that execute when triggered\u003C/td>\u003Ctd>\u003Ccode>calculateLineTotal()\u003C/code>, \u003Ccode>filterQuotes()\u003C/code>\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Data Store\u003C/td>\u003Ctd>\u003Ccode>S\u003C/code>\u003C/td>\u003Ctd>State that persists and gets read/written\u003C/td>\u003Ctd>URL params, form state, mock data imports\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"workflow-integration\">Workflow Integration\u003C/h2>\n\u003Cp>Breadboarding is now \u003Cstrong>Phase 2.5\u003C/strong> in the vertical-by-vertical methodology, sitting between Scope Definition and Build Execution:\u003C/p>\n\u003Cpre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>Discovery -> Scope Definition -> Breadboarding -> Build Execution -> Demo &#x26; Iteration\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"what-changed\">What Changed\u003C/h3>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>File\u003C/th>\u003Cth>Change\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>\u003Ccode>.claude/skills/breadboarding/\u003C/code>\u003C/td>\u003Ctd>Created: SKILL.md, templates/, reference/\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>docs/breadboards/\u003C/code>\u003C/td>\u003Ctd>Created: output directory for breadboard documents\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>vertical-by-vertical-strategy.md\u003C/code>\u003C/td>\u003Ctd>Added Phase 2.5: Breadboarding (with 2.5.1 and 2.5.2 sub-steps)\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>CLAUDE.md\u003C/code>\u003C/td>\u003Ctd>Architecture, pre-build ritual, skills table, orchestration patterns\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>frontend-builder.md\u003C/code>\u003C/td>\u003Ctd>Added breadboarding to skills, breadboard-first startup sequence\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>docs/AGENTS.md\u003C/code>\u003C/td>\u003Ctd>Vertical Build Chain pattern (Pattern 1), 5 orchestration patterns\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>progress.txt\u003C/code>\u003C/td>\u003Ctd>Skill count 6 -> 8, session log entry, breadboard as build step 1\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>MEMORY.md\u003C/code>\u003C/td>\u003Ctd>Updated skill count, 5-phase methodology, shaping skills status\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>STRATEGY_README.md\u003C/code>\u003C/td>\u003Ctd>Added breadboarding phase section, updated document statuses\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"next-step\">Next Step\u003C/h2>\n\u003Cp>Create the \u003Cstrong>Quoting Breadboard\u003C/strong> (\u003Ccode>docs/breadboards/quoting-breadboard.md\u003C/code>) by running the breadboarding skill against the scope definition and improved journey design. This will produce the build blueprint for the frontend-builder agent to consume.\u003C/p>",{"headings":258,"localImagePaths":289,"remoteImagePaths":290,"frontmatter":291,"imagePaths":295},[259,262,265,268,271,274,277,280,283,286],{"depth":34,"slug":260,"text":261},"why-this-decision","Why This Decision",{"depth":34,"slug":263,"text":264},"what-was-created","What Was Created",{"depth":40,"slug":266,"text":267},"skill-files","Skill Files",{"depth":40,"slug":269,"text":270},"skillmd","SKILL.md",{"depth":40,"slug":272,"text":273},"templatesbreadboard-templatemd","templates/breadboard-template.md",{"depth":40,"slug":275,"text":276},"referenceconceptsmd","reference/concepts.md",{"depth":34,"slug":278,"text":279},"three-core-concepts","Three Core Concepts",{"depth":34,"slug":281,"text":282},"workflow-integration","Workflow Integration",{"depth":40,"slug":284,"text":285},"what-changed","What Changed",{"depth":34,"slug":287,"text":288},"next-step","Next Step",[],[],{"title":246,"subtitle":247,"date":292,"phase":17,"vertical":18,"verticalSecondary":293,"stage":75,"tags":294,"sessionId":190,"branch":251,"status":25},["Date","2026-02-08T00:00:00.000Z"],[185],[77,22],[],"2026-02-07-ci-testing",{"id":296,"data":298,"body":307,"filePath":308,"digest":309,"rendered":310},{"title":299,"subtitle":300,"date":301,"phase":17,"vertical":18,"verticalSecondary":302,"stage":75,"tags":303,"sessionId":305,"branch":306,"status":25},"CI & Testing Setup","GitHub Actions CI workflow, Vitest schema tests, and mock data UUID fix. Catches build/lint/type/test failures on every push and PR.",["Date","2026-02-07T00:00:00.000Z"],[],[77,75,304],"learning","29d21a39-94a9-4cb3-8ac1-bcc442a85d68","infra/ci-testing-setup","## What Was Built\n\n### GitHub Actions CI\n\nRuns on every push/PR to `main`. Four sequential checks:\n\n| Step | Command | Catches |\n|------|---------|---------|\n| Type check | `tsc --noEmit` | TypeScript errors |\n| Lint | `eslint` | Code quality issues |\n| Test | `vitest run` | Schema validation failures |\n| Build | `next build` | Broken imports, bad JSX |\n\nFile: `.github/workflows/ci.yml`\n\n### Vitest Schema Tests\n\n66 tests across 6 test files:\n\n| File | Tests | Validates |\n|------|-------|-----------|\n| garment.test.ts | 8 | Valid garment, empty strings, negative/fractional sizes |\n| customer.test.ts | 6 | Valid customer, invalid UUID, invalid email |\n| job.test.ts | 21 | All 6 production states, 4 priorities, print locations |\n| quote.test.ts | 14 | All 4 statuses, line items, negative prices, datetime |\n| screen.test.ts | 10 | All 3 burn statuses, mesh count, UUID validation |\n| mock-data.test.ts | 7 | All mock data parses, referential integrity (FK links) |\n\nTests live in `lib/schemas/__tests__/`\n\n---\n\n## Bug Discovered & Fixed\n\n**Bug: Mock Data UUIDs Invalid**\n\nThe schema tests immediately caught that **8 mock data UUIDs** were not RFC-4122 compliant. Zod v4 validates the full UUID format strictly:\n\n- **Version byte** (3rd group): must start with `1-8`\n- **Variant byte** (4th group): must start with `8`, `9`, `a`, or `b`\n\nHand-crafted UUIDs like `q1a2b3c4-...` and `s1a2b3c4-...` used non-hex characters (`q`, `s`) and invalid variant bytes (`0`, `1`, `2`, `3`). All 8 were fixed in `lib/mock-data.ts`.\n\nThis validates the decision to test schemas early -- these would have broken Phase 3 backend validation silently.\n\n---\n\n## Docs Updated\n\n- `CLAUDE.md` -- Added `npm test` and `npm run test:watch` to Commands, Zod UUID lesson to Lessons Learned\n- `docs/TECH_STACK.md` -- Added Testing section with Vitest entry\n- `progress.txt` -- Added CI + Testing infrastructure and session log\n\n---\n\n## Decision Rationale\n\nPhase 1 is a UI mockup -- testing strategy is intentionally minimal and targeted:\n\n- **Schema tests now**: High ROI -- schemas carry forward to Phase 3 backend. 66 tests cost minutes to write.\n- **E2E deferred**: UI changes heavily at each checkpoint. Writing Playwright tests now means rewriting after every review.\n- **Component tests skipped**: The components ARE the deliverable and they're changing rapidly. Negative ROI.\n- **No Claude Code hooks**: CI catches the same issues asynchronously. Hooks add friction during rapid prototyping.","src/content/sessions/2026-02-07-ci-testing.md","e645e62a2c15014d",{"html":311,"metadata":312},"\u003Ch2 id=\"what-was-built\">What Was Built\u003C/h2>\n\u003Ch3 id=\"github-actions-ci\">GitHub Actions CI\u003C/h3>\n\u003Cp>Runs on every push/PR to \u003Ccode>main\u003C/code>. Four sequential checks:\u003C/p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Step\u003C/th>\u003Cth>Command\u003C/th>\u003Cth>Catches\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>Type check\u003C/td>\u003Ctd>\u003Ccode>tsc --noEmit\u003C/code>\u003C/td>\u003Ctd>TypeScript errors\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Lint\u003C/td>\u003Ctd>\u003Ccode>eslint\u003C/code>\u003C/td>\u003Ctd>Code quality issues\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Test\u003C/td>\u003Ctd>\u003Ccode>vitest run\u003C/code>\u003C/td>\u003Ctd>Schema validation failures\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Build\u003C/td>\u003Ctd>\u003Ccode>next build\u003C/code>\u003C/td>\u003Ctd>Broken imports, bad JSX\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Cp>File: \u003Ccode>.github/workflows/ci.yml\u003C/code>\u003C/p>\n\u003Ch3 id=\"vitest-schema-tests\">Vitest Schema Tests\u003C/h3>\n\u003Cp>66 tests across 6 test files:\u003C/p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>File\u003C/th>\u003Cth>Tests\u003C/th>\u003Cth>Validates\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>garment.test.ts\u003C/td>\u003Ctd>8\u003C/td>\u003Ctd>Valid garment, empty strings, negative/fractional sizes\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>customer.test.ts\u003C/td>\u003Ctd>6\u003C/td>\u003Ctd>Valid customer, invalid UUID, invalid email\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>job.test.ts\u003C/td>\u003Ctd>21\u003C/td>\u003Ctd>All 6 production states, 4 priorities, print locations\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>quote.test.ts\u003C/td>\u003Ctd>14\u003C/td>\u003Ctd>All 4 statuses, line items, negative prices, datetime\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>screen.test.ts\u003C/td>\u003Ctd>10\u003C/td>\u003Ctd>All 3 burn statuses, mesh count, UUID validation\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>mock-data.test.ts\u003C/td>\u003Ctd>7\u003C/td>\u003Ctd>All mock data parses, referential integrity (FK links)\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Cp>Tests live in \u003Ccode>lib/schemas/__tests__/\u003C/code>\u003C/p>\n\u003Chr>\n\u003Ch2 id=\"bug-discovered--fixed\">Bug Discovered &#x26; Fixed\u003C/h2>\n\u003Cp>\u003Cstrong>Bug: Mock Data UUIDs Invalid\u003C/strong>\u003C/p>\n\u003Cp>The schema tests immediately caught that \u003Cstrong>8 mock data UUIDs\u003C/strong> were not RFC-4122 compliant. Zod v4 validates the full UUID format strictly:\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Version byte\u003C/strong> (3rd group): must start with \u003Ccode>1-8\u003C/code>\u003C/li>\n\u003Cli>\u003Cstrong>Variant byte\u003C/strong> (4th group): must start with \u003Ccode>8\u003C/code>, \u003Ccode>9\u003C/code>, \u003Ccode>a\u003C/code>, or \u003Ccode>b\u003C/code>\u003C/li>\n\u003C/ul>\n\u003Cp>Hand-crafted UUIDs like \u003Ccode>q1a2b3c4-...\u003C/code> and \u003Ccode>s1a2b3c4-...\u003C/code> used non-hex characters (\u003Ccode>q\u003C/code>, \u003Ccode>s\u003C/code>) and invalid variant bytes (\u003Ccode>0\u003C/code>, \u003Ccode>1\u003C/code>, \u003Ccode>2\u003C/code>, \u003Ccode>3\u003C/code>). All 8 were fixed in \u003Ccode>lib/mock-data.ts\u003C/code>.\u003C/p>\n\u003Cp>This validates the decision to test schemas early — these would have broken Phase 3 backend validation silently.\u003C/p>\n\u003Chr>\n\u003Ch2 id=\"docs-updated\">Docs Updated\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Ccode>CLAUDE.md\u003C/code> — Added \u003Ccode>npm test\u003C/code> and \u003Ccode>npm run test:watch\u003C/code> to Commands, Zod UUID lesson to Lessons Learned\u003C/li>\n\u003Cli>\u003Ccode>docs/TECH_STACK.md\u003C/code> — Added Testing section with Vitest entry\u003C/li>\n\u003Cli>\u003Ccode>progress.txt\u003C/code> — Added CI + Testing infrastructure and session log\u003C/li>\n\u003C/ul>\n\u003Chr>\n\u003Ch2 id=\"decision-rationale\">Decision Rationale\u003C/h2>\n\u003Cp>Phase 1 is a UI mockup — testing strategy is intentionally minimal and targeted:\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Schema tests now\u003C/strong>: High ROI — schemas carry forward to Phase 3 backend. 66 tests cost minutes to write.\u003C/li>\n\u003Cli>\u003Cstrong>E2E deferred\u003C/strong>: UI changes heavily at each checkpoint. Writing Playwright tests now means rewriting after every review.\u003C/li>\n\u003Cli>\u003Cstrong>Component tests skipped\u003C/strong>: The components ARE the deliverable and they’re changing rapidly. Negative ROI.\u003C/li>\n\u003Cli>\u003Cstrong>No Claude Code hooks\u003C/strong>: CI catches the same issues asynchronously. Hooks add friction during rapid prototyping.\u003C/li>\n\u003C/ul>",{"headings":313,"localImagePaths":328,"remoteImagePaths":329,"frontmatter":330,"imagePaths":334},[314,315,318,321,324,327],{"depth":34,"slug":138,"text":139},{"depth":40,"slug":316,"text":317},"github-actions-ci","GitHub Actions CI",{"depth":40,"slug":319,"text":320},"vitest-schema-tests","Vitest Schema Tests",{"depth":34,"slug":322,"text":323},"bug-discovered--fixed","Bug Discovered & Fixed",{"depth":34,"slug":325,"text":326},"docs-updated","Docs Updated",{"depth":34,"slug":112,"text":113},[],[],{"title":299,"subtitle":300,"date":331,"phase":17,"vertical":18,"verticalSecondary":332,"stage":75,"tags":333,"sessionId":305,"branch":306,"status":25},["Date","2026-02-07T00:00:00.000Z"],[],[77,75,304],[],"2026-02-08-quoting-build",{"id":335,"data":337,"body":345,"filePath":346,"digest":347,"rendered":348},{"title":338,"subtitle":339,"date":340,"phase":17,"vertical":185,"verticalSecondary":341,"stage":75,"tags":342,"sessionId":343,"pr":344,"status":25},"Quoting Vertical Build","Complete implementation of the Quoting vertical — 3 pages, 15+ components, artwork system, flat pricing model, collapsible form sections. Built with parallel agents, polished via CodeRabbit review.",["Date","2026-02-08T00:00:00.000Z"],[],[77,75],"13546e08-2ee1-4de3-94a7-c2a596a15e1a","#13,#14,#20","| Metric | Value |\n|--------|-------|\n| 172 | Tests Passing |\n| 0 | Lint Warnings |\n| 15+ | Components |\n| 3 | Pages |\n\n## Verification\n\n- TypeScript — 0 errors\n- ESLint — 0 errors, 0 warnings\n- Tests — 172/172 pass\n- Build — production success\n\n## Pull Requests\n\n### [PR #13](https://github.com/cmbays/print-4ink/pull/13) — feat: Build complete Quoting vertical\n\nInitial build: 3 pages, 4 reusable components, expanded data layer. 31 files, 3,874 insertions. **Merged.**\n\n### [PR #14](https://github.com/cmbays/print-4ink/pull/14) — feat: Quoting patch v2 — pricing, artwork, form UX\n\n20 feedback items: artwork system, customer tags, service types, discount model, flat setup fees, collapsible sections, sticky top bar, CodeRabbit review fixes. **Merged.**\n\n### [PR #20](https://github.com/cmbays/print-4ink/pull/20) — feat: Quoting patch v3 — sticky bar, pricing, tooltips\n\nSticky bar redesign (single-row service type layout with inline color swatches), pricing formula with info tooltip in review view, artwork-derived color counts, tooltip dark mode + hover fixes, removed Edit Quote from review slide-out. CodeRabbit fixes (icon sizes). **Merged.**\n\n## Pages Built\n\n### /quotes — Quotes List\n\nDataTable with status tab filters (All/Draft/Sent/Accepted/Declined/Revised), debounced search, column sorting, customer tag badges, row action dropdown (View/Edit/Copy as New/Send), empty state with CTA.\n\n### /quotes/new — New Quote Form\n\nSingle-page form with 5 collapsible sections: Customer (combobox with tag badges) → Artwork (customer-tag-aware library) → Garments & Print (service type per item, per-location details with artwork assignment) → Pricing (discounts, shipping, tax, savings banner) → Notes. Sticky top bar with customer, artwork thumbnails, and grand total. \"Review & Send\" opens full-screen sheet.\n\n### /quotes/[id] — Quote Detail\n\nRead-only view with inline action header bar (Edit/Copy as New/Send/Email Preview). Service type badges, per-location color counts with artwork thumbnails, full pricing breakdown with discount visibility, artwork previews on garment swatches.\n\n## Key Features\n\n### Artwork System\n\nTwo-tier library: customer artwork library + per-quote curated set. Customer-tag-aware: new customers see upload dropzone, repeat see recently-used first, contract see full grid with search + tag filters. Per-location artwork assignment with inline picker. Artwork preview on garment color swatches.\n\n### Flat Setup Fee Pricing\n\nScreen-print: $40 flat per quote. Embroidery: $20 per line item. DTF: no setup fee. Full breakdown: garment cost + decoration cost + setup fees + discounts + shipping + tax = grand total. Contract customers get auto-applied 7% discount + free shipping. Savings banner with crossed-out original prices.\n\n### Service Types & Customer Tags\n\n3 service types per line item: screen-print, DTF, embroidery. 3 customer tags: new, repeat, contract. Tags drive smart defaults: auto-discounts, artwork library mode, shipping behavior. Per-location print details with color count and artwork assignment.\n\n### Discount Model\n\nReplaces flat price override. Discount types: manual, contract, volume. Each has label + amount. Add/remove in form. \"You save $X!\" banner when discounts exist. Contract pricing auto-applied when contract customer selected.\n\n## Components (15+)\n\n| Component | Description |\n|-----------|-------------|\n| **ColorSwatchPicker** | S&S Activewear-style dense swatch grid. 42 colors, search, favorites, keyboard nav, ARIA. |\n| **CustomerCombobox** | Type-ahead search with tag badges, phone display, info card. \"Add New Customer\" modal. |\n| **ArtworkLibrary** | Customer-tag-aware grid. Search + tag filters for contract, recently-used for repeat, upload dropzone for new. |\n| **ArtworkUploadModal** | Mock upload with name, color count, tag multi-select, save-to-library toggle. |\n| **ArtworkAssignmentPicker** | Per-location inline dropdown from quote's curated artwork set. Mini thumbnails. |\n| **ArtworkPreview** | Garment color swatch rectangle with artwork thumbnail overlay. |\n| **CollapsibleSection** | Accordion wrapper with title, icon, summary when collapsed, completion checkmark. Controlled mode for programmatic open/close. |\n| **PricingSummary** | Full breakdown: subtotal, setup fees, discounts (add/remove), shipping (FREE badge), tax, grand total, savings banner. |\n| **DiscountRow** | Editable row with label, amount, type badge, delete button. Reused in form and detail views. |\n| **QuoteDetailView** | Reusable for detail page and review sheet. Service type badges, per-location details, artwork previews. |\n| **QuoteReviewSheet** | Full-screen Sheet (slides from right). Shows quote preview before sending. Keeps form state intact. |\n| **EmailPreviewModal** | Email preview with pricing breakdown. Mock send with toast confirmation. |\n| **StatusBadge** | Semantic color mapping: Draft=muted, Sent=action, Accepted=success, Declined=error, Revised=warning. |\n\n## Data Layer\n\n| Schema | Details |\n|--------|---------|\n| **artwork.ts** (new) | Artwork with customerId, name, fileName, thumbnailUrl, colorCount, tags[], createdAt, lastUsedAt. |\n| **color.ts** (new) | 42 mock colors with hex, swatchTextColor, family, isFavorite. Mirrors S&S Activewear API shapes. |\n| **quote.ts** | Service types, per-location printLocationDetails (location, colorCount, setupFee, artworkId), discounts[] (label, amount, type), shipping, tax, artworkIds[]. |\n| **customer.ts** | Added customerTagEnum (\"new\" \\| \"repeat\" \\| \"contract\") with behavior differentiation. |\n| **garment.ts** | Catalog with brand, SKU, name, basePrice, availableColors, availableSizes. |\n| **mock-data.ts** | 5 customers (with tags), 42 colors, 5 garments, 6 quotes (all statuses, discount examples), 8 artworks, 8 SVG placeholders. |\n\n## Build Approach\n\n### PR #13 — Initial Build (6 parallel agents)\n\nUsed git worktree for isolation and TeamCreate for parallel agent orchestration:\n\n- **Phase A** (4 agents): schema-agent (schemas + mock data + 116 tests), swatch-agent (ColorSwatchPicker), combobox-agent (CustomerCombobox + AddCustomerModal), list-agent (QuotesDataTable + StatusBadge)\n- **Phase B** (2 agents): form-agent (QuoteForm + LineItemRow + PricingSummary), detail-agent (quote detail + QuoteActions + EmailPreviewModal)\n\n### PR #14 — Patch v2 (20 feedback items)\n\nAddressed first-round feedback from 4Ink. Phased build (A through F) with targeted fixes:\n\n- **Phase A**: New artwork schema, customer tags, service types, per-location details, discount model, shipping/tax, mock data overhaul, 2 bug fixes (duplicate + search)\n- **Phase B**: PricingSummary redesign, DiscountRow, LineItemRow rewrite, CustomerCombobox tags\n- **Phase C**: ArtworkLibrary, ArtworkUploadModal, ArtworkAssignmentPicker\n- **Phase D**: CollapsibleSection, form restructure, customer-aware defaults\n- **Phase E**: QuoteDetailView extraction, QuoteReviewSheet, detail page update\n- **Phase F**: ArtworkPreview, discount visibility polish, sticky top bar, flat setup fee model, CodeRabbit review fixes (17 items: icon sizes, a11y, design tokens, lint)\n\n### PR #20 — Patch v3 (sticky bar, pricing, tooltips)\n\nIterative polish session focused on sticky bar UX, tooltip behavior, and pricing clarity:\n\n- **Sticky bar redesign**: Collapsed multi-row service type layout into single inline row with color swatches + qty labels separated by pipe (`[swatch][swatch] 455 Screen Print | [swatch] 700 DTF`). Added artwork thumbnail icons, discount badge, notes icon with tooltips.\n- **Tooltip system**: Fixed dark mode styling (bg-elevated), hover/flickering bugs (shared TooltipProvider, sideOffset gap, pointer-events-none on closing state), swatch tooltips with garment + sizes + print locations, artwork tooltips with large preview images.\n- **Pricing formula**: Review view line items now show `($13.50 x 562 qty) + $40 setup = $7,627.00` with info icon tooltip explaining per-unit cost breakdown and setup fee rates per service type.\n- **Color count from artwork**: Removed manual color count input. Color count auto-derived from assigned artwork. Resets when artwork removed or customer changed.\n- **Review slide-out**: Added grand total to sticky header. Removed Edit Quote button (close via X or click-away).\n- **CodeRabbit fixes**: Icon sizes (size-12 → size-6) in empty state placeholders.\n\n## Deferred Tech Debt\n\nTracked as GitHub issues for future sessions:\n\n- [#15](https://github.com/cmbays/print-4ink/issues/15) — Migrate forms to React Hook Form + Zod (QuoteForm, ArtworkUploadModal, AddCustomerModal)\n- [#16](https://github.com/cmbays/print-4ink/issues/16) — Replace local LineItemRow interfaces with schema-derived types\n- [#17](https://github.com/cmbays/print-4ink/issues/17) — Sync garment category filter with URL query params\n- [#18](https://github.com/cmbays/print-4ink/issues/18) — Extract shared formatCurrency/formatDate to lib/utils\n\n## Next Steps\n\n1. Run quality-gate audit on all 3 screens\n2. Demo to 4Ink owner, collect feedback\n3. Iterate on feedback (target: 8+ rating on Clarity, Speed, Polish, Value)\n4. Address deferred tech debt (#15-#18) as needed\n5. Move to Invoicing vertical","src/content/sessions/2026-02-08-quoting-build.md","46628062bcf270a4",{"html":349,"metadata":350},"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Metric\u003C/th>\u003Cth>Value\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>172\u003C/td>\u003Ctd>Tests Passing\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>0\u003C/td>\u003Ctd>Lint Warnings\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>15+\u003C/td>\u003Ctd>Components\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>3\u003C/td>\u003Ctd>Pages\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"verification\">Verification\u003C/h2>\n\u003Cul>\n\u003Cli>TypeScript — 0 errors\u003C/li>\n\u003Cli>ESLint — 0 errors, 0 warnings\u003C/li>\n\u003Cli>Tests — 172/172 pass\u003C/li>\n\u003Cli>Build — production success\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"pull-requests\">Pull Requests\u003C/h2>\n\u003Ch3 id=\"pr-13--feat-build-complete-quoting-vertical\">\u003Ca href=\"https://github.com/cmbays/print-4ink/pull/13\">PR #13\u003C/a> — feat: Build complete Quoting vertical\u003C/h3>\n\u003Cp>Initial build: 3 pages, 4 reusable components, expanded data layer. 31 files, 3,874 insertions. \u003Cstrong>Merged.\u003C/strong>\u003C/p>\n\u003Ch3 id=\"pr-14--feat-quoting-patch-v2--pricing-artwork-form-ux\">\u003Ca href=\"https://github.com/cmbays/print-4ink/pull/14\">PR #14\u003C/a> — feat: Quoting patch v2 — pricing, artwork, form UX\u003C/h3>\n\u003Cp>20 feedback items: artwork system, customer tags, service types, discount model, flat setup fees, collapsible sections, sticky top bar, CodeRabbit review fixes. \u003Cstrong>Merged.\u003C/strong>\u003C/p>\n\u003Ch3 id=\"pr-20--feat-quoting-patch-v3--sticky-bar-pricing-tooltips\">\u003Ca href=\"https://github.com/cmbays/print-4ink/pull/20\">PR #20\u003C/a> — feat: Quoting patch v3 — sticky bar, pricing, tooltips\u003C/h3>\n\u003Cp>Sticky bar redesign (single-row service type layout with inline color swatches), pricing formula with info tooltip in review view, artwork-derived color counts, tooltip dark mode + hover fixes, removed Edit Quote from review slide-out. CodeRabbit fixes (icon sizes). \u003Cstrong>Merged.\u003C/strong>\u003C/p>\n\u003Ch2 id=\"pages-built\">Pages Built\u003C/h2>\n\u003Ch3 id=\"quotes--quotes-list\">/quotes — Quotes List\u003C/h3>\n\u003Cp>DataTable with status tab filters (All/Draft/Sent/Accepted/Declined/Revised), debounced search, column sorting, customer tag badges, row action dropdown (View/Edit/Copy as New/Send), empty state with CTA.\u003C/p>\n\u003Ch3 id=\"quotesnew--new-quote-form\">/quotes/new — New Quote Form\u003C/h3>\n\u003Cp>Single-page form with 5 collapsible sections: Customer (combobox with tag badges) → Artwork (customer-tag-aware library) → Garments &#x26; Print (service type per item, per-location details with artwork assignment) → Pricing (discounts, shipping, tax, savings banner) → Notes. Sticky top bar with customer, artwork thumbnails, and grand total. “Review &#x26; Send” opens full-screen sheet.\u003C/p>\n\u003Ch3 id=\"quotesid--quote-detail\">/quotes/[id] — Quote Detail\u003C/h3>\n\u003Cp>Read-only view with inline action header bar (Edit/Copy as New/Send/Email Preview). Service type badges, per-location color counts with artwork thumbnails, full pricing breakdown with discount visibility, artwork previews on garment swatches.\u003C/p>\n\u003Ch2 id=\"key-features\">Key Features\u003C/h2>\n\u003Ch3 id=\"artwork-system\">Artwork System\u003C/h3>\n\u003Cp>Two-tier library: customer artwork library + per-quote curated set. Customer-tag-aware: new customers see upload dropzone, repeat see recently-used first, contract see full grid with search + tag filters. Per-location artwork assignment with inline picker. Artwork preview on garment color swatches.\u003C/p>\n\u003Ch3 id=\"flat-setup-fee-pricing\">Flat Setup Fee Pricing\u003C/h3>\n\u003Cp>Screen-print: $40 flat per quote. Embroidery: $20 per line item. DTF: no setup fee. Full breakdown: garment cost + decoration cost + setup fees + discounts + shipping + tax = grand total. Contract customers get auto-applied 7% discount + free shipping. Savings banner with crossed-out original prices.\u003C/p>\n\u003Ch3 id=\"service-types--customer-tags\">Service Types &#x26; Customer Tags\u003C/h3>\n\u003Cp>3 service types per line item: screen-print, DTF, embroidery. 3 customer tags: new, repeat, contract. Tags drive smart defaults: auto-discounts, artwork library mode, shipping behavior. Per-location print details with color count and artwork assignment.\u003C/p>\n\u003Ch3 id=\"discount-model\">Discount Model\u003C/h3>\n\u003Cp>Replaces flat price override. Discount types: manual, contract, volume. Each has label + amount. Add/remove in form. “You save $X!” banner when discounts exist. Contract pricing auto-applied when contract customer selected.\u003C/p>\n\u003Ch2 id=\"components-15\">Components (15+)\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Component\u003C/th>\u003Cth>Description\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>\u003Cstrong>ColorSwatchPicker\u003C/strong>\u003C/td>\u003Ctd>S&#x26;S Activewear-style dense swatch grid. 42 colors, search, favorites, keyboard nav, ARIA.\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>CustomerCombobox\u003C/strong>\u003C/td>\u003Ctd>Type-ahead search with tag badges, phone display, info card. “Add New Customer” modal.\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>ArtworkLibrary\u003C/strong>\u003C/td>\u003Ctd>Customer-tag-aware grid. Search + tag filters for contract, recently-used for repeat, upload dropzone for new.\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>ArtworkUploadModal\u003C/strong>\u003C/td>\u003Ctd>Mock upload with name, color count, tag multi-select, save-to-library toggle.\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>ArtworkAssignmentPicker\u003C/strong>\u003C/td>\u003Ctd>Per-location inline dropdown from quote’s curated artwork set. Mini thumbnails.\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>ArtworkPreview\u003C/strong>\u003C/td>\u003Ctd>Garment color swatch rectangle with artwork thumbnail overlay.\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>CollapsibleSection\u003C/strong>\u003C/td>\u003Ctd>Accordion wrapper with title, icon, summary when collapsed, completion checkmark. Controlled mode for programmatic open/close.\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>PricingSummary\u003C/strong>\u003C/td>\u003Ctd>Full breakdown: subtotal, setup fees, discounts (add/remove), shipping (FREE badge), tax, grand total, savings banner.\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>DiscountRow\u003C/strong>\u003C/td>\u003Ctd>Editable row with label, amount, type badge, delete button. Reused in form and detail views.\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>QuoteDetailView\u003C/strong>\u003C/td>\u003Ctd>Reusable for detail page and review sheet. Service type badges, per-location details, artwork previews.\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>QuoteReviewSheet\u003C/strong>\u003C/td>\u003Ctd>Full-screen Sheet (slides from right). Shows quote preview before sending. Keeps form state intact.\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>EmailPreviewModal\u003C/strong>\u003C/td>\u003Ctd>Email preview with pricing breakdown. Mock send with toast confirmation.\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>StatusBadge\u003C/strong>\u003C/td>\u003Ctd>Semantic color mapping: Draft=muted, Sent=action, Accepted=success, Declined=error, Revised=warning.\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"data-layer\">Data Layer\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Schema\u003C/th>\u003Cth>Details\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>\u003Cstrong>artwork.ts\u003C/strong> (new)\u003C/td>\u003Ctd>Artwork with customerId, name, fileName, thumbnailUrl, colorCount, tags[], createdAt, lastUsedAt.\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>color.ts\u003C/strong> (new)\u003C/td>\u003Ctd>42 mock colors with hex, swatchTextColor, family, isFavorite. Mirrors S&#x26;S Activewear API shapes.\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>quote.ts\u003C/strong>\u003C/td>\u003Ctd>Service types, per-location printLocationDetails (location, colorCount, setupFee, artworkId), discounts[] (label, amount, type), shipping, tax, artworkIds[].\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>customer.ts\u003C/strong>\u003C/td>\u003Ctd>Added customerTagEnum (“new” | “repeat” | “contract”) with behavior differentiation.\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>garment.ts\u003C/strong>\u003C/td>\u003Ctd>Catalog with brand, SKU, name, basePrice, availableColors, availableSizes.\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>mock-data.ts\u003C/strong>\u003C/td>\u003Ctd>5 customers (with tags), 42 colors, 5 garments, 6 quotes (all statuses, discount examples), 8 artworks, 8 SVG placeholders.\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"build-approach\">Build Approach\u003C/h2>\n\u003Ch3 id=\"pr-13--initial-build-6-parallel-agents\">PR #13 — Initial Build (6 parallel agents)\u003C/h3>\n\u003Cp>Used git worktree for isolation and TeamCreate for parallel agent orchestration:\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Phase A\u003C/strong> (4 agents): schema-agent (schemas + mock data + 116 tests), swatch-agent (ColorSwatchPicker), combobox-agent (CustomerCombobox + AddCustomerModal), list-agent (QuotesDataTable + StatusBadge)\u003C/li>\n\u003Cli>\u003Cstrong>Phase B\u003C/strong> (2 agents): form-agent (QuoteForm + LineItemRow + PricingSummary), detail-agent (quote detail + QuoteActions + EmailPreviewModal)\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"pr-14--patch-v2-20-feedback-items\">PR #14 — Patch v2 (20 feedback items)\u003C/h3>\n\u003Cp>Addressed first-round feedback from 4Ink. Phased build (A through F) with targeted fixes:\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Phase A\u003C/strong>: New artwork schema, customer tags, service types, per-location details, discount model, shipping/tax, mock data overhaul, 2 bug fixes (duplicate + search)\u003C/li>\n\u003Cli>\u003Cstrong>Phase B\u003C/strong>: PricingSummary redesign, DiscountRow, LineItemRow rewrite, CustomerCombobox tags\u003C/li>\n\u003Cli>\u003Cstrong>Phase C\u003C/strong>: ArtworkLibrary, ArtworkUploadModal, ArtworkAssignmentPicker\u003C/li>\n\u003Cli>\u003Cstrong>Phase D\u003C/strong>: CollapsibleSection, form restructure, customer-aware defaults\u003C/li>\n\u003Cli>\u003Cstrong>Phase E\u003C/strong>: QuoteDetailView extraction, QuoteReviewSheet, detail page update\u003C/li>\n\u003Cli>\u003Cstrong>Phase F\u003C/strong>: ArtworkPreview, discount visibility polish, sticky top bar, flat setup fee model, CodeRabbit review fixes (17 items: icon sizes, a11y, design tokens, lint)\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"pr-20--patch-v3-sticky-bar-pricing-tooltips\">PR #20 — Patch v3 (sticky bar, pricing, tooltips)\u003C/h3>\n\u003Cp>Iterative polish session focused on sticky bar UX, tooltip behavior, and pricing clarity:\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Sticky bar redesign\u003C/strong>: Collapsed multi-row service type layout into single inline row with color swatches + qty labels separated by pipe (\u003Ccode>[swatch][swatch] 455 Screen Print | [swatch] 700 DTF\u003C/code>). Added artwork thumbnail icons, discount badge, notes icon with tooltips.\u003C/li>\n\u003Cli>\u003Cstrong>Tooltip system\u003C/strong>: Fixed dark mode styling (bg-elevated), hover/flickering bugs (shared TooltipProvider, sideOffset gap, pointer-events-none on closing state), swatch tooltips with garment + sizes + print locations, artwork tooltips with large preview images.\u003C/li>\n\u003Cli>\u003Cstrong>Pricing formula\u003C/strong>: Review view line items now show \u003Ccode>($13.50 x 562 qty) + $40 setup = $7,627.00\u003C/code> with info icon tooltip explaining per-unit cost breakdown and setup fee rates per service type.\u003C/li>\n\u003Cli>\u003Cstrong>Color count from artwork\u003C/strong>: Removed manual color count input. Color count auto-derived from assigned artwork. Resets when artwork removed or customer changed.\u003C/li>\n\u003Cli>\u003Cstrong>Review slide-out\u003C/strong>: Added grand total to sticky header. Removed Edit Quote button (close via X or click-away).\u003C/li>\n\u003Cli>\u003Cstrong>CodeRabbit fixes\u003C/strong>: Icon sizes (size-12 → size-6) in empty state placeholders.\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"deferred-tech-debt\">Deferred Tech Debt\u003C/h2>\n\u003Cp>Tracked as GitHub issues for future sessions:\u003C/p>\n\u003Cul>\n\u003Cli>\u003Ca href=\"https://github.com/cmbays/print-4ink/issues/15\">#15\u003C/a> — Migrate forms to React Hook Form + Zod (QuoteForm, ArtworkUploadModal, AddCustomerModal)\u003C/li>\n\u003Cli>\u003Ca href=\"https://github.com/cmbays/print-4ink/issues/16\">#16\u003C/a> — Replace local LineItemRow interfaces with schema-derived types\u003C/li>\n\u003Cli>\u003Ca href=\"https://github.com/cmbays/print-4ink/issues/17\">#17\u003C/a> — Sync garment category filter with URL query params\u003C/li>\n\u003Cli>\u003Ca href=\"https://github.com/cmbays/print-4ink/issues/18\">#18\u003C/a> — Extract shared formatCurrency/formatDate to lib/utils\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"next-steps\">Next Steps\u003C/h2>\n\u003Col>\n\u003Cli>Run quality-gate audit on all 3 screens\u003C/li>\n\u003Cli>Demo to 4Ink owner, collect feedback\u003C/li>\n\u003Cli>Iterate on feedback (target: 8+ rating on Clarity, Speed, Polish, Value)\u003C/li>\n\u003Cli>Address deferred tech debt (#15-#18) as needed\u003C/li>\n\u003Cli>Move to Invoicing vertical\u003C/li>\n\u003C/ol>",{"headings":351,"localImagePaths":414,"remoteImagePaths":415,"frontmatter":416,"imagePaths":420},[352,353,356,359,362,365,368,371,374,377,380,383,386,389,392,395,398,401,404,407,410,413],{"depth":34,"slug":167,"text":168},{"depth":34,"slug":354,"text":355},"pull-requests","Pull Requests",{"depth":40,"slug":357,"text":358},"pr-13--feat-build-complete-quoting-vertical","PR #13 — feat: Build complete Quoting vertical",{"depth":40,"slug":360,"text":361},"pr-14--feat-quoting-patch-v2--pricing-artwork-form-ux","PR #14 — feat: Quoting patch v2 — pricing, artwork, form UX",{"depth":40,"slug":363,"text":364},"pr-20--feat-quoting-patch-v3--sticky-bar-pricing-tooltips","PR #20 — feat: Quoting patch v3 — sticky bar, pricing, tooltips",{"depth":34,"slug":366,"text":367},"pages-built","Pages Built",{"depth":40,"slug":369,"text":370},"quotes--quotes-list","/quotes — Quotes List",{"depth":40,"slug":372,"text":373},"quotesnew--new-quote-form","/quotes/new — New Quote Form",{"depth":40,"slug":375,"text":376},"quotesid--quote-detail","/quotes/[id] — Quote Detail",{"depth":34,"slug":378,"text":379},"key-features","Key Features",{"depth":40,"slug":381,"text":382},"artwork-system","Artwork System",{"depth":40,"slug":384,"text":385},"flat-setup-fee-pricing","Flat Setup Fee Pricing",{"depth":40,"slug":387,"text":388},"service-types--customer-tags","Service Types & Customer Tags",{"depth":40,"slug":390,"text":391},"discount-model","Discount Model",{"depth":34,"slug":393,"text":394},"components-15","Components (15+)",{"depth":34,"slug":396,"text":397},"data-layer","Data Layer",{"depth":34,"slug":399,"text":400},"build-approach","Build Approach",{"depth":40,"slug":402,"text":403},"pr-13--initial-build-6-parallel-agents","PR #13 — Initial Build (6 parallel agents)",{"depth":40,"slug":405,"text":406},"pr-14--patch-v2-20-feedback-items","PR #14 — Patch v2 (20 feedback items)",{"depth":40,"slug":408,"text":409},"pr-20--patch-v3-sticky-bar-pricing-tooltips","PR #20 — Patch v3 (sticky bar, pricing, tooltips)",{"depth":34,"slug":411,"text":412},"deferred-tech-debt","Deferred Tech Debt",{"depth":34,"slug":170,"text":171},[],[],{"title":338,"subtitle":339,"date":417,"phase":17,"vertical":185,"verticalSecondary":418,"stage":75,"tags":419,"sessionId":343,"pr":344,"status":25},["Date","2026-02-08T00:00:00.000Z"],[],[77,75],[],"2026-02-08-quoting-discovery",{"id":421,"data":423,"body":430,"filePath":431,"digest":432,"rendered":433},{"title":424,"subtitle":425,"date":426,"phase":17,"vertical":185,"verticalSecondary":427,"stage":20,"tags":428,"sessionId":429,"branch":24,"status":25},"Quoting Discovery: Complete","Full competitive analysis, user interview, and improved journey design for the Quoting vertical",["Date","2026-02-08T00:00:00.000Z"],[],[77,20],"0fe71069-b9c2-45f3-9a06-5c57de8a013d","## Target Improvements\n\n| Metric | Value |\n|--------|-------|\n| 60-70% | Faster (simple quote) |\n| 3-4 min | Target (vs 10 min) |\n| 60% | Fewer clicks |\n| 10 | Friction points found |\n\n## What We Did\n\n### 1. Playwright Exploration\n\nSet up headless browser to navigate the 4Ink customer portal (project-builder.app). Captured Steps 1-3 of the 6-step Print Life quoting flow. Documented: product catalog, 103 color swatches with no search, blocking recalculation on quantity entry, Angular SPA with S&S Activewear data integration.\n\n### 2. Web Research\n\nPrint Life: founded by Cam Earven (former screen printer), ~200 shops, Angular SPA, solo developer. 2024 updates added impression cost display. Q1 2025 added payment fixes and matrix pricing types. Competitive landscape: Printavo ($49-250/mo), Teesom ($67/mo), YoPrint ($39/mo), ShopVOX.\n\n### 3. User Interview\n\n5-20 quotes/week, 50/50 simple vs complex, ~10 min per quote. Critical pain: recalculation blocks tabbing through sizes (adds 2-3 min/quote). Mandatory unused steps. Art style change resets all selections. Wants hybrid approval workflow, quote reuse, keyboard navigation, S&S-style color swatch UI.\n\n### 4. Improved Journey Design\n\nSingle-page form replaces 6-step wizard. Instant client-side pricing. S&S-style dense color swatch grid (white text overlay, search, favorites). Hybrid approval: customer submits → shop reviews/adjusts price → approves → customer notified. Quote statuses: Draft/Sent/Accepted/Declined/Revised.\n\n## Top 5 Friction Points\n\n| Friction | Severity | Our Fix |\n|----------|----------|---------|\n| Qty entry blocks on recalculation | Critical | Instant client-side calc, never block |\n| Mandatory unused steps | High | Single-page form, no steps to skip |\n| Art style change resets all selections | High | Non-destructive editing |\n| No quote reuse / duplication | High | Duplicate Quote button |\n| No quote tracking or status | High | Full status dashboard |\n\n## Print Life vs Screen Print Pro\n\n### Print Life (Current)\n\n- 6 mandatory sequential steps\n- Recalculation blocks input\n- 103 tiny color swatches, no search\n- Can't skip unused steps\n- No quote tracking or reuse\n- Quote = invoice immediately\n- Price by phone call only\n\n### Screen Print Pro (Target)\n\n- Single scrollable page\n- Instant client-side pricing\n- S&S-style grid + search + favorites\n- Only show what's needed\n- Full dashboard + duplicate\n- Draft → Sent → Accepted\n- Hybrid approval workflow\n\n## 4Ink Owner Request\n\n### S&S-Style Color Swatch Grid\n\nColor swatches should match S&S Activewear's supplier UI: dense palette with swatches packed tightly together, minimal white space, color name in white font overlaid on each swatch. Makes it easier to see all colors at once and pick quickly. Building as reusable `ColorSwatchPicker` component.\n\n## Documents Created\n\n- [docs/competitive-analysis/print-life-quoting-analysis.md](../docs/competitive-analysis/print-life-quoting-analysis.md)\n- [docs/competitive-analysis/print-life-journey-quoting.md](../docs/competitive-analysis/print-life-journey-quoting.md)\n- [docs/strategy/screen-print-pro-journey-quoting.md](../docs/strategy/screen-print-pro-journey-quoting.md)\n- [docs/strategy/quoting-scope-definition.md](../docs/strategy/quoting-scope-definition.md)\n\n## Next: Build Phase\n\nAll discovery documents are complete. The build order is:\n\n1. Quotes List (`/quotes`) — DataTable, status filters, search, quick actions\n2. New Quote Form (`/quotes/new`) — Single-page, instant pricing, S&S color swatch\n3. Quote Detail (`/quotes/[id]`) — Read-only view, action buttons\n4. S&S Color Swatch Component — Dense grid, search, favorites (reusable)\n5. Customer Combobox — Type-ahead with \"Add New\" modal\n6. Email Preview Modal — \"Send to Customer\" mockup","src/content/sessions/2026-02-08-quoting-discovery.md","68cba0f1614e6389",{"html":434,"metadata":435},"\u003Ch2 id=\"target-improvements\">Target Improvements\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Metric\u003C/th>\u003Cth>Value\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>60-70%\u003C/td>\u003Ctd>Faster (simple quote)\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>3-4 min\u003C/td>\u003Ctd>Target (vs 10 min)\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>60%\u003C/td>\u003Ctd>Fewer clicks\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>10\u003C/td>\u003Ctd>Friction points found\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"what-we-did\">What We Did\u003C/h2>\n\u003Ch3 id=\"1-playwright-exploration\">1. Playwright Exploration\u003C/h3>\n\u003Cp>Set up headless browser to navigate the 4Ink customer portal (project-builder.app). Captured Steps 1-3 of the 6-step Print Life quoting flow. Documented: product catalog, 103 color swatches with no search, blocking recalculation on quantity entry, Angular SPA with S&#x26;S Activewear data integration.\u003C/p>\n\u003Ch3 id=\"2-web-research\">2. Web Research\u003C/h3>\n\u003Cp>Print Life: founded by Cam Earven (former screen printer), ~200 shops, Angular SPA, solo developer. 2024 updates added impression cost display. Q1 2025 added payment fixes and matrix pricing types. Competitive landscape: Printavo ($49-250/mo), Teesom ($67/mo), YoPrint ($39/mo), ShopVOX.\u003C/p>\n\u003Ch3 id=\"3-user-interview\">3. User Interview\u003C/h3>\n\u003Cp>5-20 quotes/week, 50/50 simple vs complex, ~10 min per quote. Critical pain: recalculation blocks tabbing through sizes (adds 2-3 min/quote). Mandatory unused steps. Art style change resets all selections. Wants hybrid approval workflow, quote reuse, keyboard navigation, S&#x26;S-style color swatch UI.\u003C/p>\n\u003Ch3 id=\"4-improved-journey-design\">4. Improved Journey Design\u003C/h3>\n\u003Cp>Single-page form replaces 6-step wizard. Instant client-side pricing. S&#x26;S-style dense color swatch grid (white text overlay, search, favorites). Hybrid approval: customer submits → shop reviews/adjusts price → approves → customer notified. Quote statuses: Draft/Sent/Accepted/Declined/Revised.\u003C/p>\n\u003Ch2 id=\"top-5-friction-points\">Top 5 Friction Points\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Friction\u003C/th>\u003Cth>Severity\u003C/th>\u003Cth>Our Fix\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>Qty entry blocks on recalculation\u003C/td>\u003Ctd>Critical\u003C/td>\u003Ctd>Instant client-side calc, never block\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Mandatory unused steps\u003C/td>\u003Ctd>High\u003C/td>\u003Ctd>Single-page form, no steps to skip\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Art style change resets all selections\u003C/td>\u003Ctd>High\u003C/td>\u003Ctd>Non-destructive editing\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>No quote reuse / duplication\u003C/td>\u003Ctd>High\u003C/td>\u003Ctd>Duplicate Quote button\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>No quote tracking or status\u003C/td>\u003Ctd>High\u003C/td>\u003Ctd>Full status dashboard\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"print-life-vs-screen-print-pro\">Print Life vs Screen Print Pro\u003C/h2>\n\u003Ch3 id=\"print-life-current\">Print Life (Current)\u003C/h3>\n\u003Cul>\n\u003Cli>6 mandatory sequential steps\u003C/li>\n\u003Cli>Recalculation blocks input\u003C/li>\n\u003Cli>103 tiny color swatches, no search\u003C/li>\n\u003Cli>Can’t skip unused steps\u003C/li>\n\u003Cli>No quote tracking or reuse\u003C/li>\n\u003Cli>Quote = invoice immediately\u003C/li>\n\u003Cli>Price by phone call only\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"screen-print-pro-target\">Screen Print Pro (Target)\u003C/h3>\n\u003Cul>\n\u003Cli>Single scrollable page\u003C/li>\n\u003Cli>Instant client-side pricing\u003C/li>\n\u003Cli>S&#x26;S-style grid + search + favorites\u003C/li>\n\u003Cli>Only show what’s needed\u003C/li>\n\u003Cli>Full dashboard + duplicate\u003C/li>\n\u003Cli>Draft → Sent → Accepted\u003C/li>\n\u003Cli>Hybrid approval workflow\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"4ink-owner-request\">4Ink Owner Request\u003C/h2>\n\u003Ch3 id=\"ss-style-color-swatch-grid\">S&#x26;S-Style Color Swatch Grid\u003C/h3>\n\u003Cp>Color swatches should match S&#x26;S Activewear’s supplier UI: dense palette with swatches packed tightly together, minimal white space, color name in white font overlaid on each swatch. Makes it easier to see all colors at once and pick quickly. Building as reusable \u003Ccode>ColorSwatchPicker\u003C/code> component.\u003C/p>\n\u003Ch2 id=\"documents-created\">Documents Created\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Ca href=\"../docs/competitive-analysis/print-life-quoting-analysis.md\">docs/competitive-analysis/print-life-quoting-analysis.md\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"../docs/competitive-analysis/print-life-journey-quoting.md\">docs/competitive-analysis/print-life-journey-quoting.md\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"../docs/strategy/screen-print-pro-journey-quoting.md\">docs/strategy/screen-print-pro-journey-quoting.md\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"../docs/strategy/quoting-scope-definition.md\">docs/strategy/quoting-scope-definition.md\u003C/a>\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"next-build-phase\">Next: Build Phase\u003C/h2>\n\u003Cp>All discovery documents are complete. The build order is:\u003C/p>\n\u003Col>\n\u003Cli>Quotes List (\u003Ccode>/quotes\u003C/code>) — DataTable, status filters, search, quick actions\u003C/li>\n\u003Cli>New Quote Form (\u003Ccode>/quotes/new\u003C/code>) — Single-page, instant pricing, S&#x26;S color swatch\u003C/li>\n\u003Cli>Quote Detail (\u003Ccode>/quotes/[id]\u003C/code>) — Read-only view, action buttons\u003C/li>\n\u003Cli>S&#x26;S Color Swatch Component — Dense grid, search, favorites (reusable)\u003C/li>\n\u003Cli>Customer Combobox — Type-ahead with “Add New” modal\u003C/li>\n\u003Cli>Email Preview Modal — “Send to Customer” mockup\u003C/li>\n\u003C/ol>",{"headings":436,"localImagePaths":479,"remoteImagePaths":480,"frontmatter":481,"imagePaths":485},[437,440,443,446,449,452,455,458,461,464,467,470,473,476],{"depth":34,"slug":438,"text":439},"target-improvements","Target Improvements",{"depth":34,"slug":441,"text":442},"what-we-did","What We Did",{"depth":40,"slug":444,"text":445},"1-playwright-exploration","1. Playwright Exploration",{"depth":40,"slug":447,"text":448},"2-web-research","2. Web Research",{"depth":40,"slug":450,"text":451},"3-user-interview","3. User Interview",{"depth":40,"slug":453,"text":454},"4-improved-journey-design","4. Improved Journey Design",{"depth":34,"slug":456,"text":457},"top-5-friction-points","Top 5 Friction Points",{"depth":34,"slug":459,"text":460},"print-life-vs-screen-print-pro","Print Life vs Screen Print Pro",{"depth":40,"slug":462,"text":463},"print-life-current","Print Life (Current)",{"depth":40,"slug":465,"text":466},"screen-print-pro-target","Screen Print Pro (Target)",{"depth":34,"slug":468,"text":469},"4ink-owner-request","4Ink Owner Request",{"depth":40,"slug":471,"text":472},"ss-style-color-swatch-grid","S&S-Style Color Swatch Grid",{"depth":34,"slug":474,"text":475},"documents-created","Documents Created",{"depth":34,"slug":477,"text":478},"next-build-phase","Next: Build Phase",[],[],{"title":424,"subtitle":425,"date":482,"phase":17,"vertical":185,"verticalSecondary":483,"stage":20,"tags":484,"sessionId":429,"branch":24,"status":25},["Date","2026-02-08T00:00:00.000Z"],[],[77,20],[],"2026-02-08-vercel-setup",{"id":486,"data":488,"body":495,"filePath":496,"digest":497,"rendered":498},{"title":489,"subtitle":490,"date":491,"phase":17,"vertical":18,"verticalSecondary":492,"stage":75,"tags":493,"sessionId":190,"branch":494,"status":25},"Vercel Setup with Access Code Protection","4Ink demo deployment infrastructure",["Date","2026-02-08T00:00:00.000Z"],[],[75],"feat/vercel-setup","## Overview\n\nSet up Vercel deployment for Screen Print Pro with password protection using an access code stored securely in Vercel's environment variables. This allows secure demo access to 4Ink without exposing the app publicly.\n\n**Security Note:** The actual access code is stored in the `DEMO_ACCESS_CODE` environment variable in Vercel. Never commit the code to git. To view it:\n\n```\nvercel env list\n```\n\n## What Was Built\n\n### Vercel Project Linked\n\n- Linked GitHub repository to Vercel hobby account\n- Project auto-configured for Next.js 16.1.6\n- Auto-detected production settings\n\n### Access Code Protection System\n\n- **Middleware** (`middleware.ts`) — Protects all routes except login pages\n- **Login Page** (`/demo-login`) — Clean, branded interface for access code entry\n- **API Route** (`/api/demo-login`) — Validates code and sets secure httpOnly cookie\n- **Environment Variable** — `DEMO_ACCESS_CODE` encrypted in Vercel\n\n### Security Details\n\n- Cookie is `httpOnly` (cannot be accessed via JavaScript)\n- Cookie is `secure` (only sent over HTTPS in production)\n- Cookie is `sameSite=lax` (CSRF protection)\n- Cookie expires in 30 days\n- Access code stored as encrypted environment variable\n- Protection only active in production (dev mode bypassed for testing)\n\n## How It Works\n\n1. User visits deployed app (e.g., `print-4ink.vercel.app`)\n2. Middleware checks for `demo-access` cookie\n3. If missing, redirect to `/demo-login`\n4. User enters access code\n5. API validates against environment variable\n6. If valid, cookie is set and user redirected to dashboard\n7. Cookie persists for 30 days or until browser cleared\n\n## Files Changed\n\n- [middleware.ts (created)](https://github.com/cmbays/print-4ink/blob/feat/vercel-setup/middleware.ts)\n- [app/demo-login/page.tsx (created)](https://github.com/cmbays/print-4ink/blob/feat/vercel-setup/app/demo-login/page.tsx)\n- [app/api/demo-login/route.ts (created)](https://github.com/cmbays/print-4ink/blob/feat/vercel-setup/app/api/demo-login/route.ts)\n- [Full PR diff](https://github.com/cmbays/print-4ink/compare/main...feat/vercel-setup)\n\n## Next Steps\n\n### To Deploy to Production\n\n1. PR receives CodeRabbit review\n2. Merge to main when approved\n3. Vercel auto-deploys main branch\n4. Get production URL from Vercel dashboard\n5. Share URL with 4Ink, access code separately\n\n### To View or Change Access Code\n\n**View current code:**\n\n```\nvercel env list\n```\n\n**Change the code:**\n\nUpdate `DEMO_ACCESS_CODE` in the Vercel dashboard (recommended) or via CLI:\n\n```\nvercel env rm DEMO_ACCESS_CODE && printf \"your-new-code\" | vercel env add DEMO_ACCESS_CODE production\n```\n\nThen redeploy: `vercel deploy --prod`","src/content/sessions/2026-02-08-vercel-setup.md","b0969124a4f7eac7",{"html":499,"metadata":500},"\u003Ch2 id=\"overview\">Overview\u003C/h2>\n\u003Cp>Set up Vercel deployment for Screen Print Pro with password protection using an access code stored securely in Vercel’s environment variables. This allows secure demo access to 4Ink without exposing the app publicly.\u003C/p>\n\u003Cp>\u003Cstrong>Security Note:\u003C/strong> The actual access code is stored in the \u003Ccode>DEMO_ACCESS_CODE\u003C/code> environment variable in Vercel. Never commit the code to git. To view it:\u003C/p>\n\u003Cpre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>vercel env list\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"what-was-built\">What Was Built\u003C/h2>\n\u003Ch3 id=\"vercel-project-linked\">Vercel Project Linked\u003C/h3>\n\u003Cul>\n\u003Cli>Linked GitHub repository to Vercel hobby account\u003C/li>\n\u003Cli>Project auto-configured for Next.js 16.1.6\u003C/li>\n\u003Cli>Auto-detected production settings\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"access-code-protection-system\">Access Code Protection System\u003C/h3>\n\u003Cul>\n\u003Cli>\u003Cstrong>Middleware\u003C/strong> (\u003Ccode>middleware.ts\u003C/code>) — Protects all routes except login pages\u003C/li>\n\u003Cli>\u003Cstrong>Login Page\u003C/strong> (\u003Ccode>/demo-login\u003C/code>) — Clean, branded interface for access code entry\u003C/li>\n\u003Cli>\u003Cstrong>API Route\u003C/strong> (\u003Ccode>/api/demo-login\u003C/code>) — Validates code and sets secure httpOnly cookie\u003C/li>\n\u003Cli>\u003Cstrong>Environment Variable\u003C/strong> — \u003Ccode>DEMO_ACCESS_CODE\u003C/code> encrypted in Vercel\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"security-details\">Security Details\u003C/h3>\n\u003Cul>\n\u003Cli>Cookie is \u003Ccode>httpOnly\u003C/code> (cannot be accessed via JavaScript)\u003C/li>\n\u003Cli>Cookie is \u003Ccode>secure\u003C/code> (only sent over HTTPS in production)\u003C/li>\n\u003Cli>Cookie is \u003Ccode>sameSite=lax\u003C/code> (CSRF protection)\u003C/li>\n\u003Cli>Cookie expires in 30 days\u003C/li>\n\u003Cli>Access code stored as encrypted environment variable\u003C/li>\n\u003Cli>Protection only active in production (dev mode bypassed for testing)\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"how-it-works\">How It Works\u003C/h2>\n\u003Col>\n\u003Cli>User visits deployed app (e.g., \u003Ccode>print-4ink.vercel.app\u003C/code>)\u003C/li>\n\u003Cli>Middleware checks for \u003Ccode>demo-access\u003C/code> cookie\u003C/li>\n\u003Cli>If missing, redirect to \u003Ccode>/demo-login\u003C/code>\u003C/li>\n\u003Cli>User enters access code\u003C/li>\n\u003Cli>API validates against environment variable\u003C/li>\n\u003Cli>If valid, cookie is set and user redirected to dashboard\u003C/li>\n\u003Cli>Cookie persists for 30 days or until browser cleared\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"files-changed\">Files Changed\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Ca href=\"https://github.com/cmbays/print-4ink/blob/feat/vercel-setup/middleware.ts\">middleware.ts (created)\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://github.com/cmbays/print-4ink/blob/feat/vercel-setup/app/demo-login/page.tsx\">app/demo-login/page.tsx (created)\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://github.com/cmbays/print-4ink/blob/feat/vercel-setup/app/api/demo-login/route.ts\">app/api/demo-login/route.ts (created)\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://github.com/cmbays/print-4ink/compare/main...feat/vercel-setup\">Full PR diff\u003C/a>\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"next-steps\">Next Steps\u003C/h2>\n\u003Ch3 id=\"to-deploy-to-production\">To Deploy to Production\u003C/h3>\n\u003Col>\n\u003Cli>PR receives CodeRabbit review\u003C/li>\n\u003Cli>Merge to main when approved\u003C/li>\n\u003Cli>Vercel auto-deploys main branch\u003C/li>\n\u003Cli>Get production URL from Vercel dashboard\u003C/li>\n\u003Cli>Share URL with 4Ink, access code separately\u003C/li>\n\u003C/ol>\n\u003Ch3 id=\"to-view-or-change-access-code\">To View or Change Access Code\u003C/h3>\n\u003Cp>\u003Cstrong>View current code:\u003C/strong>\u003C/p>\n\u003Cpre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>vercel env list\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>\u003Cstrong>Change the code:\u003C/strong>\u003C/p>\n\u003Cp>Update \u003Ccode>DEMO_ACCESS_CODE\u003C/code> in the Vercel dashboard (recommended) or via CLI:\u003C/p>\n\u003Cpre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>vercel env rm DEMO_ACCESS_CODE &#x26;&#x26; printf \"your-new-code\" | vercel env add DEMO_ACCESS_CODE production\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Then redeploy: \u003Ccode>vercel deploy --prod\u003C/code>\u003C/p>",{"headings":501,"localImagePaths":528,"remoteImagePaths":529,"frontmatter":530,"imagePaths":534},[502,505,506,509,512,515,518,521,522,525],{"depth":34,"slug":503,"text":504},"overview","Overview",{"depth":34,"slug":138,"text":139},{"depth":40,"slug":507,"text":508},"vercel-project-linked","Vercel Project Linked",{"depth":40,"slug":510,"text":511},"access-code-protection-system","Access Code Protection System",{"depth":40,"slug":513,"text":514},"security-details","Security Details",{"depth":34,"slug":516,"text":517},"how-it-works","How It Works",{"depth":34,"slug":519,"text":520},"files-changed","Files Changed",{"depth":34,"slug":170,"text":171},{"depth":40,"slug":523,"text":524},"to-deploy-to-production","To Deploy to Production",{"depth":40,"slug":526,"text":527},"to-view-or-change-access-code","To View or Change Access Code",[],[],{"title":489,"subtitle":490,"date":531,"phase":17,"vertical":18,"verticalSecondary":532,"stage":75,"tags":533,"sessionId":190,"branch":494,"status":25},["Date","2026-02-08T00:00:00.000Z"],[],[75],[],"2026-02-08-strategic-pivot",{"id":535,"data":537,"body":545,"filePath":546,"digest":547,"rendered":548},{"title":538,"subtitle":539,"date":540,"phase":17,"vertical":18,"verticalSecondary":541,"stage":542,"tags":543,"sessionId":544,"branch":24,"status":25},"Strategic Pivot: Vertical-by-Vertical","Moving from linear 10-step implementation plan to user-validated vertical development focused on 4Ink's core pain points.",["Date","2026-02-08T00:00:00.000Z"],[185],"implementation-planning",[189,22],"7b394c57-f392-4fb2-87da-1583c256b010","## The Pivot: Why and What Changed\n\n**Old Plan (Linear 10 Steps):** Build all 11 screens in order (Dashboard -> Jobs -> Quotes -> Customers -> Screen Room -> Garments), no user feedback until end.\n\n**New Plan (Vertical-by-Vertical):** Build 3-5 complete user workflows that demonstrate 10x better UX vs Print Life, with fast feedback loops after each vertical.\n\n### Why We Pivoted\n\n- **User Validation:** 4Ink feedback was specific (\"Quoting is painful, invoicing is painful, pricing is broken, reporting doesn't work\") not generic\n- **Fast Feedback:** Complete vertical -> user demo -> iterate, before moving to next vertical\n- **Depth > Breadth:** 3 excellent verticals that demonstrate 10x better UX will impress user more than 11 mediocre screens\n- **Tested Methodology:** Pilot on Quoting, then scale repeatable process to 4 more verticals\n- **Aligned Scope:** Original plan included Jobs/Screen Room/Garments that user didn't mention\n\n### What Verticals Are We Building?\n\n| Vertical | Status | Notes |\n|----------|--------|-------|\n| **Quoting** | Discovery planning | PILOT VERTICAL |\n| **Invoicing** | Pending | \"Invoice generation is tedious\" |\n| **Customer Management** | Pending | \"Customer tracking is poor\" |\n| **Pricing Matrix** | Pending | \"Pricing is inflexible\" |\n| **Reporting** | Stretch goal | \"Print Life's reporting is broken\" |\n\n---\n\n## The Methodology: 4-Phase Approach (per Vertical)\n\n### Phase 1: Discovery (2-3 days)\n\nDeeply understand Print Life's current experience and 4Ink's pain points.\n\n- **Print Life Analysis:** Screenshot review + trial walkthrough\n- **User Interview:** 30-45 min with Chris covering workflow -> pain points -> wishlist\n- **Journey Mapping:** Document steps, identify friction points, rate severity\n\n### Phase 2: Scope Definition (1 day)\n\nDefine CORE (must-have), PERIPHERAL (shown but non-functional), INTERCONNECTIONS (minimal representations).\n\n### Phase 3: Build Execution (2-4 days)\n\nImplement with design system adherence and quality gates.\n\n### Phase 4: Demo & Iteration (1 day)\n\nUser rates Clarity, Speed, Polish, Value (target 8+ average).\n\n---\n\n## Quoting Vertical: Pilot Plan\n\n### CORE (Building)\n\n- **Quotes List** (`/quotes`) -- Browse, filter by status, search\n- **Quote Detail** (`/quotes/[id]`) -- Full breakdown, action buttons\n- **New Quote Form** (`/quotes/new`) -- Dynamic line items, real-time pricing\n\n### PERIPHERAL (Shown, not functional)\n\n- Customer creation modal, artwork upload placeholder, PDF download, email preview\n\n### INTERCONNECTIONS (Minimal)\n\n- Customer dropdown, pricing formula, \"Convert to Invoice\" button, quote totals\n\n### Key Targets\n\n| Metric | Print Life | Our Target |\n|--------|-----------|------------|\n| Simple Quote Time | 3-5 min | 2-3 min |\n| Complex Quote Time | 8-12 min | 5-7 min |\n| Simple Quote Clicks | 13-20 | 10-12 |\n| Complex Quote Clicks | 25-35 | 18-25 |\n\n---\n\n## Documents Created\n\n- `.claude/plans/vertical-by-vertical-strategy.md` -- Master strategy document\n- `docs/strategy/quoting-discovery-interview-questions.md` -- 25+ question interview guide\n- `docs/competitive-analysis/print-life-quoting-analysis.md` -- Feature analysis template\n- `docs/competitive-analysis/print-life-journey-quoting.md` -- Journey map template\n- `docs/strategy/quoting-scope-definition.md` -- CORE/PERIPHERAL/INTERCONNECTIONS spec\n- `docs/strategy/STRATEGY_README.md` -- Navigation guide for all strategy docs\n\n---\n\n## Blocking Dependencies\n\n**Cannot build Quoting until:** Discovery phase complete (user interview + Print Life trial)\n\n**Cannot proceed to Invoicing until:** Quoting user-validated (8+ rating)\n\n## Success Criteria\n\n- User rates Clarity, Speed, Polish, Value as 8+ (average)\n- User identifies specific time savings or friction reduction\n- User says \"yes, this is better than Print Life\"\n- Quality gate audit: Zero Critical issues, \u003C3 High issues\n\n---\n\n## How This Differs from Original Plan\n\n| Aspect | Original (10 Steps) | New (Vertical-by-Vertical) |\n|--------|---------------------|----------------------------|\n| **Approach** | Linear: Steps 1-10 in order | Iterative: Complete vertical -> feedback -> next |\n| **User Feedback** | After all 11 screens | After each vertical |\n| **Focus** | All screens | 4-5 complete workflows |\n| **Validation** | Assumed features from PRD | Based on 4Ink's stated pain points |\n| **Scope** | Everything at once | CORE + PERIPHERAL + INTERCONNECTIONS per vertical |","src/content/sessions/2026-02-08-strategic-pivot.md","2a995915bb000418",{"html":549,"metadata":550},"\u003Ch2 id=\"the-pivot-why-and-what-changed\">The Pivot: Why and What Changed\u003C/h2>\n\u003Cp>\u003Cstrong>Old Plan (Linear 10 Steps):\u003C/strong> Build all 11 screens in order (Dashboard -> Jobs -> Quotes -> Customers -> Screen Room -> Garments), no user feedback until end.\u003C/p>\n\u003Cp>\u003Cstrong>New Plan (Vertical-by-Vertical):\u003C/strong> Build 3-5 complete user workflows that demonstrate 10x better UX vs Print Life, with fast feedback loops after each vertical.\u003C/p>\n\u003Ch3 id=\"why-we-pivoted\">Why We Pivoted\u003C/h3>\n\u003Cul>\n\u003Cli>\u003Cstrong>User Validation:\u003C/strong> 4Ink feedback was specific (“Quoting is painful, invoicing is painful, pricing is broken, reporting doesn’t work”) not generic\u003C/li>\n\u003Cli>\u003Cstrong>Fast Feedback:\u003C/strong> Complete vertical -> user demo -> iterate, before moving to next vertical\u003C/li>\n\u003Cli>\u003Cstrong>Depth > Breadth:\u003C/strong> 3 excellent verticals that demonstrate 10x better UX will impress user more than 11 mediocre screens\u003C/li>\n\u003Cli>\u003Cstrong>Tested Methodology:\u003C/strong> Pilot on Quoting, then scale repeatable process to 4 more verticals\u003C/li>\n\u003Cli>\u003Cstrong>Aligned Scope:\u003C/strong> Original plan included Jobs/Screen Room/Garments that user didn’t mention\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"what-verticals-are-we-building\">What Verticals Are We Building?\u003C/h3>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Vertical\u003C/th>\u003Cth>Status\u003C/th>\u003Cth>Notes\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>\u003Cstrong>Quoting\u003C/strong>\u003C/td>\u003Ctd>Discovery planning\u003C/td>\u003Ctd>PILOT VERTICAL\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>Invoicing\u003C/strong>\u003C/td>\u003Ctd>Pending\u003C/td>\u003Ctd>”Invoice generation is tedious”\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>Customer Management\u003C/strong>\u003C/td>\u003Ctd>Pending\u003C/td>\u003Ctd>”Customer tracking is poor”\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>Pricing Matrix\u003C/strong>\u003C/td>\u003Ctd>Pending\u003C/td>\u003Ctd>”Pricing is inflexible”\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>Reporting\u003C/strong>\u003C/td>\u003Ctd>Stretch goal\u003C/td>\u003Ctd>”Print Life’s reporting is broken”\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Chr>\n\u003Ch2 id=\"the-methodology-4-phase-approach-per-vertical\">The Methodology: 4-Phase Approach (per Vertical)\u003C/h2>\n\u003Ch3 id=\"phase-1-discovery-2-3-days\">Phase 1: Discovery (2-3 days)\u003C/h3>\n\u003Cp>Deeply understand Print Life’s current experience and 4Ink’s pain points.\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Print Life Analysis:\u003C/strong> Screenshot review + trial walkthrough\u003C/li>\n\u003Cli>\u003Cstrong>User Interview:\u003C/strong> 30-45 min with Chris covering workflow -> pain points -> wishlist\u003C/li>\n\u003Cli>\u003Cstrong>Journey Mapping:\u003C/strong> Document steps, identify friction points, rate severity\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"phase-2-scope-definition-1-day\">Phase 2: Scope Definition (1 day)\u003C/h3>\n\u003Cp>Define CORE (must-have), PERIPHERAL (shown but non-functional), INTERCONNECTIONS (minimal representations).\u003C/p>\n\u003Ch3 id=\"phase-3-build-execution-2-4-days\">Phase 3: Build Execution (2-4 days)\u003C/h3>\n\u003Cp>Implement with design system adherence and quality gates.\u003C/p>\n\u003Ch3 id=\"phase-4-demo--iteration-1-day\">Phase 4: Demo &#x26; Iteration (1 day)\u003C/h3>\n\u003Cp>User rates Clarity, Speed, Polish, Value (target 8+ average).\u003C/p>\n\u003Chr>\n\u003Ch2 id=\"quoting-vertical-pilot-plan\">Quoting Vertical: Pilot Plan\u003C/h2>\n\u003Ch3 id=\"core-building\">CORE (Building)\u003C/h3>\n\u003Cul>\n\u003Cli>\u003Cstrong>Quotes List\u003C/strong> (\u003Ccode>/quotes\u003C/code>) — Browse, filter by status, search\u003C/li>\n\u003Cli>\u003Cstrong>Quote Detail\u003C/strong> (\u003Ccode>/quotes/[id]\u003C/code>) — Full breakdown, action buttons\u003C/li>\n\u003Cli>\u003Cstrong>New Quote Form\u003C/strong> (\u003Ccode>/quotes/new\u003C/code>) — Dynamic line items, real-time pricing\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"peripheral-shown-not-functional\">PERIPHERAL (Shown, not functional)\u003C/h3>\n\u003Cul>\n\u003Cli>Customer creation modal, artwork upload placeholder, PDF download, email preview\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"interconnections-minimal\">INTERCONNECTIONS (Minimal)\u003C/h3>\n\u003Cul>\n\u003Cli>Customer dropdown, pricing formula, “Convert to Invoice” button, quote totals\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"key-targets\">Key Targets\u003C/h3>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Metric\u003C/th>\u003Cth>Print Life\u003C/th>\u003Cth>Our Target\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>Simple Quote Time\u003C/td>\u003Ctd>3-5 min\u003C/td>\u003Ctd>2-3 min\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Complex Quote Time\u003C/td>\u003Ctd>8-12 min\u003C/td>\u003Ctd>5-7 min\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Simple Quote Clicks\u003C/td>\u003Ctd>13-20\u003C/td>\u003Ctd>10-12\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Complex Quote Clicks\u003C/td>\u003Ctd>25-35\u003C/td>\u003Ctd>18-25\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Chr>\n\u003Ch2 id=\"documents-created\">Documents Created\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Ccode>.claude/plans/vertical-by-vertical-strategy.md\u003C/code> — Master strategy document\u003C/li>\n\u003Cli>\u003Ccode>docs/strategy/quoting-discovery-interview-questions.md\u003C/code> — 25+ question interview guide\u003C/li>\n\u003Cli>\u003Ccode>docs/competitive-analysis/print-life-quoting-analysis.md\u003C/code> — Feature analysis template\u003C/li>\n\u003Cli>\u003Ccode>docs/competitive-analysis/print-life-journey-quoting.md\u003C/code> — Journey map template\u003C/li>\n\u003Cli>\u003Ccode>docs/strategy/quoting-scope-definition.md\u003C/code> — CORE/PERIPHERAL/INTERCONNECTIONS spec\u003C/li>\n\u003Cli>\u003Ccode>docs/strategy/STRATEGY_README.md\u003C/code> — Navigation guide for all strategy docs\u003C/li>\n\u003C/ul>\n\u003Chr>\n\u003Ch2 id=\"blocking-dependencies\">Blocking Dependencies\u003C/h2>\n\u003Cp>\u003Cstrong>Cannot build Quoting until:\u003C/strong> Discovery phase complete (user interview + Print Life trial)\u003C/p>\n\u003Cp>\u003Cstrong>Cannot proceed to Invoicing until:\u003C/strong> Quoting user-validated (8+ rating)\u003C/p>\n\u003Ch2 id=\"success-criteria\">Success Criteria\u003C/h2>\n\u003Cul>\n\u003Cli>User rates Clarity, Speed, Polish, Value as 8+ (average)\u003C/li>\n\u003Cli>User identifies specific time savings or friction reduction\u003C/li>\n\u003Cli>User says “yes, this is better than Print Life”\u003C/li>\n\u003Cli>Quality gate audit: Zero Critical issues, &#x3C;3 High issues\u003C/li>\n\u003C/ul>\n\u003Chr>\n\u003Ch2 id=\"how-this-differs-from-original-plan\">How This Differs from Original Plan\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Aspect\u003C/th>\u003Cth>Original (10 Steps)\u003C/th>\u003Cth>New (Vertical-by-Vertical)\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>\u003Cstrong>Approach\u003C/strong>\u003C/td>\u003Ctd>Linear: Steps 1-10 in order\u003C/td>\u003Ctd>Iterative: Complete vertical -> feedback -> next\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>User Feedback\u003C/strong>\u003C/td>\u003Ctd>After all 11 screens\u003C/td>\u003Ctd>After each vertical\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>Focus\u003C/strong>\u003C/td>\u003Ctd>All screens\u003C/td>\u003Ctd>4-5 complete workflows\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>Validation\u003C/strong>\u003C/td>\u003Ctd>Assumed features from PRD\u003C/td>\u003Ctd>Based on 4Ink’s stated pain points\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>Scope\u003C/strong>\u003C/td>\u003Ctd>Everything at once\u003C/td>\u003Ctd>CORE + PERIPHERAL + INTERCONNECTIONS per vertical\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>",{"headings":551,"localImagePaths":601,"remoteImagePaths":602,"frontmatter":603,"imagePaths":607},[552,555,558,561,564,567,570,573,576,579,582,585,588,591,592,595,598],{"depth":34,"slug":553,"text":554},"the-pivot-why-and-what-changed","The Pivot: Why and What Changed",{"depth":40,"slug":556,"text":557},"why-we-pivoted","Why We Pivoted",{"depth":40,"slug":559,"text":560},"what-verticals-are-we-building","What Verticals Are We Building?",{"depth":34,"slug":562,"text":563},"the-methodology-4-phase-approach-per-vertical","The Methodology: 4-Phase Approach (per Vertical)",{"depth":40,"slug":565,"text":566},"phase-1-discovery-2-3-days","Phase 1: Discovery (2-3 days)",{"depth":40,"slug":568,"text":569},"phase-2-scope-definition-1-day","Phase 2: Scope Definition (1 day)",{"depth":40,"slug":571,"text":572},"phase-3-build-execution-2-4-days","Phase 3: Build Execution (2-4 days)",{"depth":40,"slug":574,"text":575},"phase-4-demo--iteration-1-day","Phase 4: Demo & Iteration (1 day)",{"depth":34,"slug":577,"text":578},"quoting-vertical-pilot-plan","Quoting Vertical: Pilot Plan",{"depth":40,"slug":580,"text":581},"core-building","CORE (Building)",{"depth":40,"slug":583,"text":584},"peripheral-shown-not-functional","PERIPHERAL (Shown, not functional)",{"depth":40,"slug":586,"text":587},"interconnections-minimal","INTERCONNECTIONS (Minimal)",{"depth":40,"slug":589,"text":590},"key-targets","Key Targets",{"depth":34,"slug":474,"text":475},{"depth":34,"slug":593,"text":594},"blocking-dependencies","Blocking Dependencies",{"depth":34,"slug":596,"text":597},"success-criteria","Success Criteria",{"depth":34,"slug":599,"text":600},"how-this-differs-from-original-plan","How This Differs from Original Plan",[],[],{"title":538,"subtitle":539,"date":604,"phase":17,"vertical":18,"verticalSecondary":605,"stage":542,"tags":606,"sessionId":544,"branch":24,"status":25},["Date","2026-02-08T00:00:00.000Z"],[185],[189,22],[],"2026-02-10-customer-quality-gate",{"id":608,"data":610,"body":620,"filePath":621,"digest":622,"rendered":623},{"title":611,"subtitle":612,"date":613,"phase":17,"vertical":614,"verticalSecondary":615,"stage":616,"tags":617,"sessionId":618,"branch":619,"status":25},"Customer Management Quality Gate","Comprehensive 5-subagent audit of Customer List + Customer Detail pages. 10 fixes across 11 files.",["Date","2026-02-10T00:00:00.000Z"],"customer-management",[],"review",[75,77],"fb57182f-1dee-41b4-be8c-173b629bb9b1","session/0210-customer-quality-gate","## Audit Summary\n\n| Stat | Value |\n|------|-------|\n| FAILs Fixed | 4 |\n| WARNs Fixed | 5 |\n| Files Changed | 11 |\n| Tests Passing | 264 |\n\n## Audit Methodology\n\nRan 5 parallel audit subagents simultaneously to maximize coverage:\n\n- **Visual Audit: Customer List** — Checked layout, responsive design, design token usage, interactive states\n- **Visual Audit: Customer Detail** — Checked all 7 tabs, header, badges, timeline, tables, modals\n- **Scope Coverage** — Verified every CORE feature from the scope definition has a corresponding UI\n- **Cross-Vertical Navigation** — Tested Customer \u003C-> Quoting links, URL params, data flow\n- **Playwright Verification** — End-to-end browser testing of the full customer flow\n\n## Fixes Applied\n\n| # | Severity | Issue | Fix |\n|---|----------|-------|-----|\n| 1 | FAIL | `bg-bg-elevated` invalid Tailwind class (3 files) | Changed to `bg-elevated` |\n| 2 | FAIL | \"New Quote\" sends `?customer=` but quotes/new doesn't read it | Added param consumption + pre-fill logic |\n| 3 | FAIL | `?from=` vs `?duplicate=` param mismatch | Changed to `?duplicate=` to match |\n| 4 | FAIL | Customer name on QuoteDetailView not clickable | Wrapped in `\u003CLink>` to `/customers/:id` |\n| 5 | WARN | AddContact/AddGroup buttons not wired | Imported sheets, added state + onClick handlers |\n| 6 | WARN | Sort headers missing focus-visible rings | Added `focus-visible:ring-2` to all sort buttons |\n| 7 | WARN | Table rows not keyboard-accessible | Added `tabIndex`, Enter/Space, `role=\"link\"` |\n| 8 | WARN | CustomerDetailsPanel missing referrer lookup | Threaded `customers` prop through Tabs |\n| 9 | WARN | Future dates show \"-10 days ago\" | Fixed both `formatDaysAgo()` and `relativeDate()` |\n| 10 | BONUS | CopyButton missing focus-visible ring | Added `focus-visible:ring-2` |\n\n## Playwright Verification\n\nAfter applying all fixes, verified end-to-end in the browser:\n\n- **Customer List** — Mobile cards render with correct `bg-elevated` background\n- **Customer Detail** — \"Last Order: In 9 days\" (future date fix confirmed)\n- **Contacts Tab** — \"Add Contact\" button opens sheet with all fields (Name, Email, Phone, Role, Group, Primary)\n- **New Quote Flow** — `/quotes/new?customer=...` pre-fills the customer in the combobox\n- **Activity Timeline** — Future dates show \"In X days\" (not \"-X days ago\")\n\n## Pull Request\n\n[PR #33](https://github.com/cmbays/print-4ink/pull/33) — `session/0210-customer-quality-gate` → `main`\n\n---\n\n## What's Next\n\n- **Demo both verticals** to 4Ink owner (Quoting + Customer Management)\n- **Collect feedback** — target 8+ rating on Clarity, Speed, Polish, Value\n- **Iterate** based on feedback\n- **Move to Invoicing vertical** after validation","src/content/sessions/2026-02-10-customer-quality-gate.md","999916f1df0ea991",{"html":624,"metadata":625},"\u003Ch2 id=\"audit-summary\">Audit Summary\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Stat\u003C/th>\u003Cth>Value\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>FAILs Fixed\u003C/td>\u003Ctd>4\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>WARNs Fixed\u003C/td>\u003Ctd>5\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Files Changed\u003C/td>\u003Ctd>11\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Tests Passing\u003C/td>\u003Ctd>264\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"audit-methodology\">Audit Methodology\u003C/h2>\n\u003Cp>Ran 5 parallel audit subagents simultaneously to maximize coverage:\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Visual Audit: Customer List\u003C/strong> — Checked layout, responsive design, design token usage, interactive states\u003C/li>\n\u003Cli>\u003Cstrong>Visual Audit: Customer Detail\u003C/strong> — Checked all 7 tabs, header, badges, timeline, tables, modals\u003C/li>\n\u003Cli>\u003Cstrong>Scope Coverage\u003C/strong> — Verified every CORE feature from the scope definition has a corresponding UI\u003C/li>\n\u003Cli>\u003Cstrong>Cross-Vertical Navigation\u003C/strong> — Tested Customer &#x3C;-> Quoting links, URL params, data flow\u003C/li>\n\u003Cli>\u003Cstrong>Playwright Verification\u003C/strong> — End-to-end browser testing of the full customer flow\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"fixes-applied\">Fixes Applied\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>#\u003C/th>\u003Cth>Severity\u003C/th>\u003Cth>Issue\u003C/th>\u003Cth>Fix\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>1\u003C/td>\u003Ctd>FAIL\u003C/td>\u003Ctd>\u003Ccode>bg-bg-elevated\u003C/code> invalid Tailwind class (3 files)\u003C/td>\u003Ctd>Changed to \u003Ccode>bg-elevated\u003C/code>\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>2\u003C/td>\u003Ctd>FAIL\u003C/td>\u003Ctd>”New Quote” sends \u003Ccode>?customer=\u003C/code> but quotes/new doesn’t read it\u003C/td>\u003Ctd>Added param consumption + pre-fill logic\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>3\u003C/td>\u003Ctd>FAIL\u003C/td>\u003Ctd>\u003Ccode>?from=\u003C/code> vs \u003Ccode>?duplicate=\u003C/code> param mismatch\u003C/td>\u003Ctd>Changed to \u003Ccode>?duplicate=\u003C/code> to match\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>4\u003C/td>\u003Ctd>FAIL\u003C/td>\u003Ctd>Customer name on QuoteDetailView not clickable\u003C/td>\u003Ctd>Wrapped in \u003Ccode>&#x3C;Link>\u003C/code> to \u003Ccode>/customers/:id\u003C/code>\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>5\u003C/td>\u003Ctd>WARN\u003C/td>\u003Ctd>AddContact/AddGroup buttons not wired\u003C/td>\u003Ctd>Imported sheets, added state + onClick handlers\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>6\u003C/td>\u003Ctd>WARN\u003C/td>\u003Ctd>Sort headers missing focus-visible rings\u003C/td>\u003Ctd>Added \u003Ccode>focus-visible:ring-2\u003C/code> to all sort buttons\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>7\u003C/td>\u003Ctd>WARN\u003C/td>\u003Ctd>Table rows not keyboard-accessible\u003C/td>\u003Ctd>Added \u003Ccode>tabIndex\u003C/code>, Enter/Space, \u003Ccode>role=\"link\"\u003C/code>\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>8\u003C/td>\u003Ctd>WARN\u003C/td>\u003Ctd>CustomerDetailsPanel missing referrer lookup\u003C/td>\u003Ctd>Threaded \u003Ccode>customers\u003C/code> prop through Tabs\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>9\u003C/td>\u003Ctd>WARN\u003C/td>\u003Ctd>Future dates show “-10 days ago”\u003C/td>\u003Ctd>Fixed both \u003Ccode>formatDaysAgo()\u003C/code> and \u003Ccode>relativeDate()\u003C/code>\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>10\u003C/td>\u003Ctd>BONUS\u003C/td>\u003Ctd>CopyButton missing focus-visible ring\u003C/td>\u003Ctd>Added \u003Ccode>focus-visible:ring-2\u003C/code>\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"playwright-verification\">Playwright Verification\u003C/h2>\n\u003Cp>After applying all fixes, verified end-to-end in the browser:\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Customer List\u003C/strong> — Mobile cards render with correct \u003Ccode>bg-elevated\u003C/code> background\u003C/li>\n\u003Cli>\u003Cstrong>Customer Detail\u003C/strong> — “Last Order: In 9 days” (future date fix confirmed)\u003C/li>\n\u003Cli>\u003Cstrong>Contacts Tab\u003C/strong> — “Add Contact” button opens sheet with all fields (Name, Email, Phone, Role, Group, Primary)\u003C/li>\n\u003Cli>\u003Cstrong>New Quote Flow\u003C/strong> — \u003Ccode>/quotes/new?customer=...\u003C/code> pre-fills the customer in the combobox\u003C/li>\n\u003Cli>\u003Cstrong>Activity Timeline\u003C/strong> — Future dates show “In X days” (not “-X days ago”)\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"pull-request\">Pull Request\u003C/h2>\n\u003Cp>\u003Ca href=\"https://github.com/cmbays/print-4ink/pull/33\">PR #33\u003C/a> — \u003Ccode>session/0210-customer-quality-gate\u003C/code> → \u003Ccode>main\u003C/code>\u003C/p>\n\u003Chr>\n\u003Ch2 id=\"whats-next\">What’s Next\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Cstrong>Demo both verticals\u003C/strong> to 4Ink owner (Quoting + Customer Management)\u003C/li>\n\u003Cli>\u003Cstrong>Collect feedback\u003C/strong> — target 8+ rating on Clarity, Speed, Polish, Value\u003C/li>\n\u003Cli>\u003Cstrong>Iterate\u003C/strong> based on feedback\u003C/li>\n\u003Cli>\u003Cstrong>Move to Invoicing vertical\u003C/strong> after validation\u003C/li>\n\u003C/ul>",{"headings":626,"localImagePaths":645,"remoteImagePaths":646,"frontmatter":647,"imagePaths":651},[627,630,633,636,639,642],{"depth":34,"slug":628,"text":629},"audit-summary","Audit Summary",{"depth":34,"slug":631,"text":632},"audit-methodology","Audit Methodology",{"depth":34,"slug":634,"text":635},"fixes-applied","Fixes Applied",{"depth":34,"slug":637,"text":638},"playwright-verification","Playwright Verification",{"depth":34,"slug":640,"text":641},"pull-request","Pull Request",{"depth":34,"slug":643,"text":644},"whats-next","What’s Next",[],[],{"title":611,"subtitle":612,"date":648,"phase":17,"vertical":614,"verticalSecondary":649,"stage":616,"tags":650,"sessionId":618,"branch":619,"status":25},["Date","2026-02-10T00:00:00.000Z"],[],[75,77],[],"2026-02-10-customer-feedback",{"id":652,"data":654,"body":662,"filePath":663,"digest":664,"rendered":665},{"title":655,"subtitle":656,"date":657,"phase":17,"vertical":614,"verticalSecondary":658,"stage":616,"tags":659,"sessionId":660,"branch":661,"status":25},"Customer Management Feedback","8 feedback items from 4Ink owner review. Layout consistency, inline column filters, timeline interactivity, workflow improvements, and code quality refinements.",["Date","2026-02-10T00:00:00.000Z"],[],[77,75],"0ba68ef8-1b02-40be-a039-2c63d6d15cd1","session/0210-customer-feedback","## Summary\n\n| Stat | Value |\n|------|-------|\n| Feedback Items | 8 |\n| Files Changed | 10 |\n| PRs Merged | 3 |\n\nThe 4Ink owner reviewed both the Customer List and Customer Detail pages. Feedback centered on layout consistency between Quotes and Customers pages, too much visual noise from filter chips, missing column interactivity, and workflow gaps in customer creation and timeline navigation.\n\n## Feedback Items\n\n| # | Feedback | Solution |\n|---|----------|----------|\n| 1 | Quotes search bar misaligned with Customers layout | Moved search left, added clear X button, matches Customers pattern |\n| 2 | Filter chips too noisy — want filtering inside column headers | Created `ColumnHeaderMenu` component with sort + inline filter dropdown |\n| 3 | Type, Lifecycle, Health columns should be sortable | Added sort by Type (first tag alphabetical), Lifecycle/Health (ordinal) |\n| 4 | Health column needs its own filter | Added `?health=` URL param with inline filter dropdown |\n| 5 | \"Add Customer\" should have a \"Save & View Details\" option | New button in AddCustomerModal, navigates to detail page using generated UUID |\n| 6 | Activity timeline items should be clickable | Quote icons link to `/quotes/:id`, note icons switch to Notes tab |\n| 7 | Customer Quotes table — Date should come before Status | Reordered: Quote # | Date | Status | Total |\n| 8 | Contact \"Other\" role needs custom description field | Text input appears when role === \"other\" |\n\n## New Component: ColumnHeaderMenu\n\n### Reusable Column Header with Sort + Filter\n\nClick the header label to toggle sort direction. A small filter icon opens a Radix DropdownMenu with Sort Ascending/Descending items and optional checkbox filters. Active filters turn the icon cyan. Used across both Customers (7 columns, 3 with filters) and Quotes (6 columns, sort-only). Mobile-friendly: icon always visible, no hover dependency.\n\n## Code Quality Improvements\n\n- **CodeRabbit fixes** — Added `focus-visible:ring-2` to 3 interactive timeline elements, changed sort menu items to pass explicit `\"asc\"`/`\"desc\"` direction\n- **Zod enum refactor** — Replaced manual `type SortKey = \"company\" | ...` with `z.enum()` schemas and `z.infer` derived types. URL params now safely parsed with `.catch()` fallback.\n- **Generated customer ID** — `AddCustomerModal` now generates a UUID via `crypto.randomUUID()` and passes it through `onSaveAndView`. Navigation uses the real ID instead of `customers[0].id`.\n\n## Pull Requests\n\n- [PR #33](https://github.com/cmbays/print-4ink/pull/33) — Quality gate fixes (prerequisite, merged first)\n- [PR #35](https://github.com/cmbays/print-4ink/pull/35) — All 8 feedback items + CodeRabbit fixes + Zod enums + generated ID\n\n---\n\n## Customer Management Vertical — Complete Chain\n\nThe Customer Management vertical is now fully built, audited, and feedback-incorporated:\n\n1. **Data Foundation** (PR #24) — Schemas, mock data, badge components, 264 tests\n2. **Breadboard** — 9 places, 102 UI affordances, 33 code affordances, 4-phase build order\n3. **Customer List Page** (PR #29) — SmartViewTabs, DataTable, StatsBar, mobile cards\n4. **Customer Detail Page** (PR #31) — Header, 7 tabs (Activity, Quotes, Jobs, Artwork, Contacts, Details, Notes)\n5. **Quoting Interconnection** (PR #28) — CustomerCombobox lifecycle badges, enriched context card\n6. **Quality Gate** (PR #33) — 5-subagent audit, 10 fixes across 11 files\n7. **User Feedback** (PR #35) — 8 items addressed, ColumnHeaderMenu, timeline interactivity\n\n## What's Next\n\n- **Demo both verticals** (Quoting + Customer Management) to 4Ink owner\n- **Collect final feedback** — target 8+ rating on Clarity, Speed, Polish, Value\n- **Address deferred tech debt** (#15-#18) as needed\n- **Move to Invoicing vertical**","src/content/sessions/2026-02-10-customer-feedback.md","b8f74847e4bc9767",{"html":666,"metadata":667},"\u003Ch2 id=\"summary\">Summary\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Stat\u003C/th>\u003Cth>Value\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>Feedback Items\u003C/td>\u003Ctd>8\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Files Changed\u003C/td>\u003Ctd>10\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>PRs Merged\u003C/td>\u003Ctd>3\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Cp>The 4Ink owner reviewed both the Customer List and Customer Detail pages. Feedback centered on layout consistency between Quotes and Customers pages, too much visual noise from filter chips, missing column interactivity, and workflow gaps in customer creation and timeline navigation.\u003C/p>\n\u003Ch2 id=\"feedback-items\">Feedback Items\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>#\u003C/th>\u003Cth>Feedback\u003C/th>\u003Cth>Solution\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>1\u003C/td>\u003Ctd>Quotes search bar misaligned with Customers layout\u003C/td>\u003Ctd>Moved search left, added clear X button, matches Customers pattern\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>2\u003C/td>\u003Ctd>Filter chips too noisy — want filtering inside column headers\u003C/td>\u003Ctd>Created \u003Ccode>ColumnHeaderMenu\u003C/code> component with sort + inline filter dropdown\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>3\u003C/td>\u003Ctd>Type, Lifecycle, Health columns should be sortable\u003C/td>\u003Ctd>Added sort by Type (first tag alphabetical), Lifecycle/Health (ordinal)\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>4\u003C/td>\u003Ctd>Health column needs its own filter\u003C/td>\u003Ctd>Added \u003Ccode>?health=\u003C/code> URL param with inline filter dropdown\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>5\u003C/td>\u003Ctd>”Add Customer” should have a “Save &#x26; View Details” option\u003C/td>\u003Ctd>New button in AddCustomerModal, navigates to detail page using generated UUID\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>6\u003C/td>\u003Ctd>Activity timeline items should be clickable\u003C/td>\u003Ctd>Quote icons link to \u003Ccode>/quotes/:id\u003C/code>, note icons switch to Notes tab\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>7\u003C/td>\u003Ctd>Customer Quotes table — Date should come before Status\u003C/td>\u003Ctd>Reordered: Quote #\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>8\u003C/td>\u003Ctd>Contact “Other” role needs custom description field\u003C/td>\u003Ctd>Text input appears when role === “other”\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"new-component-columnheadermenu\">New Component: ColumnHeaderMenu\u003C/h2>\n\u003Ch3 id=\"reusable-column-header-with-sort--filter\">Reusable Column Header with Sort + Filter\u003C/h3>\n\u003Cp>Click the header label to toggle sort direction. A small filter icon opens a Radix DropdownMenu with Sort Ascending/Descending items and optional checkbox filters. Active filters turn the icon cyan. Used across both Customers (7 columns, 3 with filters) and Quotes (6 columns, sort-only). Mobile-friendly: icon always visible, no hover dependency.\u003C/p>\n\u003Ch2 id=\"code-quality-improvements\">Code Quality Improvements\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Cstrong>CodeRabbit fixes\u003C/strong> — Added \u003Ccode>focus-visible:ring-2\u003C/code> to 3 interactive timeline elements, changed sort menu items to pass explicit \u003Ccode>\"asc\"\u003C/code>/\u003Ccode>\"desc\"\u003C/code> direction\u003C/li>\n\u003Cli>\u003Cstrong>Zod enum refactor\u003C/strong> — Replaced manual \u003Ccode>type SortKey = \"company\" | ...\u003C/code> with \u003Ccode>z.enum()\u003C/code> schemas and \u003Ccode>z.infer\u003C/code> derived types. URL params now safely parsed with \u003Ccode>.catch()\u003C/code> fallback.\u003C/li>\n\u003Cli>\u003Cstrong>Generated customer ID\u003C/strong> — \u003Ccode>AddCustomerModal\u003C/code> now generates a UUID via \u003Ccode>crypto.randomUUID()\u003C/code> and passes it through \u003Ccode>onSaveAndView\u003C/code>. Navigation uses the real ID instead of \u003Ccode>customers[0].id\u003C/code>.\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"pull-requests\">Pull Requests\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Ca href=\"https://github.com/cmbays/print-4ink/pull/33\">PR #33\u003C/a> — Quality gate fixes (prerequisite, merged first)\u003C/li>\n\u003Cli>\u003Ca href=\"https://github.com/cmbays/print-4ink/pull/35\">PR #35\u003C/a> — All 8 feedback items + CodeRabbit fixes + Zod enums + generated ID\u003C/li>\n\u003C/ul>\n\u003Chr>\n\u003Ch2 id=\"customer-management-vertical--complete-chain\">Customer Management Vertical — Complete Chain\u003C/h2>\n\u003Cp>The Customer Management vertical is now fully built, audited, and feedback-incorporated:\u003C/p>\n\u003Col>\n\u003Cli>\u003Cstrong>Data Foundation\u003C/strong> (PR #24) — Schemas, mock data, badge components, 264 tests\u003C/li>\n\u003Cli>\u003Cstrong>Breadboard\u003C/strong> — 9 places, 102 UI affordances, 33 code affordances, 4-phase build order\u003C/li>\n\u003Cli>\u003Cstrong>Customer List Page\u003C/strong> (PR #29) — SmartViewTabs, DataTable, StatsBar, mobile cards\u003C/li>\n\u003Cli>\u003Cstrong>Customer Detail Page\u003C/strong> (PR #31) — Header, 7 tabs (Activity, Quotes, Jobs, Artwork, Contacts, Details, Notes)\u003C/li>\n\u003Cli>\u003Cstrong>Quoting Interconnection\u003C/strong> (PR #28) — CustomerCombobox lifecycle badges, enriched context card\u003C/li>\n\u003Cli>\u003Cstrong>Quality Gate\u003C/strong> (PR #33) — 5-subagent audit, 10 fixes across 11 files\u003C/li>\n\u003Cli>\u003Cstrong>User Feedback\u003C/strong> (PR #35) — 8 items addressed, ColumnHeaderMenu, timeline interactivity\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"whats-next\">What’s Next\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Cstrong>Demo both verticals\u003C/strong> (Quoting + Customer Management) to 4Ink owner\u003C/li>\n\u003Cli>\u003Cstrong>Collect final feedback\u003C/strong> — target 8+ rating on Clarity, Speed, Polish, Value\u003C/li>\n\u003Cli>\u003Cstrong>Address deferred tech debt\u003C/strong> (#15-#18) as needed\u003C/li>\n\u003Cli>\u003Cstrong>Move to Invoicing vertical\u003C/strong>\u003C/li>\n\u003C/ul>",{"headings":668,"localImagePaths":689,"remoteImagePaths":690,"frontmatter":691,"imagePaths":695},[669,672,675,678,681,684,685,688],{"depth":34,"slug":670,"text":671},"summary","Summary",{"depth":34,"slug":673,"text":674},"feedback-items","Feedback Items",{"depth":34,"slug":676,"text":677},"new-component-columnheadermenu","New Component: ColumnHeaderMenu",{"depth":40,"slug":679,"text":680},"reusable-column-header-with-sort--filter","Reusable Column Header with Sort + Filter",{"depth":34,"slug":682,"text":683},"code-quality-improvements","Code Quality Improvements",{"depth":34,"slug":354,"text":355},{"depth":34,"slug":686,"text":687},"customer-management-vertical--complete-chain","Customer Management Vertical — Complete Chain",{"depth":34,"slug":643,"text":644},[],[],{"title":655,"subtitle":656,"date":692,"phase":17,"vertical":614,"verticalSecondary":693,"stage":616,"tags":694,"sessionId":660,"branch":661,"status":25},["Date","2026-02-10T00:00:00.000Z"],[],[77,75],[],"2026-02-10-customer-list-page",{"id":696,"data":698,"body":706,"filePath":707,"digest":708,"rendered":709},{"title":699,"subtitle":700,"date":701,"phase":17,"vertical":614,"verticalSecondary":702,"stage":75,"tags":703,"sessionId":704,"branch":705,"status":25},"Customer List Page","Smart views, search, filters, stats bar, responsive table — the /customers browse experience",["Date","2026-02-10T00:00:00.000Z"],[],[77,75],"b11a4feb-edb5-44ec-89a2-cedd0cb9c591","session/0210-customer-list","## Build Overview\n\n| Stat | Value |\n|------|-------|\n| Components | 4 |\n| Smart Views | 5 |\n| Table Columns | 7 |\n| Tests Pass | 264 |\n\nBuilt the Customer List page (`/customers`) using an orchestrator pattern with 4 parallel subagents. Each component was built independently with well-defined interfaces, then integrated and verified.\n\n## Components Built\n\n### SmartViewTabs\n\n5 filterable view chips: All Customers, Prospects, Top Customers, Needs Attention, Seasonal. URL-driven via `?view=`. Keyboard navigable (arrow keys, Home/End). ARIA tablist/tab roles. Mobile: horizontal scroll with hidden scrollbar.\n\n### CustomersDataTable\n\n7 sortable columns: Company, Primary Contact, Type Tags, Lifecycle, Health, Last Order, Revenue. **Desktop:** Full table with clickable sort headers. **Mobile:** Card list layout below 768px. Global search (`?q=`), type tag filter chips (`?tags=`), lifecycle filter (`?lifecycle=`), archived toggle (`?archived=`), column sort (`?sort=`, `?dir=`). Revenue computed from accepted quote totals. Row click navigates to `/customers/[id]`. Empty state with contextual messaging. Result count footer. \"Clear all\" filter reset.\n\n### CustomerListStatsBar\n\n4 metric cards: Total Customers, Active, Revenue YTD, Prospects. 2x2 grid on mobile, 4-column on desktop. Revenue computed from accepted quotes in current year.\n\n### AddCustomerModal (Enhanced)\n\nBreaking interface update: Company is now **required** (was optional). \"Name\" renamed to \"Contact Name\". Email OR phone required (was email-only). Customer Type: multi-select pill buttons replacing single dropdown. New `lifecycleStage` prop: defaults to \"new\" from customer list, \"prospect\" from quoting. Updated QuoteForm caller to match new interface.\n\n## Smart View Logic\n\n- **All Customers** — Default view, all non-archived\n- **Prospects** — lifecycleStage === \"prospect\"\n- **Top Customers** — Sorted by lifetime revenue descending\n- **Needs Attention** — healthStatus === \"potentially-churning\"\n- **Seasonal** — Customers with sports/school type tag\n\n## URL State Architecture\n\nAll filters are URL-driven for shareability and back/forward navigation:\n\n- `?view=` — Smart view tab (all, prospects, top, attention, seasonal)\n- `?q=` — Global search (debounced 300ms)\n- `?tags=` — Type tag filters (comma-separated)\n- `?lifecycle=` — Lifecycle stage filter\n- `?sort=` / `?dir=` — Column sorting\n- `?archived=true` — Show archived customers\n\n## Integration Fixes\n\n- **QuoteForm interface update** — Updated `handleAddNewCustomer` callback to match new AddCustomerModal signature (company required, email optional, typeTags array, lifecycleStage)\n- **CustomerTypeTag import** — Added to QuoteForm imports\n- **Lint warning fix** — Wrapped `activeTags` in useMemo to stabilize dependency array\n\n## Verification\n\n- **tsc --noEmit** — 0 errors\n- **npm run lint** — 0 errors (3 warnings in non-critical code)\n- **npm test** — 264 tests passing (12 files)\n- **npm run build** — Success, `/customers` renders as static page","src/content/sessions/2026-02-10-customer-list-page.md","cf767ebedfcce896",{"html":710,"metadata":711},"\u003Ch2 id=\"build-overview\">Build Overview\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Stat\u003C/th>\u003Cth>Value\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>Components\u003C/td>\u003Ctd>4\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Smart Views\u003C/td>\u003Ctd>5\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Table Columns\u003C/td>\u003Ctd>7\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Tests Pass\u003C/td>\u003Ctd>264\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Cp>Built the Customer List page (\u003Ccode>/customers\u003C/code>) using an orchestrator pattern with 4 parallel subagents. Each component was built independently with well-defined interfaces, then integrated and verified.\u003C/p>\n\u003Ch2 id=\"components-built\">Components Built\u003C/h2>\n\u003Ch3 id=\"smartviewtabs\">SmartViewTabs\u003C/h3>\n\u003Cp>5 filterable view chips: All Customers, Prospects, Top Customers, Needs Attention, Seasonal. URL-driven via \u003Ccode>?view=\u003C/code>. Keyboard navigable (arrow keys, Home/End). ARIA tablist/tab roles. Mobile: horizontal scroll with hidden scrollbar.\u003C/p>\n\u003Ch3 id=\"customersdatatable\">CustomersDataTable\u003C/h3>\n\u003Cp>7 sortable columns: Company, Primary Contact, Type Tags, Lifecycle, Health, Last Order, Revenue. \u003Cstrong>Desktop:\u003C/strong> Full table with clickable sort headers. \u003Cstrong>Mobile:\u003C/strong> Card list layout below 768px. Global search (\u003Ccode>?q=\u003C/code>), type tag filter chips (\u003Ccode>?tags=\u003C/code>), lifecycle filter (\u003Ccode>?lifecycle=\u003C/code>), archived toggle (\u003Ccode>?archived=\u003C/code>), column sort (\u003Ccode>?sort=\u003C/code>, \u003Ccode>?dir=\u003C/code>). Revenue computed from accepted quote totals. Row click navigates to \u003Ccode>/customers/[id]\u003C/code>. Empty state with contextual messaging. Result count footer. “Clear all” filter reset.\u003C/p>\n\u003Ch3 id=\"customerliststatsbar\">CustomerListStatsBar\u003C/h3>\n\u003Cp>4 metric cards: Total Customers, Active, Revenue YTD, Prospects. 2x2 grid on mobile, 4-column on desktop. Revenue computed from accepted quotes in current year.\u003C/p>\n\u003Ch3 id=\"addcustomermodal-enhanced\">AddCustomerModal (Enhanced)\u003C/h3>\n\u003Cp>Breaking interface update: Company is now \u003Cstrong>required\u003C/strong> (was optional). “Name” renamed to “Contact Name”. Email OR phone required (was email-only). Customer Type: multi-select pill buttons replacing single dropdown. New \u003Ccode>lifecycleStage\u003C/code> prop: defaults to “new” from customer list, “prospect” from quoting. Updated QuoteForm caller to match new interface.\u003C/p>\n\u003Ch2 id=\"smart-view-logic\">Smart View Logic\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Cstrong>All Customers\u003C/strong> — Default view, all non-archived\u003C/li>\n\u003Cli>\u003Cstrong>Prospects\u003C/strong> — lifecycleStage === “prospect”\u003C/li>\n\u003Cli>\u003Cstrong>Top Customers\u003C/strong> — Sorted by lifetime revenue descending\u003C/li>\n\u003Cli>\u003Cstrong>Needs Attention\u003C/strong> — healthStatus === “potentially-churning”\u003C/li>\n\u003Cli>\u003Cstrong>Seasonal\u003C/strong> — Customers with sports/school type tag\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"url-state-architecture\">URL State Architecture\u003C/h2>\n\u003Cp>All filters are URL-driven for shareability and back/forward navigation:\u003C/p>\n\u003Cul>\n\u003Cli>\u003Ccode>?view=\u003C/code> — Smart view tab (all, prospects, top, attention, seasonal)\u003C/li>\n\u003Cli>\u003Ccode>?q=\u003C/code> — Global search (debounced 300ms)\u003C/li>\n\u003Cli>\u003Ccode>?tags=\u003C/code> — Type tag filters (comma-separated)\u003C/li>\n\u003Cli>\u003Ccode>?lifecycle=\u003C/code> — Lifecycle stage filter\u003C/li>\n\u003Cli>\u003Ccode>?sort=\u003C/code> / \u003Ccode>?dir=\u003C/code> — Column sorting\u003C/li>\n\u003Cli>\u003Ccode>?archived=true\u003C/code> — Show archived customers\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"integration-fixes\">Integration Fixes\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Cstrong>QuoteForm interface update\u003C/strong> — Updated \u003Ccode>handleAddNewCustomer\u003C/code> callback to match new AddCustomerModal signature (company required, email optional, typeTags array, lifecycleStage)\u003C/li>\n\u003Cli>\u003Cstrong>CustomerTypeTag import\u003C/strong> — Added to QuoteForm imports\u003C/li>\n\u003Cli>\u003Cstrong>Lint warning fix\u003C/strong> — Wrapped \u003Ccode>activeTags\u003C/code> in useMemo to stabilize dependency array\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"verification\">Verification\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Cstrong>tsc —noEmit\u003C/strong> — 0 errors\u003C/li>\n\u003Cli>\u003Cstrong>npm run lint\u003C/strong> — 0 errors (3 warnings in non-critical code)\u003C/li>\n\u003Cli>\u003Cstrong>npm test\u003C/strong> — 264 tests passing (12 files)\u003C/li>\n\u003Cli>\u003Cstrong>npm run build\u003C/strong> — Success, \u003Ccode>/customers\u003C/code> renders as static page\u003C/li>\n\u003C/ul>",{"headings":712,"localImagePaths":741,"remoteImagePaths":742,"frontmatter":743,"imagePaths":747},[713,716,719,722,725,728,731,734,737,740],{"depth":34,"slug":714,"text":715},"build-overview","Build Overview",{"depth":34,"slug":717,"text":718},"components-built","Components Built",{"depth":40,"slug":720,"text":721},"smartviewtabs","SmartViewTabs",{"depth":40,"slug":723,"text":724},"customersdatatable","CustomersDataTable",{"depth":40,"slug":726,"text":727},"customerliststatsbar","CustomerListStatsBar",{"depth":40,"slug":729,"text":730},"addcustomermodal-enhanced","AddCustomerModal (Enhanced)",{"depth":34,"slug":732,"text":733},"smart-view-logic","Smart View Logic",{"depth":34,"slug":735,"text":736},"url-state-architecture","URL State Architecture",{"depth":34,"slug":738,"text":739},"integration-fixes","Integration Fixes",{"depth":34,"slug":167,"text":168},[],[],{"title":699,"subtitle":700,"date":744,"phase":17,"vertical":614,"verticalSecondary":745,"stage":75,"tags":746,"sessionId":704,"branch":705,"status":25},["Date","2026-02-10T00:00:00.000Z"],[],[77,75],[],"2026-02-10-customer-mgmt-breadboard",{"id":748,"data":750,"body":758,"filePath":759,"digest":760,"rendered":761},{"title":751,"subtitle":752,"date":753,"phase":17,"vertical":614,"verticalSecondary":754,"stage":187,"tags":755,"sessionId":756,"branch":757,"status":25},"Customer Management Breadboard","Interactive visualization of Places, Components, Wiring, and Build Order for the Customer Management vertical",["Date","2026-02-10T00:00:00.000Z"],[],[189,75],"69497710-9bb5-46d9-8e49-949cda0e9d65","session/0209-customer-mgmt-discovery","| Stat | Value |\n|------|-------|\n| Places | 9 |\n| UI Affordances | 102 |\n| Code Affordances | 33 |\n| Components | 21 |\n\n## Place Map\n\nPages are bounded contexts where affordances live. Modals block what's behind them, creating sub-Places. Arrows show primary navigation paths.\n\n## Pages\n\n### P1 — Customer List\n\n**Route:** `/customers`\n\nBrowse, search, filter with 5 smart views (All, Prospects, Top, Needs Attention, Seasonal). Quick stats bar, type tag filters, sortable columns.\n\n- 16 UI affordances · 7 code affordances\n\n### P2 — Customer Detail\n\n**Route:** `/customers/[id]`\n\nFull customer dashboard. Header with stats + lifecycle badge + actions. 7 tabs: Activity, Quotes, Jobs, Artwork, Contacts, Details, Notes.\n\n- 73 UI affordances · 23 code affordances\n\n## Modals & Sub-Places\n\n**From Customer List (P1):**\n\n### P1.1 — Add Customer Modal\n\nQuick-create: company, contact, email/phone, type tags. \u003C 30 seconds.\n\n- 8 UI · 2 code\n\n**From Customer Detail (P2):**\n\n### P2.2 — Add Contact\n\nName, email, phone, role, group assignment, primary flag.\n\n- 8 UI\n\n### P2.3 — Add Group\n\nGroup name within company.\n\n- 3 UI\n\n### P2.4 — Edit Customer\n\nFull profile: tags, payment terms, pricing, tax, addresses, referral, lifecycle override.\n\n- 13 UI\n\n### P2.5 — Archive Confirm\n\nConfirmation dialog before archiving.\n\n- 3 UI\n\n## Cross-Vertical Navigation\n\n```\nP1 Customer List\n  click row → P2 /customers/[id]\n  click Add Customer → P1.1 Add Customer Modal\n\nP2 Customer Detail\n  click \"New Quote\" → /quotes/new?customer={id}\n  click quote row → /quotes/[id]\n  click job row → /jobs/[id]\n  click \"Copy as New\" → /quotes/new?from={quoteId}\n  click referrer → P2 /customers/[referrerId]\n  click \"Archive\" → P1 /customers\n  breadcrumb → P1 /customers or / dashboard\n```\n\n## P2 Tab Structure\n\n| Tab | Notes | Affordances |\n|-----|-------|-------------|\n| Activity | Default tab | 3 |\n| Quotes | | 3 |\n| Jobs | | 2 |\n| Artwork | | 7 |\n| Contacts | | 7 |\n| Details | | 8 |\n| Notes | Default for Prospects | 8 |\n\n## Component Map\n\nComponents are grouped by reusability. Shared components live in `components/features/` and are reused across verticals. Vertical-specific components live under `app/(dashboard)/customers/`. Existing components are already built.\n\n### Existing (Enhance)\n\n- **AddCustomerModal** — `components/features/` — Used in: P1.1, Quoting — Needs: type tags, lifecycle auto-set, company required\n- **CustomerCombobox** — `components/features/` — Used in: Quoting, P2.4 — Needs: lifecycle badge, enriched display\n- **StatusBadge** — `components/features/` — Used in: P2 Quotes tab — Reuse as-is for quote status display\n\n### New Shared Components (Reusable Across Verticals)\n\n- **LifecycleBadge** — `components/features/` — Used in: P1, P2, Quoting — Prospect(cyan) New(white) Repeat(green) Contract(amber)\n- **HealthBadge** — `components/features/` — Used in: P1, P2 — Only shows when not Active\n- **TypeTagBadges** — `components/features/` — Used in: P1, P2, P2.4 — Display + edit (multi-select) modes\n- **CustomerQuickStats** — `components/features/` — Used in: P1 (bar), P2 (header) — Revenue, orders, AOV, last order\n- **ArtworkGallery** — `components/features/` — Used in: P2 Artwork tab — Smart-sorted thumbnails, badges, tooltips\n- **NotesPanel** — `components/features/` — Used in: P2 Notes tab — Quick-add, pin, channel tags. Reusable for any entity.\n\n### Customer List Page Components\n\n- **SmartViewTabs** — `app/.../customers/_components/` — Used in: P1 — All, Prospects, Top, Needs Attention, Seasonal\n- **CustomersDataTable** — `app/.../customers/_components/` — Used in: P1 — Extends shared table pattern\n- **CustomerListStatsBar** — `app/.../customers/_components/` — Used in: P1 — Total, Active, Revenue YTD, Prospects\n\n### Customer Detail Page Components\n\n- **CustomerDetailHeader** — `app/.../customers/[id]/_components/` — Used in: P2 — Company, contact, badges, stats, actions\n- **ActivityTimeline** — `app/.../customers/[id]/_components/` — Used in: P2 Activity tab — Reverse-chronological merged events\n- **CustomerQuotesTable** — `app/.../customers/[id]/_components/` — Used in: P2 Quotes tab — Quote #, status, total, Copy as New\n- **CustomerJobsTable** — `app/.../customers/[id]/_components/` — Used in: P2 Jobs tab — Job #, status, due date\n- **ContactHierarchy** — `app/.../customers/[id]/_components/` — Used in: P2 Contacts tab — Company → Group → Contact tree\n- **CustomerDetailsPanel** — `app/.../customers/[id]/_components/` — Used in: P2 Details tab — Addresses, tax, payment, pricing, referral\n- **EditCustomerSheet** — `app/.../customers/[id]/_components/` — Used in: P2.4 — Full profile edit form\n- **AddContactSheet** — `app/.../customers/[id]/_components/` — Used in: P2.2\n- **AddGroupSheet** — `app/.../customers/[id]/_components/` — Used in: P2.3\n\n## Build Order\n\nBuild phases flow top-to-bottom. Steps within a phase can run in parallel. Phases B, C, and D can all run in parallel once Phase A completes.\n\n### Phase A — Foundation + Shared Components\n\nAll steps in this phase can run in parallel (after steps 1-2 complete as the base)\n\n1. Schemas (contact, address, group, note, expanded customer) — Medium\n2. Mock Data Expansion (10 customers, contacts, notes, addresses) — High\n\nAfter 1-2 complete:\n\n3. LifecycleBadge — Low\n4. HealthBadge — Low\n5. TypeTagBadges — Low\n6. NotesPanel (shared) — Medium\n7. ArtworkGallery (shared) — High\n8. AddCustomerModal (enhanced) — Low-Med\n9. CustomerQuickStats — Low\n\n### Phase B — Customer List Page\n\nCan start as soon as Phase A schemas + badges are ready.\n\n10. Customer List (/customers) — High\n\n### Phase C — Customer Detail Page\n\nLargest phase — header + 7 tabs + 4 modals.\n\n11. Customer Detail + All Sub-components — Very High\n\n### Phase D — Interconnections\n\nEnhance existing quoting combobox.\n\n13. Quoting Interconnection — Low-Med\n\n## Dependency Graph Summary\n\n```\nStep 1 Schemas → blocks everything\nStep 2 Mock Data → blocks all display components\nSteps 3-9 Shared Components → run in parallel, block pages\nStep 10 Customer List → needs 1-5, 8-9\nStep 11 Customer Detail → needs 1-9 (all shared components)\nStep 13 Quoting → needs 1-3 only (schemas, data, LifecycleBadge)\n```\n\n## Data Flow\n\nShows where state lives and how it flows between affordances. Color indicates state type.\n\n**State Types:**\n\n- URL State — filters, search, sort\n- React State — form inputs, tab selection\n- Mock Data — imported, mutated in-memory\n- Derived — computed from other stores\n\n### URL State — Persists across page refreshes, shareable\n\n**S1 — Customer List Params**\n\n`?q` · `?view` · `?tags` · `?lifecycle` · `?sort` · `?dir` · `?archived`\n\n- Readers: N1, N2, N3, N4, N5, N7, N33\n- Writers: U1 search, U2-U6 tabs, U7 tags, U8 lifecycle, U9 sort, U12 archive\n\n### React State — Component-local, resets on navigation\n\n**S2 — Active Tab** — P2 tab selection\n\n- Readers: U42, tab content\n- Writers: N13 setActiveTab, N32 (defaults: \"notes\" for Prospects, \"activity\" otherwise)\n\n**S5 — Add Customer Form** — P1.1 form inputs\n\n- Readers: U20-U24, N9 validate\n- Writers: U20-U24 typing, N8 reset\n\n**S6 — Artwork View** — sort mode, selected artwork\n\n- Readers: U65, U69\n- Writers: N19 sort, N21 select\n\n**S7 — Note Draft** — content + channel tag\n\n- Readers: U95, U96\n- Writers: U95 type, U96 select, N23 clear\n\n**S8 — Contact Form** — P2.2 inputs\n\n**S9 — Group Form** — P2.3 inputs\n\n**S10 — Edit Customer Form** — P2.4 full profile edit\n\n- Readers: U125-U135, N29\n- Writers: U125-U135 inputs, P2.4 mount (pre-fill)\n\n### Mock Data — Imported from lib/mock-data.ts, mutated in-memory (Phase 1)\n\n**S3 — All Mock Data**\n\ncustomers · contacts · groups · notes · quotes · jobs · artworks\n\n- Readers: N1, N11, N14-N18, N24-N25, all display affordances\n- Writers: N8 (add customer), N22 (set primary), N23 (add note), N26 (pin), N27-N30 (CRUD)\n\n### Derived — Computed from other stores, not persisted\n\n**S4 — Quick Stats**\n\nTotal customers, Active this month, YTD revenue, Prospect count\n\n- Readers: U13 stats bar\n- Writers: N31 (recomputed when S3 changes)\n\n## Key Data Flows\n\n**Search & Filter Flow:**\nU1 type query → S1 ?q param → N1 filterCustomers() → Table rows update\n\n**Add Customer Flow:**\nU25 click Save → N9 validate → N8 saveNewCustomer() → S3 add to mock data → Close modal, update list\n\n**Note Creation Flow:**\nU95 type note + U96 select channel → S7 draft state → U97 click Add → N23 addNote() → S3 add to notes → Prepend to list, clear draft\n\n**Cross-Vertical: New Quote from Customer:**\nU38 click \"New Quote\" → N12 navigateToNewQuote() → /quotes/new?customer={id} → Quote form auto-selects customer","src/content/sessions/2026-02-10-customer-mgmt-breadboard.md","9f6518aded5a7178",{"html":762,"metadata":763},"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Stat\u003C/th>\u003Cth>Value\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>Places\u003C/td>\u003Ctd>9\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>UI Affordances\u003C/td>\u003Ctd>102\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Code Affordances\u003C/td>\u003Ctd>33\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Components\u003C/td>\u003Ctd>21\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"place-map\">Place Map\u003C/h2>\n\u003Cp>Pages are bounded contexts where affordances live. Modals block what’s behind them, creating sub-Places. Arrows show primary navigation paths.\u003C/p>\n\u003Ch2 id=\"pages\">Pages\u003C/h2>\n\u003Ch3 id=\"p1--customer-list\">P1 — Customer List\u003C/h3>\n\u003Cp>\u003Cstrong>Route:\u003C/strong> \u003Ccode>/customers\u003C/code>\u003C/p>\n\u003Cp>Browse, search, filter with 5 smart views (All, Prospects, Top, Needs Attention, Seasonal). Quick stats bar, type tag filters, sortable columns.\u003C/p>\n\u003Cul>\n\u003Cli>16 UI affordances · 7 code affordances\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"p2--customer-detail\">P2 — Customer Detail\u003C/h3>\n\u003Cp>\u003Cstrong>Route:\u003C/strong> \u003Ccode>/customers/[id]\u003C/code>\u003C/p>\n\u003Cp>Full customer dashboard. Header with stats + lifecycle badge + actions. 7 tabs: Activity, Quotes, Jobs, Artwork, Contacts, Details, Notes.\u003C/p>\n\u003Cul>\n\u003Cli>73 UI affordances · 23 code affordances\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"modals--sub-places\">Modals &#x26; Sub-Places\u003C/h2>\n\u003Cp>\u003Cstrong>From Customer List (P1):\u003C/strong>\u003C/p>\n\u003Ch3 id=\"p11--add-customer-modal\">P1.1 — Add Customer Modal\u003C/h3>\n\u003Cp>Quick-create: company, contact, email/phone, type tags. &#x3C; 30 seconds.\u003C/p>\n\u003Cul>\n\u003Cli>8 UI · 2 code\u003C/li>\n\u003C/ul>\n\u003Cp>\u003Cstrong>From Customer Detail (P2):\u003C/strong>\u003C/p>\n\u003Ch3 id=\"p22--add-contact\">P2.2 — Add Contact\u003C/h3>\n\u003Cp>Name, email, phone, role, group assignment, primary flag.\u003C/p>\n\u003Cul>\n\u003Cli>8 UI\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"p23--add-group\">P2.3 — Add Group\u003C/h3>\n\u003Cp>Group name within company.\u003C/p>\n\u003Cul>\n\u003Cli>3 UI\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"p24--edit-customer\">P2.4 — Edit Customer\u003C/h3>\n\u003Cp>Full profile: tags, payment terms, pricing, tax, addresses, referral, lifecycle override.\u003C/p>\n\u003Cul>\n\u003Cli>13 UI\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"p25--archive-confirm\">P2.5 — Archive Confirm\u003C/h3>\n\u003Cp>Confirmation dialog before archiving.\u003C/p>\n\u003Cul>\n\u003Cli>3 UI\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"cross-vertical-navigation\">Cross-Vertical Navigation\u003C/h2>\n\u003Cpre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>P1 Customer List\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  click row → P2 /customers/[id]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  click Add Customer → P1.1 Add Customer Modal\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>P2 Customer Detail\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  click \"New Quote\" → /quotes/new?customer={id}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  click quote row → /quotes/[id]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  click job row → /jobs/[id]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  click \"Copy as New\" → /quotes/new?from={quoteId}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  click referrer → P2 /customers/[referrerId]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  click \"Archive\" → P1 /customers\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  breadcrumb → P1 /customers or / dashboard\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"p2-tab-structure\">P2 Tab Structure\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Tab\u003C/th>\u003Cth>Notes\u003C/th>\u003Cth>Affordances\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>Activity\u003C/td>\u003Ctd>Default tab\u003C/td>\u003Ctd>3\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Quotes\u003C/td>\u003Ctd>\u003C/td>\u003Ctd>3\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Jobs\u003C/td>\u003Ctd>\u003C/td>\u003Ctd>2\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Artwork\u003C/td>\u003Ctd>\u003C/td>\u003Ctd>7\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Contacts\u003C/td>\u003Ctd>\u003C/td>\u003Ctd>7\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Details\u003C/td>\u003Ctd>\u003C/td>\u003Ctd>8\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Notes\u003C/td>\u003Ctd>Default for Prospects\u003C/td>\u003Ctd>8\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"component-map\">Component Map\u003C/h2>\n\u003Cp>Components are grouped by reusability. Shared components live in \u003Ccode>components/features/\u003C/code> and are reused across verticals. Vertical-specific components live under \u003Ccode>app/(dashboard)/customers/\u003C/code>. Existing components are already built.\u003C/p>\n\u003Ch3 id=\"existing-enhance\">Existing (Enhance)\u003C/h3>\n\u003Cul>\n\u003Cli>\u003Cstrong>AddCustomerModal\u003C/strong> — \u003Ccode>components/features/\u003C/code> — Used in: P1.1, Quoting — Needs: type tags, lifecycle auto-set, company required\u003C/li>\n\u003Cli>\u003Cstrong>CustomerCombobox\u003C/strong> — \u003Ccode>components/features/\u003C/code> — Used in: Quoting, P2.4 — Needs: lifecycle badge, enriched display\u003C/li>\n\u003Cli>\u003Cstrong>StatusBadge\u003C/strong> — \u003Ccode>components/features/\u003C/code> — Used in: P2 Quotes tab — Reuse as-is for quote status display\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"new-shared-components-reusable-across-verticals\">New Shared Components (Reusable Across Verticals)\u003C/h3>\n\u003Cul>\n\u003Cli>\u003Cstrong>LifecycleBadge\u003C/strong> — \u003Ccode>components/features/\u003C/code> — Used in: P1, P2, Quoting — Prospect(cyan) New(white) Repeat(green) Contract(amber)\u003C/li>\n\u003Cli>\u003Cstrong>HealthBadge\u003C/strong> — \u003Ccode>components/features/\u003C/code> — Used in: P1, P2 — Only shows when not Active\u003C/li>\n\u003Cli>\u003Cstrong>TypeTagBadges\u003C/strong> — \u003Ccode>components/features/\u003C/code> — Used in: P1, P2, P2.4 — Display + edit (multi-select) modes\u003C/li>\n\u003Cli>\u003Cstrong>CustomerQuickStats\u003C/strong> — \u003Ccode>components/features/\u003C/code> — Used in: P1 (bar), P2 (header) — Revenue, orders, AOV, last order\u003C/li>\n\u003Cli>\u003Cstrong>ArtworkGallery\u003C/strong> — \u003Ccode>components/features/\u003C/code> — Used in: P2 Artwork tab — Smart-sorted thumbnails, badges, tooltips\u003C/li>\n\u003Cli>\u003Cstrong>NotesPanel\u003C/strong> — \u003Ccode>components/features/\u003C/code> — Used in: P2 Notes tab — Quick-add, pin, channel tags. Reusable for any entity.\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"customer-list-page-components\">Customer List Page Components\u003C/h3>\n\u003Cul>\n\u003Cli>\u003Cstrong>SmartViewTabs\u003C/strong> — \u003Ccode>app/.../customers/_components/\u003C/code> — Used in: P1 — All, Prospects, Top, Needs Attention, Seasonal\u003C/li>\n\u003Cli>\u003Cstrong>CustomersDataTable\u003C/strong> — \u003Ccode>app/.../customers/_components/\u003C/code> — Used in: P1 — Extends shared table pattern\u003C/li>\n\u003Cli>\u003Cstrong>CustomerListStatsBar\u003C/strong> — \u003Ccode>app/.../customers/_components/\u003C/code> — Used in: P1 — Total, Active, Revenue YTD, Prospects\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"customer-detail-page-components\">Customer Detail Page Components\u003C/h3>\n\u003Cul>\n\u003Cli>\u003Cstrong>CustomerDetailHeader\u003C/strong> — \u003Ccode>app/.../customers/[id]/_components/\u003C/code> — Used in: P2 — Company, contact, badges, stats, actions\u003C/li>\n\u003Cli>\u003Cstrong>ActivityTimeline\u003C/strong> — \u003Ccode>app/.../customers/[id]/_components/\u003C/code> — Used in: P2 Activity tab — Reverse-chronological merged events\u003C/li>\n\u003Cli>\u003Cstrong>CustomerQuotesTable\u003C/strong> — \u003Ccode>app/.../customers/[id]/_components/\u003C/code> — Used in: P2 Quotes tab — Quote #, status, total, Copy as New\u003C/li>\n\u003Cli>\u003Cstrong>CustomerJobsTable\u003C/strong> — \u003Ccode>app/.../customers/[id]/_components/\u003C/code> — Used in: P2 Jobs tab — Job #, status, due date\u003C/li>\n\u003Cli>\u003Cstrong>ContactHierarchy\u003C/strong> — \u003Ccode>app/.../customers/[id]/_components/\u003C/code> — Used in: P2 Contacts tab — Company → Group → Contact tree\u003C/li>\n\u003Cli>\u003Cstrong>CustomerDetailsPanel\u003C/strong> — \u003Ccode>app/.../customers/[id]/_components/\u003C/code> — Used in: P2 Details tab — Addresses, tax, payment, pricing, referral\u003C/li>\n\u003Cli>\u003Cstrong>EditCustomerSheet\u003C/strong> — \u003Ccode>app/.../customers/[id]/_components/\u003C/code> — Used in: P2.4 — Full profile edit form\u003C/li>\n\u003Cli>\u003Cstrong>AddContactSheet\u003C/strong> — \u003Ccode>app/.../customers/[id]/_components/\u003C/code> — Used in: P2.2\u003C/li>\n\u003Cli>\u003Cstrong>AddGroupSheet\u003C/strong> — \u003Ccode>app/.../customers/[id]/_components/\u003C/code> — Used in: P2.3\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"build-order\">Build Order\u003C/h2>\n\u003Cp>Build phases flow top-to-bottom. Steps within a phase can run in parallel. Phases B, C, and D can all run in parallel once Phase A completes.\u003C/p>\n\u003Ch3 id=\"phase-a--foundation--shared-components\">Phase A — Foundation + Shared Components\u003C/h3>\n\u003Cp>All steps in this phase can run in parallel (after steps 1-2 complete as the base)\u003C/p>\n\u003Col>\n\u003Cli>Schemas (contact, address, group, note, expanded customer) — Medium\u003C/li>\n\u003Cli>Mock Data Expansion (10 customers, contacts, notes, addresses) — High\u003C/li>\n\u003C/ol>\n\u003Cp>After 1-2 complete:\u003C/p>\n\u003Col start=\"3\">\n\u003Cli>LifecycleBadge — Low\u003C/li>\n\u003Cli>HealthBadge — Low\u003C/li>\n\u003Cli>TypeTagBadges — Low\u003C/li>\n\u003Cli>NotesPanel (shared) — Medium\u003C/li>\n\u003Cli>ArtworkGallery (shared) — High\u003C/li>\n\u003Cli>AddCustomerModal (enhanced) — Low-Med\u003C/li>\n\u003Cli>CustomerQuickStats — Low\u003C/li>\n\u003C/ol>\n\u003Ch3 id=\"phase-b--customer-list-page\">Phase B — Customer List Page\u003C/h3>\n\u003Cp>Can start as soon as Phase A schemas + badges are ready.\u003C/p>\n\u003Col start=\"10\">\n\u003Cli>Customer List (/customers) — High\u003C/li>\n\u003C/ol>\n\u003Ch3 id=\"phase-c--customer-detail-page\">Phase C — Customer Detail Page\u003C/h3>\n\u003Cp>Largest phase — header + 7 tabs + 4 modals.\u003C/p>\n\u003Col start=\"11\">\n\u003Cli>Customer Detail + All Sub-components — Very High\u003C/li>\n\u003C/ol>\n\u003Ch3 id=\"phase-d--interconnections\">Phase D — Interconnections\u003C/h3>\n\u003Cp>Enhance existing quoting combobox.\u003C/p>\n\u003Col start=\"13\">\n\u003Cli>Quoting Interconnection — Low-Med\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"dependency-graph-summary\">Dependency Graph Summary\u003C/h2>\n\u003Cpre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>Step 1 Schemas → blocks everything\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>Step 2 Mock Data → blocks all display components\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>Steps 3-9 Shared Components → run in parallel, block pages\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>Step 10 Customer List → needs 1-5, 8-9\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>Step 11 Customer Detail → needs 1-9 (all shared components)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>Step 13 Quoting → needs 1-3 only (schemas, data, LifecycleBadge)\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"data-flow\">Data Flow\u003C/h2>\n\u003Cp>Shows where state lives and how it flows between affordances. Color indicates state type.\u003C/p>\n\u003Cp>\u003Cstrong>State Types:\u003C/strong>\u003C/p>\n\u003Cul>\n\u003Cli>URL State — filters, search, sort\u003C/li>\n\u003Cli>React State — form inputs, tab selection\u003C/li>\n\u003Cli>Mock Data — imported, mutated in-memory\u003C/li>\n\u003Cli>Derived — computed from other stores\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"url-state--persists-across-page-refreshes-shareable\">URL State — Persists across page refreshes, shareable\u003C/h3>\n\u003Cp>\u003Cstrong>S1 — Customer List Params\u003C/strong>\u003C/p>\n\u003Cp>\u003Ccode>?q\u003C/code> · \u003Ccode>?view\u003C/code> · \u003Ccode>?tags\u003C/code> · \u003Ccode>?lifecycle\u003C/code> · \u003Ccode>?sort\u003C/code> · \u003Ccode>?dir\u003C/code> · \u003Ccode>?archived\u003C/code>\u003C/p>\n\u003Cul>\n\u003Cli>Readers: N1, N2, N3, N4, N5, N7, N33\u003C/li>\n\u003Cli>Writers: U1 search, U2-U6 tabs, U7 tags, U8 lifecycle, U9 sort, U12 archive\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"react-state--component-local-resets-on-navigation\">React State — Component-local, resets on navigation\u003C/h3>\n\u003Cp>\u003Cstrong>S2 — Active Tab\u003C/strong> — P2 tab selection\u003C/p>\n\u003Cul>\n\u003Cli>Readers: U42, tab content\u003C/li>\n\u003Cli>Writers: N13 setActiveTab, N32 (defaults: “notes” for Prospects, “activity” otherwise)\u003C/li>\n\u003C/ul>\n\u003Cp>\u003Cstrong>S5 — Add Customer Form\u003C/strong> — P1.1 form inputs\u003C/p>\n\u003Cul>\n\u003Cli>Readers: U20-U24, N9 validate\u003C/li>\n\u003Cli>Writers: U20-U24 typing, N8 reset\u003C/li>\n\u003C/ul>\n\u003Cp>\u003Cstrong>S6 — Artwork View\u003C/strong> — sort mode, selected artwork\u003C/p>\n\u003Cul>\n\u003Cli>Readers: U65, U69\u003C/li>\n\u003Cli>Writers: N19 sort, N21 select\u003C/li>\n\u003C/ul>\n\u003Cp>\u003Cstrong>S7 — Note Draft\u003C/strong> — content + channel tag\u003C/p>\n\u003Cul>\n\u003Cli>Readers: U95, U96\u003C/li>\n\u003Cli>Writers: U95 type, U96 select, N23 clear\u003C/li>\n\u003C/ul>\n\u003Cp>\u003Cstrong>S8 — Contact Form\u003C/strong> — P2.2 inputs\u003C/p>\n\u003Cp>\u003Cstrong>S9 — Group Form\u003C/strong> — P2.3 inputs\u003C/p>\n\u003Cp>\u003Cstrong>S10 — Edit Customer Form\u003C/strong> — P2.4 full profile edit\u003C/p>\n\u003Cul>\n\u003Cli>Readers: U125-U135, N29\u003C/li>\n\u003Cli>Writers: U125-U135 inputs, P2.4 mount (pre-fill)\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"mock-data--imported-from-libmock-datats-mutated-in-memory-phase-1\">Mock Data — Imported from lib/mock-data.ts, mutated in-memory (Phase 1)\u003C/h3>\n\u003Cp>\u003Cstrong>S3 — All Mock Data\u003C/strong>\u003C/p>\n\u003Cp>customers · contacts · groups · notes · quotes · jobs · artworks\u003C/p>\n\u003Cul>\n\u003Cli>Readers: N1, N11, N14-N18, N24-N25, all display affordances\u003C/li>\n\u003Cli>Writers: N8 (add customer), N22 (set primary), N23 (add note), N26 (pin), N27-N30 (CRUD)\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"derived--computed-from-other-stores-not-persisted\">Derived — Computed from other stores, not persisted\u003C/h3>\n\u003Cp>\u003Cstrong>S4 — Quick Stats\u003C/strong>\u003C/p>\n\u003Cp>Total customers, Active this month, YTD revenue, Prospect count\u003C/p>\n\u003Cul>\n\u003Cli>Readers: U13 stats bar\u003C/li>\n\u003Cli>Writers: N31 (recomputed when S3 changes)\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"key-data-flows\">Key Data Flows\u003C/h2>\n\u003Cp>\u003Cstrong>Search &#x26; Filter Flow:\u003C/strong>\nU1 type query → S1 ?q param → N1 filterCustomers() → Table rows update\u003C/p>\n\u003Cp>\u003Cstrong>Add Customer Flow:\u003C/strong>\nU25 click Save → N9 validate → N8 saveNewCustomer() → S3 add to mock data → Close modal, update list\u003C/p>\n\u003Cp>\u003Cstrong>Note Creation Flow:\u003C/strong>\nU95 type note + U96 select channel → S7 draft state → U97 click Add → N23 addNote() → S3 add to notes → Prepend to list, clear draft\u003C/p>\n\u003Cp>\u003Cstrong>Cross-Vertical: New Quote from Customer:\u003C/strong>\nU38 click “New Quote” → N12 navigateToNewQuote() → /quotes/new?customer={id} → Quote form auto-selects customer\u003C/p>",{"headings":764,"localImagePaths":850,"remoteImagePaths":851,"frontmatter":852,"imagePaths":856},[765,768,771,774,777,780,783,786,789,792,795,798,801,804,807,810,813,816,817,820,823,826,829,832,835,838,841,844,847],{"depth":34,"slug":766,"text":767},"place-map","Place Map",{"depth":34,"slug":769,"text":770},"pages","Pages",{"depth":40,"slug":772,"text":773},"p1--customer-list","P1 — Customer List",{"depth":40,"slug":775,"text":776},"p2--customer-detail","P2 — Customer Detail",{"depth":34,"slug":778,"text":779},"modals--sub-places","Modals & Sub-Places",{"depth":40,"slug":781,"text":782},"p11--add-customer-modal","P1.1 — Add Customer Modal",{"depth":40,"slug":784,"text":785},"p22--add-contact","P2.2 — Add Contact",{"depth":40,"slug":787,"text":788},"p23--add-group","P2.3 — Add Group",{"depth":40,"slug":790,"text":791},"p24--edit-customer","P2.4 — Edit Customer",{"depth":40,"slug":793,"text":794},"p25--archive-confirm","P2.5 — Archive Confirm",{"depth":34,"slug":796,"text":797},"cross-vertical-navigation","Cross-Vertical Navigation",{"depth":34,"slug":799,"text":800},"p2-tab-structure","P2 Tab Structure",{"depth":34,"slug":802,"text":803},"component-map","Component Map",{"depth":40,"slug":805,"text":806},"existing-enhance","Existing (Enhance)",{"depth":40,"slug":808,"text":809},"new-shared-components-reusable-across-verticals","New Shared Components (Reusable Across Verticals)",{"depth":40,"slug":811,"text":812},"customer-list-page-components","Customer List Page Components",{"depth":40,"slug":814,"text":815},"customer-detail-page-components","Customer Detail Page Components",{"depth":34,"slug":218,"text":219},{"depth":40,"slug":818,"text":819},"phase-a--foundation--shared-components","Phase A — Foundation + Shared Components",{"depth":40,"slug":821,"text":822},"phase-b--customer-list-page","Phase B — Customer List Page",{"depth":40,"slug":824,"text":825},"phase-c--customer-detail-page","Phase C — Customer Detail Page",{"depth":40,"slug":827,"text":828},"phase-d--interconnections","Phase D — Interconnections",{"depth":34,"slug":830,"text":831},"dependency-graph-summary","Dependency Graph Summary",{"depth":34,"slug":833,"text":834},"data-flow","Data Flow",{"depth":40,"slug":836,"text":837},"url-state--persists-across-page-refreshes-shareable","URL State — Persists across page refreshes, shareable",{"depth":40,"slug":839,"text":840},"react-state--component-local-resets-on-navigation","React State — Component-local, resets on navigation",{"depth":40,"slug":842,"text":843},"mock-data--imported-from-libmock-datats-mutated-in-memory-phase-1","Mock Data — Imported from lib/mock-data.ts, mutated in-memory (Phase 1)",{"depth":40,"slug":845,"text":846},"derived--computed-from-other-stores-not-persisted","Derived — Computed from other stores, not persisted",{"depth":34,"slug":848,"text":849},"key-data-flows","Key Data Flows",[],[],{"title":751,"subtitle":752,"date":853,"phase":17,"vertical":614,"verticalSecondary":854,"stage":187,"tags":855,"sessionId":756,"branch":757,"status":25},["Date","2026-02-10T00:00:00.000Z"],[],[189,75],[],"2026-02-10-quoting-interconnection",{"id":857,"data":859,"body":868,"filePath":869,"digest":870,"rendered":871},{"title":860,"subtitle":861,"date":862,"phase":17,"vertical":185,"verticalSecondary":863,"stage":75,"tags":865,"sessionId":866,"branch":867,"status":25},"Quoting-Customer Interconnection","Enhanced CustomerCombobox with lifecycle badges, enriched customer context, and cross-vertical search.",["Date","2026-02-10T00:00:00.000Z"],[614,864],"invoicing",[77,75],"633cdbe3-a795-443a-b712-f03c868b4c2e","session/0210-quoting-interconnection","## Summary\n\nThis session connects the Customer Management data model to the existing Quoting vertical. The CustomerCombobox now surfaces lifecycle stages, type tags, and contact roles — giving the shop owner richer context when selecting a customer on a quote.\n\n| Stat | Value |\n|------|-------|\n| Files Changed | 3 |\n| Tests Passing | 264 |\n| Type Errors | 0 |\n\n## What Changed\n\n### CustomerCombobox — Enriched Dropdown\n\n- **Lifecycle badges** replace legacy tag badges in the dropdown list (prospect, new, repeat, contract with semantic colors)\n- **Expanded search** — type \"contract\", \"wholesale\", \"sports\" to filter by lifecycle stage or type tags\n- **Enriched info card** when a customer is selected:\n  - Company name (prominent, first row)\n  - Contact name + role badge (Ordering, Billing, Art Approver, etc.)\n  - Email + phone\n  - Lifecycle badge + type tag badges (Retail, Sports/School, Corporate, etc.)\n  - \"View Customer\" link → `/customers/{id}` in new tab\n\n### QuoteForm — Customer Option Mapping\n\nAdded `customerOptions` useMemo that maps full Customer objects to CustomerOption with a derived `contactRole` from the primary contact. This keeps the combobox interface clean while surfacing rich data.\n\n### QuoteDetailView — Lifecycle Badge\n\nReplaced the legacy `CustomerTag` badge with the `LifecycleBadge` component in the quote detail header. Now shows \"Prospect\", \"New\", \"Repeat\", or \"Contract\" with matching semantic colors.\n\n## Files Modified\n\n- `components/features/CustomerCombobox.tsx` — Main enhancement\n- `app/(dashboard)/quotes/_components/QuoteForm.tsx` — Customer mapping\n- `app/(dashboard)/quotes/_components/QuoteDetailView.tsx` — Badge swap\n\n## PR\n\n[#28 — feat: Enhanced CustomerCombobox with lifecycle badges and enriched context](https://github.com/cmbays/print-4ink/pull/28)","src/content/sessions/2026-02-10-quoting-interconnection.md","10c08c010ff0f82e",{"html":872,"metadata":873},"\u003Ch2 id=\"summary\">Summary\u003C/h2>\n\u003Cp>This session connects the Customer Management data model to the existing Quoting vertical. The CustomerCombobox now surfaces lifecycle stages, type tags, and contact roles — giving the shop owner richer context when selecting a customer on a quote.\u003C/p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Stat\u003C/th>\u003Cth>Value\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>Files Changed\u003C/td>\u003Ctd>3\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Tests Passing\u003C/td>\u003Ctd>264\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Type Errors\u003C/td>\u003Ctd>0\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"what-changed\">What Changed\u003C/h2>\n\u003Ch3 id=\"customercombobox--enriched-dropdown\">CustomerCombobox — Enriched Dropdown\u003C/h3>\n\u003Cul>\n\u003Cli>\u003Cstrong>Lifecycle badges\u003C/strong> replace legacy tag badges in the dropdown list (prospect, new, repeat, contract with semantic colors)\u003C/li>\n\u003Cli>\u003Cstrong>Expanded search\u003C/strong> — type “contract”, “wholesale”, “sports” to filter by lifecycle stage or type tags\u003C/li>\n\u003Cli>\u003Cstrong>Enriched info card\u003C/strong> when a customer is selected:\n\u003Cul>\n\u003Cli>Company name (prominent, first row)\u003C/li>\n\u003Cli>Contact name + role badge (Ordering, Billing, Art Approver, etc.)\u003C/li>\n\u003Cli>Email + phone\u003C/li>\n\u003Cli>Lifecycle badge + type tag badges (Retail, Sports/School, Corporate, etc.)\u003C/li>\n\u003Cli>“View Customer” link → \u003Ccode>/customers/{id}\u003C/code> in new tab\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"quoteform--customer-option-mapping\">QuoteForm — Customer Option Mapping\u003C/h3>\n\u003Cp>Added \u003Ccode>customerOptions\u003C/code> useMemo that maps full Customer objects to CustomerOption with a derived \u003Ccode>contactRole\u003C/code> from the primary contact. This keeps the combobox interface clean while surfacing rich data.\u003C/p>\n\u003Ch3 id=\"quotedetailview--lifecycle-badge\">QuoteDetailView — Lifecycle Badge\u003C/h3>\n\u003Cp>Replaced the legacy \u003Ccode>CustomerTag\u003C/code> badge with the \u003Ccode>LifecycleBadge\u003C/code> component in the quote detail header. Now shows “Prospect”, “New”, “Repeat”, or “Contract” with matching semantic colors.\u003C/p>\n\u003Ch2 id=\"files-modified\">Files Modified\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Ccode>components/features/CustomerCombobox.tsx\u003C/code> — Main enhancement\u003C/li>\n\u003Cli>\u003Ccode>app/(dashboard)/quotes/_components/QuoteForm.tsx\u003C/code> — Customer mapping\u003C/li>\n\u003Cli>\u003Ccode>app/(dashboard)/quotes/_components/QuoteDetailView.tsx\u003C/code> — Badge swap\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"pr\">PR\u003C/h2>\n\u003Cp>\u003Ca href=\"https://github.com/cmbays/print-4ink/pull/28\">#28 — feat: Enhanced CustomerCombobox with lifecycle badges and enriched context\u003C/a>\u003C/p>",{"headings":874,"localImagePaths":892,"remoteImagePaths":893,"frontmatter":894,"imagePaths":898},[875,876,877,880,883,886,889],{"depth":34,"slug":670,"text":671},{"depth":34,"slug":284,"text":285},{"depth":40,"slug":878,"text":879},"customercombobox--enriched-dropdown","CustomerCombobox — Enriched Dropdown",{"depth":40,"slug":881,"text":882},"quoteform--customer-option-mapping","QuoteForm — Customer Option Mapping",{"depth":40,"slug":884,"text":885},"quotedetailview--lifecycle-badge","QuoteDetailView — Lifecycle Badge",{"depth":34,"slug":887,"text":888},"files-modified","Files Modified",{"depth":34,"slug":890,"text":891},"pr","PR",[],[],{"title":860,"subtitle":861,"date":895,"phase":17,"vertical":185,"verticalSecondary":896,"stage":75,"tags":897,"sessionId":866,"branch":867,"status":25},["Date","2026-02-10T00:00:00.000Z"],[614,864],[77,75],[],"2026-02-10-work-orchestrator",{"id":899,"data":901,"body":909,"filePath":910,"digest":911,"rendered":912},{"title":902,"subtitle":903,"date":904,"phase":17,"vertical":18,"verticalSecondary":905,"stage":75,"tags":906,"sessionId":907,"branch":908,"status":25},"work() — Worktree Orchestrator","Single command to create worktrees, tmux sessions, and launch Claude — with Agent Teams integration via tmux hook.",["Date","2026-02-10T00:00:00.000Z"],[],[75,77],"c2b2fb1b-b94a-4b17-bab0-3616c520c716","session/0210-worktree-migration","## Why\n\nManual worktree setup requires 4-5 commands per session: pull main, create worktree, install deps, find available port, open terminal and launch Claude. There's no grouping of related sessions, no consistent branch naming, and Agent Teams' `split-window` approach destroys tmux layouts at scale ([#23615](https://github.com/anthropics/claude-code/issues/23615)).\n\n## What It Does\n\nA single `work \u003Ctopic>` shell function handles everything: worktree creation from main repo, npm install, port scanning, tmux session/window creation, Claude launch, and an `after-split-window` hook that auto-converts Agent Teams panes into proper windows.\n\n| Metric | Value |\n|--------|-------|\n| 1 | Command |\n| ~220 | Lines of Bash |\n\n## Ghostty + Tmux Architecture\n\n```\nGhostty Quick Terminal (hotkey toggle)\n+- Pane 1 (you split manually)\n|  +- tmux session: \"main\"\n|      +- window: main Claude (planning)\n|\n+- Pane 2 (you split manually, Claude gives command)\n|  +- tmux session: \"invoicing-schema\"\n|      +- window: invoicing-schema  \u003C- work invoicing-schema\n|      +- window: invoicing-ui      \u003C- Claude runs work (stacked)\n|      +- window: (auto)            \u003C- Agent Teams (hook)\n|      +- window: (auto)            \u003C- Agent Teams (hook)\n|\n+- Pane 3 (you split manually)\n   +- tmux session: \"customer-export\"\n       +- window: customer-export  \u003C- work customer-export\n```\n\n**Two modes:**\n\n- **New workstream** (`work \u003Ctopic>`) → detached tmux session. Claude gives you the command; you attach from a new Ghostty pane.\n- **Related work** (`work \u003Ctopic> \u003Cbase>`) → new window/tab in parent's tmux session. Claude does this automatically; no pane splitting needed.\n- **Agent Teams** → pane splits auto-convert to windows via `after-split-window` hook. All agents appear as tabs in the same session.\n- **`--prompt`** → seeds the new Claude with an initial task via `tmux send-keys`.\n\n## Commands Reference\n\n| Command | What It Does |\n|---------|--------------|\n| `work \u003Ctopic>` | New workstream: detached tmux session + worktree + Claude |\n| `work \u003Ctopic> \u003Cbase>` | Related work: window in parent's tmux session + worktree |\n| `work \u003Ctopic> --prompt \"...\"` | Seed new Claude with an initial task prompt |\n| `work --stack \u003Ctopic>` | Stack from current branch (auto-detects from $PWD) |\n| `work list` | Show sessions, windows, worktrees, ports |\n| `work focus` | Read-only tiled monitor of all windows in current session |\n| `work unfocus` | Exit focus mode |\n| `work clean \u003Ctopic>` | Remove worktree + tmux + branch (with confirmation) |\n\n## Agent Teams Integration\n\nClaude Code's Agent Teams uses `tmux split-window -h` for each spawned agent. This is buggy at scale. Our fix:\n\n1. Every `work`-created tmux session gets an `after-split-window` hook\n2. When Claude's TeamCreate splits a pane for an agent, the hook fires\n3. `break-pane` extracts the new pane into its own window (process keeps running)\n4. Each agent becomes a navigable window (`Ctrl+b n` to cycle)\n\nThe hook is scoped to `work`-created sessions only — doesn't affect other tmux usage.\n\n## Focus / Unfocus\n\n`work focus` creates a **separate read-only tmux session** that mirrors each window's output via `tmux capture-pane`. The original session and all its windows are completely untouched.\n\n- `Ctrl+b z` in focus mode zooms one pane for detailed reading\n- `Ctrl+b s` switches back to the original session for interaction\n- `work unfocus` kills the focus session and returns\n\n## Workflow Examples\n\n### 1. New workstream (you split the Ghostty pane)\n\n```\n# Claude says: \"Run this in a new Ghostty pane:\"\nwork invoicing-schema --prompt \"Build the Zod schemas per docs/strategy/...\"\n# Then in a new Ghostty pane:\ntmux attach -t invoicing-schema\n# Claude is already running with your prompt\n```\n\n### 2. Related work (Claude does this automatically)\n\n```\n# Claude runs this from within the invoicing-schema session:\nwork invoicing-ui session/0210-invoicing-schema --prompt \"Build UI components\"\n# New tab appears in the invoicing-schema tmux session\n# Navigate: Ctrl+b n (next) or Ctrl+b w (tree)\n```\n\n### 3. Agent Teams (fully automatic)\n\n```\n# Inside a work-created session, Claude uses TeamCreate\n# TeamCreate splits panes -> hook converts to windows\n# All agents appear as tabs: Ctrl+b n to cycle\nwork focus                             # Monitor all agents tiled\n```\n\n### 4. Full example — workstream + stacked + Agent Teams\n\n```\n# You: split Ghostty pane, run:\nwork invoicing-schema\n\n# Claude spawns related work (new tabs in same session):\nwork invoicing-ui session/0210-invoicing-schema --prompt \"Build UI\"\nwork invoicing-tests session/0210-invoicing-schema --prompt \"Write tests\"\n\n# Claude also uses TeamCreate for parallel agents (auto-converted to tabs)\n# Session now has: invoicing-schema, invoicing-ui, invoicing-tests, agent-1, agent-2\nwork focus                             # See all 5 tiled\n```\n\n## Tmux Navigation Cheatsheet\n\n| Shortcut | Action |\n|----------|--------|\n| `Ctrl+b s` | Session picker (all features) |\n| `Ctrl+b n` | Next window (cycle agents) |\n| `Ctrl+b p` | Previous window |\n| `Ctrl+b w` | Window tree (all sessions + windows) |\n| `Ctrl+b z` | Zoom pane (in focus view) |\n| `work unfocus` | Exit focus mode |\n\n## Setup\n\nOne-time setup (already done):\n\n```\n# Added to ~/.zshrc\n[[ -f ~/Github/print-4ink/scripts/work.sh ]] && source ~/Github/print-4ink/scripts/work.sh\n```\n\nThe script is sourced (not executed), so it defines the `work()` function in your shell. Uses absolute paths internally, works from any directory.\n\n## Safety Guarantees\n\n- Always operates from main repo (`~/Github/print-4ink`), never from `$PWD`\n- Pulls latest main before branching (skips for stacked PRs)\n- Checks branch doesn't already exist before creating\n- Enforces max 6 worktrees with warning\n- Port scanning finds first available port (3001-3010)\n- `work clean` requires `y` confirmation before destructive actions","src/content/sessions/2026-02-10-work-orchestrator.md","63dba139f632b674",{"html":913,"metadata":914},"\u003Ch2 id=\"why\">Why\u003C/h2>\n\u003Cp>Manual worktree setup requires 4-5 commands per session: pull main, create worktree, install deps, find available port, open terminal and launch Claude. There’s no grouping of related sessions, no consistent branch naming, and Agent Teams’ \u003Ccode>split-window\u003C/code> approach destroys tmux layouts at scale (\u003Ca href=\"https://github.com/anthropics/claude-code/issues/23615\">#23615\u003C/a>).\u003C/p>\n\u003Ch2 id=\"what-it-does\">What It Does\u003C/h2>\n\u003Cp>A single \u003Ccode>work &#x3C;topic>\u003C/code> shell function handles everything: worktree creation from main repo, npm install, port scanning, tmux session/window creation, Claude launch, and an \u003Ccode>after-split-window\u003C/code> hook that auto-converts Agent Teams panes into proper windows.\u003C/p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Metric\u003C/th>\u003Cth>Value\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>1\u003C/td>\u003Ctd>Command\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>~220\u003C/td>\u003Ctd>Lines of Bash\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"ghostty--tmux-architecture\">Ghostty + Tmux Architecture\u003C/h2>\n\u003Cpre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>Ghostty Quick Terminal (hotkey toggle)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>+- Pane 1 (you split manually)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>|  +- tmux session: \"main\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>|      +- window: main Claude (planning)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>|\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>+- Pane 2 (you split manually, Claude gives command)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>|  +- tmux session: \"invoicing-schema\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>|      +- window: invoicing-schema  &#x3C;- work invoicing-schema\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>|      +- window: invoicing-ui      &#x3C;- Claude runs work (stacked)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>|      +- window: (auto)            &#x3C;- Agent Teams (hook)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>|      +- window: (auto)            &#x3C;- Agent Teams (hook)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>|\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>+- Pane 3 (you split manually)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>   +- tmux session: \"customer-export\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>       +- window: customer-export  &#x3C;- work customer-export\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>\u003Cstrong>Two modes:\u003C/strong>\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>New workstream\u003C/strong> (\u003Ccode>work &#x3C;topic>\u003C/code>) → detached tmux session. Claude gives you the command; you attach from a new Ghostty pane.\u003C/li>\n\u003Cli>\u003Cstrong>Related work\u003C/strong> (\u003Ccode>work &#x3C;topic> &#x3C;base>\u003C/code>) → new window/tab in parent’s tmux session. Claude does this automatically; no pane splitting needed.\u003C/li>\n\u003Cli>\u003Cstrong>Agent Teams\u003C/strong> → pane splits auto-convert to windows via \u003Ccode>after-split-window\u003C/code> hook. All agents appear as tabs in the same session.\u003C/li>\n\u003Cli>\u003Cstrong>\u003Ccode>--prompt\u003C/code>\u003C/strong> → seeds the new Claude with an initial task via \u003Ccode>tmux send-keys\u003C/code>.\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"commands-reference\">Commands Reference\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Command\u003C/th>\u003Cth>What It Does\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>\u003Ccode>work &#x3C;topic>\u003C/code>\u003C/td>\u003Ctd>New workstream: detached tmux session + worktree + Claude\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>work &#x3C;topic> &#x3C;base>\u003C/code>\u003C/td>\u003Ctd>Related work: window in parent’s tmux session + worktree\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>work &#x3C;topic> --prompt \"...\"\u003C/code>\u003C/td>\u003Ctd>Seed new Claude with an initial task prompt\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>work --stack &#x3C;topic>\u003C/code>\u003C/td>\u003Ctd>Stack from current branch (auto-detects from $PWD)\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>work list\u003C/code>\u003C/td>\u003Ctd>Show sessions, windows, worktrees, ports\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>work focus\u003C/code>\u003C/td>\u003Ctd>Read-only tiled monitor of all windows in current session\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>work unfocus\u003C/code>\u003C/td>\u003Ctd>Exit focus mode\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>work clean &#x3C;topic>\u003C/code>\u003C/td>\u003Ctd>Remove worktree + tmux + branch (with confirmation)\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"agent-teams-integration\">Agent Teams Integration\u003C/h2>\n\u003Cp>Claude Code’s Agent Teams uses \u003Ccode>tmux split-window -h\u003C/code> for each spawned agent. This is buggy at scale. Our fix:\u003C/p>\n\u003Col>\n\u003Cli>Every \u003Ccode>work\u003C/code>-created tmux session gets an \u003Ccode>after-split-window\u003C/code> hook\u003C/li>\n\u003Cli>When Claude’s TeamCreate splits a pane for an agent, the hook fires\u003C/li>\n\u003Cli>\u003Ccode>break-pane\u003C/code> extracts the new pane into its own window (process keeps running)\u003C/li>\n\u003Cli>Each agent becomes a navigable window (\u003Ccode>Ctrl+b n\u003C/code> to cycle)\u003C/li>\n\u003C/ol>\n\u003Cp>The hook is scoped to \u003Ccode>work\u003C/code>-created sessions only — doesn’t affect other tmux usage.\u003C/p>\n\u003Ch2 id=\"focus--unfocus\">Focus / Unfocus\u003C/h2>\n\u003Cp>\u003Ccode>work focus\u003C/code> creates a \u003Cstrong>separate read-only tmux session\u003C/strong> that mirrors each window’s output via \u003Ccode>tmux capture-pane\u003C/code>. The original session and all its windows are completely untouched.\u003C/p>\n\u003Cul>\n\u003Cli>\u003Ccode>Ctrl+b z\u003C/code> in focus mode zooms one pane for detailed reading\u003C/li>\n\u003Cli>\u003Ccode>Ctrl+b s\u003C/code> switches back to the original session for interaction\u003C/li>\n\u003Cli>\u003Ccode>work unfocus\u003C/code> kills the focus session and returns\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"workflow-examples\">Workflow Examples\u003C/h2>\n\u003Ch3 id=\"1-new-workstream-you-split-the-ghostty-pane\">1. New workstream (you split the Ghostty pane)\u003C/h3>\n\u003Cpre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan># Claude says: \"Run this in a new Ghostty pane:\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>work invoicing-schema --prompt \"Build the Zod schemas per docs/strategy/...\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan># Then in a new Ghostty pane:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>tmux attach -t invoicing-schema\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan># Claude is already running with your prompt\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"2-related-work-claude-does-this-automatically\">2. Related work (Claude does this automatically)\u003C/h3>\n\u003Cpre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan># Claude runs this from within the invoicing-schema session:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>work invoicing-ui session/0210-invoicing-schema --prompt \"Build UI components\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan># New tab appears in the invoicing-schema tmux session\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan># Navigate: Ctrl+b n (next) or Ctrl+b w (tree)\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"3-agent-teams-fully-automatic\">3. Agent Teams (fully automatic)\u003C/h3>\n\u003Cpre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan># Inside a work-created session, Claude uses TeamCreate\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan># TeamCreate splits panes -> hook converts to windows\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan># All agents appear as tabs: Ctrl+b n to cycle\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>work focus                             # Monitor all agents tiled\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"4-full-example--workstream--stacked--agent-teams\">4. Full example — workstream + stacked + Agent Teams\u003C/h3>\n\u003Cpre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan># You: split Ghostty pane, run:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>work invoicing-schema\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan># Claude spawns related work (new tabs in same session):\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>work invoicing-ui session/0210-invoicing-schema --prompt \"Build UI\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>work invoicing-tests session/0210-invoicing-schema --prompt \"Write tests\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan># Claude also uses TeamCreate for parallel agents (auto-converted to tabs)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan># Session now has: invoicing-schema, invoicing-ui, invoicing-tests, agent-1, agent-2\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>work focus                             # See all 5 tiled\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"tmux-navigation-cheatsheet\">Tmux Navigation Cheatsheet\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Shortcut\u003C/th>\u003Cth>Action\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>\u003Ccode>Ctrl+b s\u003C/code>\u003C/td>\u003Ctd>Session picker (all features)\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>Ctrl+b n\u003C/code>\u003C/td>\u003Ctd>Next window (cycle agents)\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>Ctrl+b p\u003C/code>\u003C/td>\u003Ctd>Previous window\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>Ctrl+b w\u003C/code>\u003C/td>\u003Ctd>Window tree (all sessions + windows)\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>Ctrl+b z\u003C/code>\u003C/td>\u003Ctd>Zoom pane (in focus view)\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>work unfocus\u003C/code>\u003C/td>\u003Ctd>Exit focus mode\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"setup\">Setup\u003C/h2>\n\u003Cp>One-time setup (already done):\u003C/p>\n\u003Cpre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan># Added to ~/.zshrc\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>[[ -f ~/Github/print-4ink/scripts/work.sh ]] &#x26;&#x26; source ~/Github/print-4ink/scripts/work.sh\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>The script is sourced (not executed), so it defines the \u003Ccode>work()\u003C/code> function in your shell. Uses absolute paths internally, works from any directory.\u003C/p>\n\u003Ch2 id=\"safety-guarantees\">Safety Guarantees\u003C/h2>\n\u003Cul>\n\u003Cli>Always operates from main repo (\u003Ccode>~/Github/print-4ink\u003C/code>), never from \u003Ccode>$PWD\u003C/code>\u003C/li>\n\u003Cli>Pulls latest main before branching (skips for stacked PRs)\u003C/li>\n\u003Cli>Checks branch doesn’t already exist before creating\u003C/li>\n\u003Cli>Enforces max 6 worktrees with warning\u003C/li>\n\u003Cli>Port scanning finds first available port (3001-3010)\u003C/li>\n\u003Cli>\u003Ccode>work clean\u003C/code> requires \u003Ccode>y\u003C/code> confirmation before destructive actions\u003C/li>\n\u003C/ul>",{"headings":915,"localImagePaths":958,"remoteImagePaths":959,"frontmatter":960,"imagePaths":964},[916,919,922,925,928,931,934,937,940,943,946,949,952,955],{"depth":34,"slug":917,"text":918},"why","Why",{"depth":34,"slug":920,"text":921},"what-it-does","What It Does",{"depth":34,"slug":923,"text":924},"ghostty--tmux-architecture","Ghostty + Tmux Architecture",{"depth":34,"slug":926,"text":927},"commands-reference","Commands Reference",{"depth":34,"slug":929,"text":930},"agent-teams-integration","Agent Teams Integration",{"depth":34,"slug":932,"text":933},"focus--unfocus","Focus / Unfocus",{"depth":34,"slug":935,"text":936},"workflow-examples","Workflow Examples",{"depth":40,"slug":938,"text":939},"1-new-workstream-you-split-the-ghostty-pane","1. New workstream (you split the Ghostty pane)",{"depth":40,"slug":941,"text":942},"2-related-work-claude-does-this-automatically","2. Related work (Claude does this automatically)",{"depth":40,"slug":944,"text":945},"3-agent-teams-fully-automatic","3. Agent Teams (fully automatic)",{"depth":40,"slug":947,"text":948},"4-full-example--workstream--stacked--agent-teams","4. Full example — workstream + stacked + Agent Teams",{"depth":34,"slug":950,"text":951},"tmux-navigation-cheatsheet","Tmux Navigation Cheatsheet",{"depth":34,"slug":953,"text":954},"setup","Setup",{"depth":34,"slug":956,"text":957},"safety-guarantees","Safety Guarantees",[],[],{"title":902,"subtitle":903,"date":961,"phase":17,"vertical":18,"verticalSecondary":962,"stage":75,"tags":963,"sessionId":907,"branch":908,"status":25},["Date","2026-02-10T00:00:00.000Z"],[],[75,77],[],"2026-02-10-price-matrix-research",{"id":965,"data":967,"body":975,"filePath":976,"digest":977,"rendered":978},{"title":968,"subtitle":969,"date":970,"phase":17,"vertical":971,"verticalSecondary":972,"stage":20,"tags":973,"sessionId":907,"branch":974,"status":25},"Price Matrix Vertical Research","Comprehensive market research, competitor analysis, and prioritized feature recommendations for the pricing engine vertical",["Date","2026-02-10T00:00:00.000Z"],"price-matrix",[],[20,189,22],"session/0210-price-matrix","## Research at a Glance\n\n| Stat | Value |\n|------|-------|\n| Competitors Analyzed | 10 |\n| Industry Sources | 80+ |\n| Research Agents | 4 |\n| Features Prioritized | 36 |\n\n**The Opportunity:** No competitor has pulled away — PrintLife, YoPrint, Teesom, and PriceIt are all tied at 74%. Screen Print Pro can leapfrog everyone by combining PrintLife's automation with Teesom's flexibility, YoPrint's innovation, and a 10x better UX.\n\n## Executive Summary\n\nFour research agents worked in parallel to analyze the screen printing price matrix landscape: industry best practices, competitor solutions, cross-vertical integration requirements, and UX/UI innovation patterns.\n\n### How Screen Printing Pricing Works\n\nPricing is a **multi-dimensional matrix** where per-piece cost is calculated from:\n\n```\nPrice = (Garment Cost x Markup) + (Setup Fees / Quantity) + (Colors x Locations x Per-Hit Rate) + Surcharges\n```\n\nThe primary drivers are **quantity breaks** (12, 24, 48, 72, 144+), **color count** (each color = one screen), **print locations** (front, back, sleeves), and **garment type** (t-shirt vs. hoodie). Secondary factors include setup fees ($15-35/screen), specialty inks (+$0.50-1.50/print), and rush orders (+10-100%).\n\n### The 10x Strategy\n\nPrintLife optimizes for *automation at the expense of visibility*. We optimize for **both**. Three pillars:\n\n1. **Simplicity** — Wizard setup in 5 minutes with smart defaults (match PrintLife's 5/5)\n2. **Transparency** — Real-time margin % per price cell with green/yellow/red indicators (PrintLife's blind spot)\n3. **Flexibility** — Unlimited matrices, power mode grid, CSV import/export (PrintLife's 2/5 → our 5/5)\n\n## Competitor Landscape\n\n### The Print Life — Our Baseline\n\n**4Ink's Current Tool — 74% (26/35)**\n\n| Criterion | Rating | Assessment |\n|-----------|--------|------------|\n| Capabilities | 3/5 | Basic matrix types, recently added measurement-based pricing |\n| User Satisfaction | 3/5 | Positive on automation, limited public reviews |\n| Ease of Use | 4/5 | Designed to \"just work\" with low learning curve |\n| **Flexibility** | **2/5** | Basic structures only. No custom rules, no breakless pricing |\n| Simplicity | **5/5** | Core strength — prevents overwhelm |\n| Integration | 4/5 | All-in-one: quoting → production → shipping |\n| Automation | **5/5** | Prevents common errors (forgetting setup fees, ink charges) |\n\n### Competitive Ratings\n\n| Competitor | Score |\n|------------|-------|\n| Print Life | 74% |\n| YoPrint | 74% |\n| Teesom | 74% |\n| PriceIt | 74% |\n| DecoNetwork | 69% |\n| Printavo | 69% |\n| ShopWorx | 69% |\n| OrderMyGear | 66% |\n| InkSoft | 60% |\n\n### Where We Win\n\n```\n                    High Flexibility\n                         |\n              Teesom o   |   * Screen Print Pro\n                         |      (TARGET)\n                         |\n Low Automation ----------+-------- High Automation\n                         |\n          ShopWorx o     |     o Print Life\n                         |     o Printavo\n                         |\n                    Low Flexibility\n```\n\nNo current competitor occupies the **high automation + high flexibility** quadrant. That's our target.\n\n### Key Innovations to Adopt\n\n| Innovation | Source | Impact |\n|------------|--------|--------|\n| Breakless pricing | YoPrint | Eliminates quantity break gaming, fairer pricing |\n| Vendor cost sync | YoPrint | Auto-update garment costs from SanMar, AlphaBroder |\n| Size matrix entry | ShopWorx | S:10, M:25, L:15 in one line — 3x faster |\n| Production variables | ShopWorx | Price by mesh count, ink type, squeegee |\n| Area-based pricing | DecoNetwork | Per-square-inch pricing by color count |\n| Unlimited matrices | Teesom | No artificial limits on pricing configs |\n\n## Integration Architecture\n\nIndustry leaders treat pricing as a **centralized calculation engine** consumed by all verticals — not a lookup table embedded in the quote form.\n\n### Data Flow\n\n**Customer Context** → **Price Matrix Engine** → **Quote** (with margin) → **Price Lock on Approval** → **Invoice** (honors locked prices) → **Production** (tracks actual costs) → **Reporting** (margin analysis) → feedback to Price Matrix calibration\n\n### Five Integration Points\n\n1. **Customer** — Contract pricing, loyalty tiers, manual discount authority with approval workflow\n2. **Quoting** — Primary consumer. Auto-calculated quotes, margin visibility, price locking, quote versioning\n3. **Invoicing** — Quote-to-invoice conversion with price locking, progress billing (50% deposit), tax, audit trail\n4. **Reporting** — Margin by job/customer/product, pricing trends, discount impact analysis\n5. **Production** — Actual vs. estimated costs, variance tracking, realized margin per job\n\n## UX Strategy — 10x Better\n\n### Progressive Disclosure\n\n### Simple Mode (Default)\n\n5-step wizard — enter shop basics, choose structure, set breakpoints, auto-calculate with smart defaults, preview with sample orders. New shop gets pricing in 5 minutes.\n\n### Power Mode (Advanced Toggle)\n\nTanStack Table with inline editing, keyboard shortcuts (arrow keys, Ctrl+C/V), bulk actions, CSV import/export, fill handle for dragging values. Excel-like power without leaving the app.\n\n### Real-Time Margin Indicators\n\nEvery price cell gets a color indicator using our Niji palette:\n\n| Margin | Color | Meaning |\n|--------|-------|---------|\n| >= 30% | Green (#54ca74) | Healthy profit |\n| 15-30% | Yellow (#ffc663) | Low profit, caution |\n| \u003C 15% | Red (#d23e08) | Unprofitable |\n\nTooltip on hover: *\"Margin: 32% ($450 revenue - $306 cost = $144 profit)\"*\n\n### Pain Points We Solve\n\n| Industry Pain Point | Our Solution |\n|---------------------|-------------|\n| \"Don't understand pricing after 3 years\" (Shopvox) | Wizard setup, done in 5 minutes |\n| No profitability reporting | Real-time margin % per cell + dashboard |\n| No labor cost tracking | Factor hourly rate, setup time, press time |\n| Can't experiment with pricing | What-if scenarios, undo/redo, version history |\n| Manual Excel workflows | CSV import/export, inline editing |\n\n## Feature Recommendations\n\n| Priority | Count |\n|----------|-------|\n| P0 — Critical | 12 |\n| P1 — Surpass 4Ink | 14 |\n| P2 — Top Market | 10 |\n\n### P0 — Critical (Table Stakes + PrintLife Parity)\n\nMust-have for any viable price matrix. We cannot demo without these.\n\n- **P0 — Multi-dimensional pricing engine** (L) — Calculate price from qty x colors x locations x garment type. Real-time, no \"Calculate\" button.\n- **P0 — Quantity break configuration** (M) — Custom break points (default: 12, 24, 48, 72, 144+). Auto-calculate per-tier pricing.\n- **P0 — Color count pricing** (M) — Per-color-hit rate ($0.50-1.00). Supports 1-8+ colors. Each color = one screen.\n- **P0 — Print location pricing** (M) — Front (base), back (+$2), sleeves (+$3), pocket (+$5). Per-location upcharges.\n- **P0 — Setup fee management** (M) — Per-screen fees ($15-35), bulk waiver rules (72+ pieces), reorder discounts.\n- **P0 — Garment type & cost library** (M) — Garment types with wholesale costs, configurable markup %. Brand/style/color variants.\n- **P0 — Real-time price preview** (M) — Update entire pricing table instantly as user changes any input. No page reload.\n- **P0 — Price breakdown display** (S) — Show: Garment + Setup allocation + Print fees = Total. Collapsible detail view.\n- **P0 — Simple Mode wizard** (L) — 5-step setup with smart defaults. New shop gets pricing configured in 5 minutes.\n- **P0 — Smart defaults** (S) — Pre-fill with industry averages ($60/hr, $25/screen, 2x markup, standard tiers).\n- **P0 — Auto-error prevention** (M) — Match PrintLife: auto-include setup fees, prevent forgetting ink and location charges.\n- **P0 — Quote integration** (L) — Quote form calls price matrix API for all calculations. Pricing flows to quotes seamlessly.\n\n### P1 — Phase 1 (Surpass PrintLife, Wow the Demo)\n\nFeatures that make Screen Print Pro clearly superior to PrintLife. This is the 10x demo moment.\n\n- **P1 — Real-time margin indicators** (M) — Green/yellow/red per price cell. Tooltip shows full cost/margin breakdown. **PrintLife has ZERO margin visibility — this alone is 10x.**\n- **P1 — Contract vs. retail pricing toggle** (M) — Switch pricing modes per customer. Contract = lower margin, waived setup fees.\n- **P1 — Customer-specific price sheets** (L) — Assign custom pricing to contract customers. Override base matrix per customer relationship.\n- **P1 — Rush order upcharges** (S) — +10% (5-7 days), +25% (3-4 days), +50% (24-48hr). Auto-calculate from turnaround time.\n- **P1 — Specialty ink surcharges** (S) — Water-based (+$0.50), discharge (+$0.75), metallic (+$1.00), glow (+$1.50) per print.\n- **P1 — Size matrix entry** (M) — Single line: S:10, M:25, L:15, XL:8 instead of per-size rows. 3x faster data entry.\n- **P1 — Unlimited price matrices** (S) — No artificial limits. Create seasonal, customer-tier, event-specific matrices.\n- **P1 — What-if scenarios** (L) — \"What if I raise prices 10%?\" Side-by-side current vs. proposed with margin impact. **No competitor offers this.**\n- **P1 — Power Mode grid** (L) — TanStack Table with inline editing, bulk actions, keyboard shortcuts. Toggle from Simple Mode.\n- **P1 — CSV import/export** (M) — Export to CSV, import with column mapping wizard, inline validation, template download.\n- **P1 — Margin threshold alerts** (S) — Flag quotes below 30% margin for review. Configurable threshold per shop.\n- **P1 — Duplicate/template pricing** (S) — One-click duplicate matrix. \"Standard 2026\" → \"Black Friday 2026\" in seconds.\n- **P1 — Price locking on approval** (M) — Freeze pricing when customer approves quote. Invoice honors locked price even if matrix changes.\n- **P1 — Discount authority controls** (M) — Max % per role, approval workflow for discounts exceeding threshold. Full audit trail.\n\n### P2 — Phase 2 (Match/Surpass Top Competitors)\n\nFeatures that position Screen Print Pro at or above every competitor in the market.\n\n- **P2 — Breakless pricing** (L) — Linear pricing without quantity break jumps. Eliminates gaming. Offer alongside traditional breaks.\n- **P2 — Vendor cost integration** (L) — Auto-sync garment costs from SanMar, AlphaBroder, S&S Activewear APIs.\n- **P2 — Version history + rollback** (M) — Full audit trail with timestamps. Click to preview, \"Restore This Version\" button.\n- **P2 — Profitability dashboard** (L) — Margin by job, customer, product type. Discount impact analysis. Pricing trends.\n- **P2 — Production cost tracking** (L) — Actual vs. estimated costs. Labor hours, ink usage, variance analysis per job.\n- **P2 — Area-based pricing** (M) — Price per square inch by color count. Alternate mode to per-piece pricing.\n- **P2 — Loyalty tier automation** (M) — Auto-promote customers based on lifetime volume. Standard → Silver → Gold → Platinum.\n- **P2 — QuickBooks integration** (L) — Two-way invoice sync, automatic tax calculation, payment reconciliation.\n- **P2 — AI pricing suggestions** (L) — Suggest pricing based on historical quotes, margins, and win rates. Flag unprofitable patterns.\n- **P2 — Capacity-based pricing** (L) — Adjust prices based on current shop load and press availability.\n\n## Demo Success Criteria\n\n**Goal:** Make 4Ink say \"This is so much better than PrintLife.\"\n\n### Must Demonstrate\n\n1. **5-minute setup** — Create a new price matrix from scratch using the wizard\n2. **Instant margins** — Green/yellow/red margin indicators per price cell\n3. **What-if power** — \"What if I raise prices 10%?\" with side-by-side comparison\n4. **Quote flow** — Create a quote that auto-pulls from the price matrix\n5. **Contract pricing** — Show different prices for contract vs. retail\n6. **Price breakdown** — Transparent garment + setup + print = total\n\n## Research Documents\n\nFull research reports are available as rendered markdown on GitHub:\n\n- [Final Synthesis Report](https://github.com/cmbays/print-4ink/blob/session/0210-price-matrix/docs/research/price-matrix-research.md) — Executive summary, all findings, P0/P1/P2 recommendations\n- [Industry Best Practices](https://github.com/cmbays/print-4ink/blob/session/0210-price-matrix/docs/research/01-industry-practices.md) — Pricing dimensions, formulas, setup fees, MOQs, specialty inks\n- [Competitor Analysis](https://github.com/cmbays/print-4ink/blob/session/0210-price-matrix/docs/research/02-competitor-analysis.md) — 10 platforms rated on 7 criteria, PrintLife baseline, innovation gaps\n- [Integration Map](https://github.com/cmbays/print-4ink/blob/session/0210-price-matrix/docs/research/03-integration-map.md) — 5 vertical integrations, TypeScript schemas, API surfaces, data flows\n- [UX/UI Patterns & Innovations](https://github.com/cmbays/print-4ink/blob/session/0210-price-matrix/docs/research/04-ux-patterns.md) — Progressive disclosure, margin indicators, what-if, CSV UX, smart defaults\n\n## Next Steps\n\n1. **Review report** with domain knowledge of 4Ink — flag anything that doesn't match reality\n2. **Run vertical-discovery skill** to formalize scope from this research\n3. **Breadboard** the price matrix UI (places, affordances, wiring)\n4. **Build Phase 1a** (P0: pricing engine + wizard + quote integration)\n5. **Build Phase 1b** (P1 highlights: margin indicators, what-if, power mode)\n6. **Demo to 4Ink** with the wow features","src/content/sessions/2026-02-10-price-matrix-research.md","ea642bfabe113492",{"html":979,"metadata":980},"\u003Ch2 id=\"research-at-a-glance\">Research at a Glance\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Stat\u003C/th>\u003Cth>Value\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>Competitors Analyzed\u003C/td>\u003Ctd>10\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Industry Sources\u003C/td>\u003Ctd>80+\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Research Agents\u003C/td>\u003Ctd>4\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Features Prioritized\u003C/td>\u003Ctd>36\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Cp>\u003Cstrong>The Opportunity:\u003C/strong> No competitor has pulled away — PrintLife, YoPrint, Teesom, and PriceIt are all tied at 74%. Screen Print Pro can leapfrog everyone by combining PrintLife’s automation with Teesom’s flexibility, YoPrint’s innovation, and a 10x better UX.\u003C/p>\n\u003Ch2 id=\"executive-summary\">Executive Summary\u003C/h2>\n\u003Cp>Four research agents worked in parallel to analyze the screen printing price matrix landscape: industry best practices, competitor solutions, cross-vertical integration requirements, and UX/UI innovation patterns.\u003C/p>\n\u003Ch3 id=\"how-screen-printing-pricing-works\">How Screen Printing Pricing Works\u003C/h3>\n\u003Cp>Pricing is a \u003Cstrong>multi-dimensional matrix\u003C/strong> where per-piece cost is calculated from:\u003C/p>\n\u003Cpre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>Price = (Garment Cost x Markup) + (Setup Fees / Quantity) + (Colors x Locations x Per-Hit Rate) + Surcharges\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>The primary drivers are \u003Cstrong>quantity breaks\u003C/strong> (12, 24, 48, 72, 144+), \u003Cstrong>color count\u003C/strong> (each color = one screen), \u003Cstrong>print locations\u003C/strong> (front, back, sleeves), and \u003Cstrong>garment type\u003C/strong> (t-shirt vs. hoodie). Secondary factors include setup fees ($15-35/screen), specialty inks (+$0.50-1.50/print), and rush orders (+10-100%).\u003C/p>\n\u003Ch3 id=\"the-10x-strategy\">The 10x Strategy\u003C/h3>\n\u003Cp>PrintLife optimizes for \u003Cem>automation at the expense of visibility\u003C/em>. We optimize for \u003Cstrong>both\u003C/strong>. Three pillars:\u003C/p>\n\u003Col>\n\u003Cli>\u003Cstrong>Simplicity\u003C/strong> — Wizard setup in 5 minutes with smart defaults (match PrintLife’s 5/5)\u003C/li>\n\u003Cli>\u003Cstrong>Transparency\u003C/strong> — Real-time margin % per price cell with green/yellow/red indicators (PrintLife’s blind spot)\u003C/li>\n\u003Cli>\u003Cstrong>Flexibility\u003C/strong> — Unlimited matrices, power mode grid, CSV import/export (PrintLife’s 2/5 → our 5/5)\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"competitor-landscape\">Competitor Landscape\u003C/h2>\n\u003Ch3 id=\"the-print-life--our-baseline\">The Print Life — Our Baseline\u003C/h3>\n\u003Cp>\u003Cstrong>4Ink’s Current Tool — 74% (26/35)\u003C/strong>\u003C/p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Criterion\u003C/th>\u003Cth>Rating\u003C/th>\u003Cth>Assessment\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>Capabilities\u003C/td>\u003Ctd>3/5\u003C/td>\u003Ctd>Basic matrix types, recently added measurement-based pricing\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>User Satisfaction\u003C/td>\u003Ctd>3/5\u003C/td>\u003Ctd>Positive on automation, limited public reviews\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Ease of Use\u003C/td>\u003Ctd>4/5\u003C/td>\u003Ctd>Designed to “just work” with low learning curve\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>Flexibility\u003C/strong>\u003C/td>\u003Ctd>\u003Cstrong>2/5\u003C/strong>\u003C/td>\u003Ctd>Basic structures only. No custom rules, no breakless pricing\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Simplicity\u003C/td>\u003Ctd>\u003Cstrong>5/5\u003C/strong>\u003C/td>\u003Ctd>Core strength — prevents overwhelm\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Integration\u003C/td>\u003Ctd>4/5\u003C/td>\u003Ctd>All-in-one: quoting → production → shipping\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Automation\u003C/td>\u003Ctd>\u003Cstrong>5/5\u003C/strong>\u003C/td>\u003Ctd>Prevents common errors (forgetting setup fees, ink charges)\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch3 id=\"competitive-ratings\">Competitive Ratings\u003C/h3>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Competitor\u003C/th>\u003Cth>Score\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>Print Life\u003C/td>\u003Ctd>74%\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>YoPrint\u003C/td>\u003Ctd>74%\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Teesom\u003C/td>\u003Ctd>74%\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>PriceIt\u003C/td>\u003Ctd>74%\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>DecoNetwork\u003C/td>\u003Ctd>69%\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Printavo\u003C/td>\u003Ctd>69%\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>ShopWorx\u003C/td>\u003Ctd>69%\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>OrderMyGear\u003C/td>\u003Ctd>66%\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>InkSoft\u003C/td>\u003Ctd>60%\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch3 id=\"where-we-win\">Where We Win\u003C/h3>\n\u003Cpre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>                    High Flexibility\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>                         |\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>              Teesom o   |   * Screen Print Pro\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>                         |      (TARGET)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>                         |\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan> Low Automation ----------+-------- High Automation\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>                         |\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>          ShopWorx o     |     o Print Life\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>                         |     o Printavo\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>                         |\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>                    Low Flexibility\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>No current competitor occupies the \u003Cstrong>high automation + high flexibility\u003C/strong> quadrant. That’s our target.\u003C/p>\n\u003Ch3 id=\"key-innovations-to-adopt\">Key Innovations to Adopt\u003C/h3>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Innovation\u003C/th>\u003Cth>Source\u003C/th>\u003Cth>Impact\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>Breakless pricing\u003C/td>\u003Ctd>YoPrint\u003C/td>\u003Ctd>Eliminates quantity break gaming, fairer pricing\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Vendor cost sync\u003C/td>\u003Ctd>YoPrint\u003C/td>\u003Ctd>Auto-update garment costs from SanMar, AlphaBroder\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Size matrix entry\u003C/td>\u003Ctd>ShopWorx\u003C/td>\u003Ctd>S:10, M:25, L:15 in one line — 3x faster\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Production variables\u003C/td>\u003Ctd>ShopWorx\u003C/td>\u003Ctd>Price by mesh count, ink type, squeegee\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Area-based pricing\u003C/td>\u003Ctd>DecoNetwork\u003C/td>\u003Ctd>Per-square-inch pricing by color count\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Unlimited matrices\u003C/td>\u003Ctd>Teesom\u003C/td>\u003Ctd>No artificial limits on pricing configs\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"integration-architecture\">Integration Architecture\u003C/h2>\n\u003Cp>Industry leaders treat pricing as a \u003Cstrong>centralized calculation engine\u003C/strong> consumed by all verticals — not a lookup table embedded in the quote form.\u003C/p>\n\u003Ch3 id=\"data-flow\">Data Flow\u003C/h3>\n\u003Cp>\u003Cstrong>Customer Context\u003C/strong> → \u003Cstrong>Price Matrix Engine\u003C/strong> → \u003Cstrong>Quote\u003C/strong> (with margin) → \u003Cstrong>Price Lock on Approval\u003C/strong> → \u003Cstrong>Invoice\u003C/strong> (honors locked prices) → \u003Cstrong>Production\u003C/strong> (tracks actual costs) → \u003Cstrong>Reporting\u003C/strong> (margin analysis) → feedback to Price Matrix calibration\u003C/p>\n\u003Ch3 id=\"five-integration-points\">Five Integration Points\u003C/h3>\n\u003Col>\n\u003Cli>\u003Cstrong>Customer\u003C/strong> — Contract pricing, loyalty tiers, manual discount authority with approval workflow\u003C/li>\n\u003Cli>\u003Cstrong>Quoting\u003C/strong> — Primary consumer. Auto-calculated quotes, margin visibility, price locking, quote versioning\u003C/li>\n\u003Cli>\u003Cstrong>Invoicing\u003C/strong> — Quote-to-invoice conversion with price locking, progress billing (50% deposit), tax, audit trail\u003C/li>\n\u003Cli>\u003Cstrong>Reporting\u003C/strong> — Margin by job/customer/product, pricing trends, discount impact analysis\u003C/li>\n\u003Cli>\u003Cstrong>Production\u003C/strong> — Actual vs. estimated costs, variance tracking, realized margin per job\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"ux-strategy--10x-better\">UX Strategy — 10x Better\u003C/h2>\n\u003Ch3 id=\"progressive-disclosure\">Progressive Disclosure\u003C/h3>\n\u003Ch3 id=\"simple-mode-default\">Simple Mode (Default)\u003C/h3>\n\u003Cp>5-step wizard — enter shop basics, choose structure, set breakpoints, auto-calculate with smart defaults, preview with sample orders. New shop gets pricing in 5 minutes.\u003C/p>\n\u003Ch3 id=\"power-mode-advanced-toggle\">Power Mode (Advanced Toggle)\u003C/h3>\n\u003Cp>TanStack Table with inline editing, keyboard shortcuts (arrow keys, Ctrl+C/V), bulk actions, CSV import/export, fill handle for dragging values. Excel-like power without leaving the app.\u003C/p>\n\u003Ch3 id=\"real-time-margin-indicators\">Real-Time Margin Indicators\u003C/h3>\n\u003Cp>Every price cell gets a color indicator using our Niji palette:\u003C/p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Margin\u003C/th>\u003Cth>Color\u003C/th>\u003Cth>Meaning\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>>= 30%\u003C/td>\u003Ctd>Green (#54ca74)\u003C/td>\u003Ctd>Healthy profit\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>15-30%\u003C/td>\u003Ctd>Yellow (#ffc663)\u003C/td>\u003Ctd>Low profit, caution\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>&#x3C; 15%\u003C/td>\u003Ctd>Red (#d23e08)\u003C/td>\u003Ctd>Unprofitable\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Cp>Tooltip on hover: \u003Cem>“Margin: 32% ($450 revenue - $306 cost = $144 profit)“\u003C/em>\u003C/p>\n\u003Ch3 id=\"pain-points-we-solve\">Pain Points We Solve\u003C/h3>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Industry Pain Point\u003C/th>\u003Cth>Our Solution\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>”Don’t understand pricing after 3 years” (Shopvox)\u003C/td>\u003Ctd>Wizard setup, done in 5 minutes\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>No profitability reporting\u003C/td>\u003Ctd>Real-time margin % per cell + dashboard\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>No labor cost tracking\u003C/td>\u003Ctd>Factor hourly rate, setup time, press time\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Can’t experiment with pricing\u003C/td>\u003Ctd>What-if scenarios, undo/redo, version history\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Manual Excel workflows\u003C/td>\u003Ctd>CSV import/export, inline editing\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"feature-recommendations\">Feature Recommendations\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Priority\u003C/th>\u003Cth>Count\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>P0 — Critical\u003C/td>\u003Ctd>12\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>P1 — Surpass 4Ink\u003C/td>\u003Ctd>14\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>P2 — Top Market\u003C/td>\u003Ctd>10\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch3 id=\"p0--critical-table-stakes--printlife-parity\">P0 — Critical (Table Stakes + PrintLife Parity)\u003C/h3>\n\u003Cp>Must-have for any viable price matrix. We cannot demo without these.\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>P0 — Multi-dimensional pricing engine\u003C/strong> (L) — Calculate price from qty x colors x locations x garment type. Real-time, no “Calculate” button.\u003C/li>\n\u003Cli>\u003Cstrong>P0 — Quantity break configuration\u003C/strong> (M) — Custom break points (default: 12, 24, 48, 72, 144+). Auto-calculate per-tier pricing.\u003C/li>\n\u003Cli>\u003Cstrong>P0 — Color count pricing\u003C/strong> (M) — Per-color-hit rate ($0.50-1.00). Supports 1-8+ colors. Each color = one screen.\u003C/li>\n\u003Cli>\u003Cstrong>P0 — Print location pricing\u003C/strong> (M) — Front (base), back (+$2), sleeves (+$3), pocket (+$5). Per-location upcharges.\u003C/li>\n\u003Cli>\u003Cstrong>P0 — Setup fee management\u003C/strong> (M) — Per-screen fees ($15-35), bulk waiver rules (72+ pieces), reorder discounts.\u003C/li>\n\u003Cli>\u003Cstrong>P0 — Garment type &#x26; cost library\u003C/strong> (M) — Garment types with wholesale costs, configurable markup %. Brand/style/color variants.\u003C/li>\n\u003Cli>\u003Cstrong>P0 — Real-time price preview\u003C/strong> (M) — Update entire pricing table instantly as user changes any input. No page reload.\u003C/li>\n\u003Cli>\u003Cstrong>P0 — Price breakdown display\u003C/strong> (S) — Show: Garment + Setup allocation + Print fees = Total. Collapsible detail view.\u003C/li>\n\u003Cli>\u003Cstrong>P0 — Simple Mode wizard\u003C/strong> (L) — 5-step setup with smart defaults. New shop gets pricing configured in 5 minutes.\u003C/li>\n\u003Cli>\u003Cstrong>P0 — Smart defaults\u003C/strong> (S) — Pre-fill with industry averages ($60/hr, $25/screen, 2x markup, standard tiers).\u003C/li>\n\u003Cli>\u003Cstrong>P0 — Auto-error prevention\u003C/strong> (M) — Match PrintLife: auto-include setup fees, prevent forgetting ink and location charges.\u003C/li>\n\u003Cli>\u003Cstrong>P0 — Quote integration\u003C/strong> (L) — Quote form calls price matrix API for all calculations. Pricing flows to quotes seamlessly.\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"p1--phase-1-surpass-printlife-wow-the-demo\">P1 — Phase 1 (Surpass PrintLife, Wow the Demo)\u003C/h3>\n\u003Cp>Features that make Screen Print Pro clearly superior to PrintLife. This is the 10x demo moment.\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>P1 — Real-time margin indicators\u003C/strong> (M) — Green/yellow/red per price cell. Tooltip shows full cost/margin breakdown. \u003Cstrong>PrintLife has ZERO margin visibility — this alone is 10x.\u003C/strong>\u003C/li>\n\u003Cli>\u003Cstrong>P1 — Contract vs. retail pricing toggle\u003C/strong> (M) — Switch pricing modes per customer. Contract = lower margin, waived setup fees.\u003C/li>\n\u003Cli>\u003Cstrong>P1 — Customer-specific price sheets\u003C/strong> (L) — Assign custom pricing to contract customers. Override base matrix per customer relationship.\u003C/li>\n\u003Cli>\u003Cstrong>P1 — Rush order upcharges\u003C/strong> (S) — +10% (5-7 days), +25% (3-4 days), +50% (24-48hr). Auto-calculate from turnaround time.\u003C/li>\n\u003Cli>\u003Cstrong>P1 — Specialty ink surcharges\u003C/strong> (S) — Water-based (+$0.50), discharge (+$0.75), metallic (+$1.00), glow (+$1.50) per print.\u003C/li>\n\u003Cli>\u003Cstrong>P1 — Size matrix entry\u003C/strong> (M) — Single line: S:10, M:25, L:15, XL:8 instead of per-size rows. 3x faster data entry.\u003C/li>\n\u003Cli>\u003Cstrong>P1 — Unlimited price matrices\u003C/strong> (S) — No artificial limits. Create seasonal, customer-tier, event-specific matrices.\u003C/li>\n\u003Cli>\u003Cstrong>P1 — What-if scenarios\u003C/strong> (L) — “What if I raise prices 10%?” Side-by-side current vs. proposed with margin impact. \u003Cstrong>No competitor offers this.\u003C/strong>\u003C/li>\n\u003Cli>\u003Cstrong>P1 — Power Mode grid\u003C/strong> (L) — TanStack Table with inline editing, bulk actions, keyboard shortcuts. Toggle from Simple Mode.\u003C/li>\n\u003Cli>\u003Cstrong>P1 — CSV import/export\u003C/strong> (M) — Export to CSV, import with column mapping wizard, inline validation, template download.\u003C/li>\n\u003Cli>\u003Cstrong>P1 — Margin threshold alerts\u003C/strong> (S) — Flag quotes below 30% margin for review. Configurable threshold per shop.\u003C/li>\n\u003Cli>\u003Cstrong>P1 — Duplicate/template pricing\u003C/strong> (S) — One-click duplicate matrix. “Standard 2026” → “Black Friday 2026” in seconds.\u003C/li>\n\u003Cli>\u003Cstrong>P1 — Price locking on approval\u003C/strong> (M) — Freeze pricing when customer approves quote. Invoice honors locked price even if matrix changes.\u003C/li>\n\u003Cli>\u003Cstrong>P1 — Discount authority controls\u003C/strong> (M) — Max % per role, approval workflow for discounts exceeding threshold. Full audit trail.\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"p2--phase-2-matchsurpass-top-competitors\">P2 — Phase 2 (Match/Surpass Top Competitors)\u003C/h3>\n\u003Cp>Features that position Screen Print Pro at or above every competitor in the market.\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>P2 — Breakless pricing\u003C/strong> (L) — Linear pricing without quantity break jumps. Eliminates gaming. Offer alongside traditional breaks.\u003C/li>\n\u003Cli>\u003Cstrong>P2 — Vendor cost integration\u003C/strong> (L) — Auto-sync garment costs from SanMar, AlphaBroder, S&#x26;S Activewear APIs.\u003C/li>\n\u003Cli>\u003Cstrong>P2 — Version history + rollback\u003C/strong> (M) — Full audit trail with timestamps. Click to preview, “Restore This Version” button.\u003C/li>\n\u003Cli>\u003Cstrong>P2 — Profitability dashboard\u003C/strong> (L) — Margin by job, customer, product type. Discount impact analysis. Pricing trends.\u003C/li>\n\u003Cli>\u003Cstrong>P2 — Production cost tracking\u003C/strong> (L) — Actual vs. estimated costs. Labor hours, ink usage, variance analysis per job.\u003C/li>\n\u003Cli>\u003Cstrong>P2 — Area-based pricing\u003C/strong> (M) — Price per square inch by color count. Alternate mode to per-piece pricing.\u003C/li>\n\u003Cli>\u003Cstrong>P2 — Loyalty tier automation\u003C/strong> (M) — Auto-promote customers based on lifetime volume. Standard → Silver → Gold → Platinum.\u003C/li>\n\u003Cli>\u003Cstrong>P2 — QuickBooks integration\u003C/strong> (L) — Two-way invoice sync, automatic tax calculation, payment reconciliation.\u003C/li>\n\u003Cli>\u003Cstrong>P2 — AI pricing suggestions\u003C/strong> (L) — Suggest pricing based on historical quotes, margins, and win rates. Flag unprofitable patterns.\u003C/li>\n\u003Cli>\u003Cstrong>P2 — Capacity-based pricing\u003C/strong> (L) — Adjust prices based on current shop load and press availability.\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"demo-success-criteria\">Demo Success Criteria\u003C/h2>\n\u003Cp>\u003Cstrong>Goal:\u003C/strong> Make 4Ink say “This is so much better than PrintLife.”\u003C/p>\n\u003Ch3 id=\"must-demonstrate\">Must Demonstrate\u003C/h3>\n\u003Col>\n\u003Cli>\u003Cstrong>5-minute setup\u003C/strong> — Create a new price matrix from scratch using the wizard\u003C/li>\n\u003Cli>\u003Cstrong>Instant margins\u003C/strong> — Green/yellow/red margin indicators per price cell\u003C/li>\n\u003Cli>\u003Cstrong>What-if power\u003C/strong> — “What if I raise prices 10%?” with side-by-side comparison\u003C/li>\n\u003Cli>\u003Cstrong>Quote flow\u003C/strong> — Create a quote that auto-pulls from the price matrix\u003C/li>\n\u003Cli>\u003Cstrong>Contract pricing\u003C/strong> — Show different prices for contract vs. retail\u003C/li>\n\u003Cli>\u003Cstrong>Price breakdown\u003C/strong> — Transparent garment + setup + print = total\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"research-documents\">Research Documents\u003C/h2>\n\u003Cp>Full research reports are available as rendered markdown on GitHub:\u003C/p>\n\u003Cul>\n\u003Cli>\u003Ca href=\"https://github.com/cmbays/print-4ink/blob/session/0210-price-matrix/docs/research/price-matrix-research.md\">Final Synthesis Report\u003C/a> — Executive summary, all findings, P0/P1/P2 recommendations\u003C/li>\n\u003Cli>\u003Ca href=\"https://github.com/cmbays/print-4ink/blob/session/0210-price-matrix/docs/research/01-industry-practices.md\">Industry Best Practices\u003C/a> — Pricing dimensions, formulas, setup fees, MOQs, specialty inks\u003C/li>\n\u003Cli>\u003Ca href=\"https://github.com/cmbays/print-4ink/blob/session/0210-price-matrix/docs/research/02-competitor-analysis.md\">Competitor Analysis\u003C/a> — 10 platforms rated on 7 criteria, PrintLife baseline, innovation gaps\u003C/li>\n\u003Cli>\u003Ca href=\"https://github.com/cmbays/print-4ink/blob/session/0210-price-matrix/docs/research/03-integration-map.md\">Integration Map\u003C/a> — 5 vertical integrations, TypeScript schemas, API surfaces, data flows\u003C/li>\n\u003Cli>\u003Ca href=\"https://github.com/cmbays/print-4ink/blob/session/0210-price-matrix/docs/research/04-ux-patterns.md\">UX/UI Patterns &#x26; Innovations\u003C/a> — Progressive disclosure, margin indicators, what-if, CSV UX, smart defaults\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"next-steps\">Next Steps\u003C/h2>\n\u003Col>\n\u003Cli>\u003Cstrong>Review report\u003C/strong> with domain knowledge of 4Ink — flag anything that doesn’t match reality\u003C/li>\n\u003Cli>\u003Cstrong>Run vertical-discovery skill\u003C/strong> to formalize scope from this research\u003C/li>\n\u003Cli>\u003Cstrong>Breadboard\u003C/strong> the price matrix UI (places, affordances, wiring)\u003C/li>\n\u003Cli>\u003Cstrong>Build Phase 1a\u003C/strong> (P0: pricing engine + wizard + quote integration)\u003C/li>\n\u003Cli>\u003Cstrong>Build Phase 1b\u003C/strong> (P1 highlights: margin indicators, what-if, power mode)\u003C/li>\n\u003Cli>\u003Cstrong>Demo to 4Ink\u003C/strong> with the wow features\u003C/li>\n\u003C/ol>",{"headings":981,"localImagePaths":1056,"remoteImagePaths":1057,"frontmatter":1058,"imagePaths":1062},[982,985,988,991,994,997,1000,1003,1006,1009,1012,1013,1016,1019,1022,1025,1028,1031,1034,1037,1040,1043,1046,1049,1052,1055],{"depth":34,"slug":983,"text":984},"research-at-a-glance","Research at a Glance",{"depth":34,"slug":986,"text":987},"executive-summary","Executive Summary",{"depth":40,"slug":989,"text":990},"how-screen-printing-pricing-works","How Screen Printing Pricing Works",{"depth":40,"slug":992,"text":993},"the-10x-strategy","The 10x Strategy",{"depth":34,"slug":995,"text":996},"competitor-landscape","Competitor Landscape",{"depth":40,"slug":998,"text":999},"the-print-life--our-baseline","The Print Life — Our Baseline",{"depth":40,"slug":1001,"text":1002},"competitive-ratings","Competitive Ratings",{"depth":40,"slug":1004,"text":1005},"where-we-win","Where We Win",{"depth":40,"slug":1007,"text":1008},"key-innovations-to-adopt","Key Innovations to Adopt",{"depth":34,"slug":1010,"text":1011},"integration-architecture","Integration Architecture",{"depth":40,"slug":833,"text":834},{"depth":40,"slug":1014,"text":1015},"five-integration-points","Five Integration Points",{"depth":34,"slug":1017,"text":1018},"ux-strategy--10x-better","UX Strategy — 10x Better",{"depth":40,"slug":1020,"text":1021},"progressive-disclosure","Progressive Disclosure",{"depth":40,"slug":1023,"text":1024},"simple-mode-default","Simple Mode (Default)",{"depth":40,"slug":1026,"text":1027},"power-mode-advanced-toggle","Power Mode (Advanced Toggle)",{"depth":40,"slug":1029,"text":1030},"real-time-margin-indicators","Real-Time Margin Indicators",{"depth":40,"slug":1032,"text":1033},"pain-points-we-solve","Pain Points We Solve",{"depth":34,"slug":1035,"text":1036},"feature-recommendations","Feature Recommendations",{"depth":40,"slug":1038,"text":1039},"p0--critical-table-stakes--printlife-parity","P0 — Critical (Table Stakes + PrintLife Parity)",{"depth":40,"slug":1041,"text":1042},"p1--phase-1-surpass-printlife-wow-the-demo","P1 — Phase 1 (Surpass PrintLife, Wow the Demo)",{"depth":40,"slug":1044,"text":1045},"p2--phase-2-matchsurpass-top-competitors","P2 — Phase 2 (Match/Surpass Top Competitors)",{"depth":34,"slug":1047,"text":1048},"demo-success-criteria","Demo Success Criteria",{"depth":40,"slug":1050,"text":1051},"must-demonstrate","Must Demonstrate",{"depth":34,"slug":1053,"text":1054},"research-documents","Research Documents",{"depth":34,"slug":170,"text":171},[],[],{"title":968,"subtitle":969,"date":1059,"phase":17,"vertical":971,"verticalSecondary":1060,"stage":20,"tags":1061,"sessionId":907,"branch":974,"status":25},["Date","2026-02-10T00:00:00.000Z"],[],[20,189,22],[],"2026-02-10-invoicing-vertical-research",{"id":1063,"data":1065,"body":1073,"filePath":1074,"digest":1075,"rendered":1076},{"title":1066,"subtitle":1067,"date":1068,"phase":17,"vertical":864,"verticalSecondary":1069,"stage":20,"tags":1070,"sessionId":1071,"branch":1072,"status":25},"Invoicing Vertical Research","Comprehensive competitive, UX, integration, compliance, and industry research for the Screen Print Pro invoicing vertical",["Date","2026-02-10T00:00:00.000Z"],[],[20,189],"2e017579-35ba-4702-9fa6-428c2bbcec28","session/0210-invoicing-research","| Metric | Value |\n|--------|-------|\n| 5 | Research Agents |\n| 6 | Competitors Analyzed |\n| 80+ | Sources Cited |\n\n1. [Executive Summary](#executive-summary)\n2. [Industry Best Practices](#industry)\n3. [Competitive Landscape](#competitors)\n4. [Integration Architecture](#integration)\n5. [UX Recommendations](#ux)\n6. [Legal & Compliance](#compliance)\n7. [Proposed Data Model](#schemas)\n8. [Build Sequence](#build-plan)\n9. [Differentiation Strategy](#differentiation)\n10. [Key Decisions (Interview)](#decisions)\n11. [Research Source Documents](#sources)\n\n## 1. Executive Summary\n\n**The invoicing vertical is the natural next step for Screen Print Pro.** The existing quote schema already contains 90% of the data an invoice needs. The competitive landscape reveals fragmented solutions where every platform excels in 1-2 areas but has significant blind spots. Our opportunity: production-aware invoicing that feels as simple as Printavo on day one but grows with the shop.\n\n### Key Findings Across All Research Tracks\n\n**Industry:** Screen printing invoicing is well-established but poorly served. The quote-to-cash pipeline (Quote → Deposit → Production → Final Invoice) is standard. Shops charge for garments, print costs per color/location, screen setup, art, rush fees, and shipping. 50% deposit is the norm. The #1 pain point is chasing late payments — 87% of invoices are paid after the due date.\n\n**Competitive:** PrintLife has strong supplier integration but no multi-user support. PrintLife leads on supplier catalog integration (S&S, SanMar, Alphabroder) and has a unique ink change-out guardrail. But it's single-user only with no G2/Capterra presence. Printavo dominates small shops but users outgrow it. shopVOX has the deepest features but is overly complex. No one nails both simplicity and power.\n\n**Integration:** Existing schemas are 90% ready for invoicing. The quote schema's line items, customer payment terms, tax-exempt fields, and pricing tiers map directly to invoice fields. Only two new schema files needed: `invoice.ts` and `credit-memo.ts`. Five existing verticals (Quotes, Customers, Artwork, Screen Room, Production) connect to invoicing. Four future verticals (Jobs, Reporting, Shipping, Inventory) consume invoice data.\n\n**UX:** Mirror the existing quote form pattern. The invoice creation UX should use the same collapsible section form + sticky summary bar as the Quote Form. Invoice list follows the Customers page pattern (stats bar + smart view tabs + data table). Component reuse is extensive: StatusBadge, ColumnHeaderMenu, CustomerCombobox, LineItemRow, PricingSummary, EmailPreviewModal.\n\n**Compliance:** Screen printing is taxable as fabrication in virtually all states. The entire charge (materials + labor + setup + design) is taxable. The only common exemption is resale certificates. Invoices must be immutable once issued (void, never delete). 7-year data retention. QuickBooks Online is the primary accounting integration target. PCI compliance handled by using tokenized processors (Stripe/Square).\n\n## 2. Industry Best Practices\n\n### The 8-Step Quote-to-Cash Pipeline\n\nEvery screen printing shop follows this fundamental workflow, with variations in deposit percentage and payment terms:\n\n```\nEstimate/Quote  →  Customer Approval  →  Deposit (50%)  →  Work Order\n     |                                                        |\n  Production  →  Quality Check  →  Invoice (balance)  →  Delivery + Payment\n```\n\n### Standard Invoice Line Item Categories\n\n| Category | Description | Typical Pricing |\n|----------|-------------|-----------------|\n| Garment Cost | Wholesale with 150-200% markup | $5 wholesale → $7.50-$10 |\n| Print Cost | Per piece, per color, per location | $1.80-$5.00/piece |\n| Screen Setup | Per screen (per color per location) | $10-$30/screen |\n| Art/Design | Custom artwork or modifications | $25 (text) to $65/hr (custom) |\n| Color Change | Switching ink mid-run | $10-$15/change |\n| Rush Fee | Tiered by turnaround time | 10-50% surcharge |\n| Shipping | Carrier charges + handling | Actual + $6/box handling |\n| Film Output | Cost of film positives | $12-$15 per spot color |\n| Pantone Match | Custom color mixing | $10-$15 per color |\n| Sample/Pre-prod | Test prints before full run | $150+ minimum |\n\n### Payment Terms by Customer Type\n\n| Term | Who Gets It | Notes |\n|------|------------|-------|\n| 100% Upfront | New/unknown customers | Full payment before production |\n| 50% Deposit + Balance | Standard for most jobs | Industry standard |\n| COD | Walk-in customers | Payment at pickup |\n| Net 15 | Established customers | Requires credit application |\n| Net 30 | Large/corporate accounts | 1.5%/month late fee standard |\n| Net 60 | Rare, large contracts only | High risk for small shops |\n\n### Industry Spoilage Standards\n\nSpoilage affects invoicing through credit memos and adjustments:\n\n- **Standard:** 2% acceptable spoilage rate\n- **100+ pieces:** Up to 3%\n- **Under 100 pieces:** Up to 10% (higher due to setup proportion)\n- **Best-in-class target:** Under 2%\n\n### Top 10 Invoicing Pain Points (Ranked by Frequency)\n\n1. **Chasing late payments** — 87% of invoices paid late; over 50% of B2B invoices in US are past due\n2. **Cash flow gaps** — fronting materials with Net 30 terms devastating for small shops\n3. **Quote-to-invoice disconnection** — manual re-entry introduces errors\n4. **Accounting sync issues** — one-directional sync, credit memos don't export\n5. **Deposit tracking** — which deposits collected, applied, what balance remains\n6. **Tax complexity** — resale certificates, expirations, multi-state nexus\n7. **Change order management** — mid-production changes hard to track on invoices\n8. **Overrun/underrun reconciliation** — actual vs ordered quantities\n9. **Multiple payment methods** — cash + check + Venmo + card = reconciliation nightmare\n10. **Professional appearance** — generic templates undermine credibility\n\n## 3. Competitive Landscape\n\n### Feature Comparison Matrix\n\n| Feature | PrintLife | Printavo | shopVOX | DecoNetwork | InkSoft |\n|---------|----------|----------|---------|-------------|---------|\n| Quote → Invoice | Yes | Yes | 3-step | 1-click | Yes |\n| Progress invoicing | No | Partial | Best | Yes | Partial |\n| Multi-invoice payment | No | Unique | No | No | No |\n| Invoice read receipts | No | No | Unique | No | No |\n| Stripe | Yes | Yes | Yes | DecoPay | Own |\n| QuickBooks Online | Yes | 2hr sync | Yes | Yes | No |\n| Xero / Sage | No | No | Both | Both | No |\n| SMS invoicing | Twilio | Premium | No | No | No |\n| Customer portal | Strong | Yes | cPortal | Yes | Yes |\n| Multi-user / roles | No | Limited | Yes | Yes | Yes |\n| Supplier catalogs | Best | No | No | Yes | Yes |\n| AR / Sales reports | Basic | Full | Best | Limited | Basic |\n\n### Pricing Comparison\n\n| Platform | Entry | Mid Tier | Top Tier | Model |\n|----------|-------|----------|----------|-------|\n| PrintLife | Not public | Not public | Not public | Subscription |\n| Printavo | $49/mo | $149/mo | $199/mo + $99 Merch | Tiered flat |\n| shopVOX | $99 + $19/user | $199 + $39/user | Custom | Base + per-user |\n| DecoNetwork | $199/mo | Custom | Custom | Tiered + license |\n| InkSoft | $314/mo | $419/mo | — | Flat rate |\n\n### PrintLife Deep Assessment\n\n**PrintLife Strengths (Match or Exceed):**\n\n- **Supplier integration** — S&S, SanMar, Alphabroder directly in project builder\n- **Ink change-out guardrail** — unique production safeguard, no competitor has this\n- **Triple payment processor** — only platform with Stripe + PayPal + Square\n- **SMS via Twilio** — quotes and invoices via text\n- **Customer portal** — self-ordering within shop-defined parameters\n\n**PrintLife Weaknesses (Our Opportunity):**\n\n- **Single-user only** — dealbreaker for growing shops; role-based permissions undelivered\n- **No G2/Capterra presence** — invisible to buyers researching options\n- **Only QuickBooks Online** — no Xero, Sage, QB Desktop\n- **No progress invoicing** — can't invoice partial deliveries\n- **Limited reporting** — basic compared to Printavo/shopVOX\n- **Small dev team** — roadmap items slip; bug fixes take priority\n\n## 4. Integration Architecture\n\n### Master Data Flow: Quote-to-Cash Lifecycle\n\n```\n QUOTE (Estimate)          JOB (Production)          INVOICE (Billing)\n ┌──────────────┐   Accept  ┌──────────────┐  Convert  ┌──────────────┐\n │ Line items   │ ────────> │ Actual costs │ ────────> │ Locked prices│\n │ Pricing      │           │ tracked here │           │ Payments     │\n │ Discounts    │           │              │           │ Balance due  │\n └──────┬───────┘           └──────┬───────┘           └──────┬───────┘\n        │                          │                          │\n        │ Price Matrix             │ Variance                 │ Revenue\n        v                          v                          v\n   ┌──────────┐             ┌──────────┐              ┌──────────────┐\n   │ CUSTOMER │             │ COSTING  │              │  REPORTING   │\n   │ terms    │             │ actual   │              │  AR aging    │\n   │ tax info │             │ vs quote │              │  revenue     │\n   └──────────┘             └──────────┘              └──────────────┘\n```\n\n### Integration with Existing Verticals\n\n| Vertical | Integration Point | Data Flow |\n|----------|-------------------|-----------|\n| Quotes | Quote → Invoice conversion | Line items, pricing, discounts snapshot & lock. Only accepted quotes can generate invoices. |\n| Customers | Financial context | `paymentTerms` → due date calc, `taxExempt` → tax rate, `billingAddress` → invoice address, `pricingTier` → default discount |\n| Artwork | Billable charges | Art creation ($40 flat), revisions ($65/hr), complex custom (quoted). Referenced via `artworkId` |\n| Screen Room | Setup fee itemization | Screen burn ($15-35/screen), reclaim ($5-10), color change ($5/screen). Linked via `jobId` |\n| Production | Invoice triggers | \"design\" → deposit invoice, \"shipped\" → final invoice. Auto-flag shipped jobs with unpaid invoices |\n\n### Integration with Future Verticals\n\n| Vertical | Invoice Data Consumed |\n|----------|-----------------------|\n| Jobs | Quoted vs actual vs billed comparison. Profitability per job. Margin analysis. |\n| Reporting | AR aging (0-30, 31-60, 61-90, 90+), payment velocity, customer lifetime value, revenue trends, discount impact |\n| Shipping | Shipping line items, delivery confirmation triggers final invoice, tracking numbers attached to invoices |\n| Inventory | Garment COGS flows to job costing. Size upcharges through to invoice. Spoilage absorbed in margin. |\n\n### Schema Dependencies\n\n**Existing schemas that feed invoicing:** `customer.ts` (payment terms, tax-exempt, billing address, pricing tier), `quote.ts` (line items, discounts, shipping, tax), `job.ts` (production state triggers), `artwork.ts` (billable art charges), `screen.ts` (setup fees). **One existing schema needs update:** `note.ts` needs \"invoice\" added to `noteEntityTypeEnum`.\n\n## 5. UX Recommendations\n\n### Information Architecture\n\nAdd \"Invoices\" to sidebar between Quotes and Customers, reflecting the natural workflow order:\n\n```\nDashboard    /\nJobs         /jobs\nQuotes       /quotes\nInvoices     /invoices       \u003C-- NEW\nCustomers    /customers\nScreen Room  /screens\nGarments     /garments\n```\n\n### Key Screens\n\n**Screen 1: Invoices List** `/invoices`\n\n**Pattern:** Mirrors Customers page — Stats Bar + Smart View Tabs + Data Table\n\n**Stats bar (4 KPIs):** Total Outstanding, Overdue Count & Amount, Paid This Month, Avg Days to Pay\n\n**Smart view tabs:** All | Draft | Outstanding | Overdue | Paid\n\n**Table columns:** Invoice #, Customer, Status, Amount, Due Date, Balance Due, Date Created\n\n**Batch operations:** Send Selected, Mark as Paid, Send Reminder\n\n**Screen 2: Invoice Detail** `/invoices/[id]`\n\n**Pattern:** Mirrors QuoteDetailView\n\n**Layout:** Sticky header (invoice # + status + actions) → Customer info card → Source links (quote, job) → Line items table → Pricing summary → Payment ledger + \"Record Payment\" → Reminder timeline → Notes\n\n**Actions by status:**\n- Draft: Edit, Send, Delete\n- Sent/Open: Record Payment, Send Reminder, Void, Duplicate\n- Overdue: Record Payment, Send Reminder (escalated), Void\n- Paid: View Receipt, Duplicate\n\n**Screen 3: New Invoice** `/invoices/new`\n\n**Pattern:** Mirrors QuoteForm with collapsible sections + sticky summary bar\n\n**Primary flow:** \"Create Invoice\" from accepted quote auto-populates everything\n\n**Sections:** Customer (auto-filled) → Line Items (from quote, editable) → Pricing (auto-calculated) → Payment Terms (from customer default) → Notes\n\n**Actions:** Cancel | Save as Draft | Review & Send\n\n### Status Badges\n\n| Status | Style | Token |\n|--------|-------|-------|\n| Draft | `bg-muted text-muted-foreground` | Neutral, low emphasis |\n| Sent / Open | `bg-action/10 text-action` | Niji blue — awaiting action |\n| Partially Paid | `bg-warning/10 text-warning` | Gold — in progress |\n| Paid | `bg-success/10 text-success` | Green — complete |\n| Overdue | `bg-error/10 text-error` | Red — needs attention |\n| Void | `bg-muted text-muted-foreground` | Struck through, dimmed |\n\n### Component Reuse Strategy\n\nExtensive reuse from existing components minimizes build effort:\n\n| Existing Component | Reuse For |\n|--------------------|-----------|\n| `StatusBadge` | Extend to support InvoiceStatus |\n| `ColumnHeaderMenu` | Invoice table column sorting/filtering |\n| `CustomerCombobox` | Customer selection on invoice form |\n| `CollapsibleSection` | Invoice form sections |\n| `LineItemRow` | Invoice line items (from quotes) |\n| `PricingSummary` | Invoice pricing section |\n| `EmailPreviewModal` | Invoice email preview |\n\n### New Components Needed\n\n| Component | Purpose |\n|-----------|---------|\n| `InvoiceStatsBar` | 4 KPI cards for invoice list page |\n| `PaymentLedger` | Table of recorded payments on invoice detail |\n| `RecordPaymentSheet` | Slide-out form for recording payments |\n| `InvoiceActions` | Context-aware action buttons per status |\n| `PaymentReminderTimeline` | Visual timeline of sent/scheduled reminders |\n| `OverdueBadge` | Badge with days overdue + pulse animation |\n\n## 6. Legal & Compliance\n\n### Tax Treatment: Screen Printing Is Fabrication\n\n**Critical:** In virtually all major US states, screen printing is classified as **fabrication of tangible personal property**. The *entire* charge (materials + labor + setup + design) is taxable. Separately stating labor does NOT make it exempt. The only common exemption is a valid resale certificate.\n\n| State | Tax Rate (State) | Treatment |\n|-------|-----------------|-----------|\n| California | 7.25% + local | Fabrication. Setup/rush fees included in taxable amount. |\n| Texas | 6.25% + local (8.25% max) | Fabrication. Total sales price including all expenses. |\n| Florida | 6% + local | Fully taxable. All charges even when separately stated. |\n| New York | 4% + local (8.875% NYC) | Fabrication under Section 1105(c)(2). |\n| Ohio | 5.75% + local | Services to tangible personal property are taxable. |\n| North Carolina | 4.75% + local | Creative design charges included in taxable sales price. |\n\n### Required Invoice Elements (US)\n\n- Seller's legal business name and DBA\n- Seller's business address\n- Buyer's name and address\n- Unique sequential invoice number\n- Invoice date and due date\n- Itemized description with quantities and unit prices\n- Sales tax separately stated\n- Total amount due\n- Tax ID (EIN/TIN) for 1099 reporting thresholds\n- Payment terms and accepted methods\n\n### Data Integrity Requirements\n\n| Requirement | Implementation |\n|-------------|----------------|\n| Invoice immutability | Never modify issued invoices. Use credit memos + new invoices for corrections. |\n| Sequential numbering | Auto-increment, never skip or reuse voided numbers |\n| Audit trail | Log every action: who, what, when, before/after values. Append-only. |\n| Data retention | 7 years minimum (covers bad debt deductions, underreporting) |\n| Never hard-delete | Void invoices, never delete. Keep all financial records. |\n| PCI compliance | Never store card numbers. Use tokenized processors (Stripe/Square). |\n\n### Accounting Integration: QuickBooks Online\n\n| Entity | Direction | Notes |\n|--------|-----------|-------|\n| Customers | Bidirectional | Name, email, address, tax-exempt |\n| Invoices | App → QBO | Line items, tax, totals, due dates |\n| Payments | App → QBO | Method, amount, applied to invoice |\n| Tax Rates | QBO → App | Pull configured rates |\n| Credit Memos | App → QBO | For refunds and adjustments |\n\n**Top integration pitfalls:** Duplicate entries (biggest risk), 2-hour sync delays (Printavo), tax rounding differences, orphan records from deleted-not-voided invoices, OAuth token expiration. Use idempotency keys and always void (never delete).\n\n## 7. Proposed Data Model\n\n### Invoice Status State Machine\n\n```\n draft --> sent --> viewed --> paid\n                --> partial --> paid\n draft --> cancelled\n (any except paid) --> void\n (overdue is computed, not stored — past dueDate + unpaid)\n```\n\n### Core Enums\n\n| Enum | Values |\n|------|--------|\n| `invoiceStatusEnum` | draft, sent, viewed, partial, paid, void, cancelled |\n| `billingTypeEnum` | full, deposit, progress, final |\n| `paymentMethodEnum` | cash, check, credit-card, debit-card, ach, venmo, zelle, paypal, other |\n| `invoiceLineItemTypeEnum` | garment, decoration, setup, artwork, shipping, rush, discount, tax, adjustment, other |\n| `creditMemoReasonEnum` | overpayment, return, defect, pricing-error, void-partial-paid, goodwill, other |\n\n### Invoice Schema (Key Fields)\n\n```\ninvoiceSchema = z.object({\n  id: z.string().uuid(),\n  invoiceNumber: z.string(),        // INV-1001\n  customerId: z.string().uuid(),\n  quoteId: z.string().uuid().optional(),\n  jobId: z.string().uuid().optional(),\n  billingType: billingTypeEnum,\n\n  // Addresses (snapshot at creation)\n  billingAddress: addressSchema.optional(),\n  shippingAddress: addressSchema.optional(),\n\n  // Line items\n  lineItems: z.array(invoiceLineItemSchema),\n\n  // Financial summary\n  subtotal, discounts, taxRate, taxAmount,\n  shipping, total, amountPaid, amountDue,\n  payments: z.array(paymentSchema),\n\n  // Dates\n  invoiceDate, dueDate, paidDate?,\n\n  // Price locking\n  pricingSnapshot: { quoteTotal, lockedAt },\n\n  // Status + lifecycle\n  status: invoiceStatusEnum,\n  sentAt?, viewedAt?, voidedAt?, voidReason?,\n\n  // Notes\n  internalNotes?, customerNotes?,\n  termsAndConditions?,\n})\n```\n\n### New Files Needed\n\n| File | Purpose |\n|------|---------|\n| `lib/schemas/invoice.ts` | Invoice schema + line item, payment, discount sub-schemas + all enums |\n| `lib/schemas/credit-memo.ts` | Credit memo schema for adjustments and voids |\n| Update `lib/constants.ts` | Add status labels, colors, billing type labels, payment method labels |\n| Update `lib/schemas/note.ts` | Add \"invoice\" to `noteEntityTypeEnum` |\n\n## 8. Build Sequence\n\n### Phase 1a: Schema & Data Layer\n\n1. Define `invoice.ts` schema (Zod)\n2. Define `credit-memo.ts` schema\n3. Update `note.ts` to include \"invoice\" entity type\n4. Add invoice constants to `constants.ts`\n5. Create mock invoice data in `mock-data.ts`\n6. Write schema tests (Vitest)\n7. Add reverse lookup helpers\n\n### Phase 1b: Invoice List & Detail (Read-Only Views)\n\n8. Invoice List page (`/invoices`) with DataTable, stats bar, smart view tabs\n9. Invoice Detail page (`/invoices/[id]`) with header, line items, pricing summary, payment history\n10. Add sidebar navigation link\n\n### Phase 1c: Quote-to-Invoice Conversion\n\n11. \"Create Invoice\" button on Quote Detail (accepted quotes only)\n12. CreateInvoiceModal: billing type, deposit %, line item review, tax/shipping adjustment, preview\n13. Invoice creation logic (client-side mock data mutation)\n\n### Phase 1d: Payment Recording\n\n14. RecordPaymentSheet: amount (pre-filled), method, reference, date, notes\n15. Payment list on invoice detail\n16. Auto-status update: partial → paid when fully paid\n\n### Phase 1e: Customer Integration\n\n17. Add \"Invoices\" tab to Customer Detail page\n18. Customer financial summary: total billed, total paid, outstanding balance\n19. Payment history on customer page\n\n### Phase 2: Automation & Polish\n\n20. Dashboard integration (overdue invoices, AR summary)\n21. Invoice email preview\n22. Void/cancel workflow with credit memo generation\n23. Progress billing workflow (deposit → progress → final)\n24. Invoice duplication\n25. PDF preview/download\n\n### Phase 3: Backend & Integrations\n\n26. Database persistence\n27. Email delivery\n28. QuickBooks Online integration (OAuth 2.0)\n29. Payment gateway (Square)\n30. Automated recurring invoices\n\n## 9. Differentiation Strategy\n\nGaps no competitor fills well, or features we can execute better:\n\n### 1. Real-Time QuickBooks Sync\n\nPrintavo syncs every 2 hours. shopVOX requires manual config. Real-time, bidirectional sync is a headline differentiator that eliminates the #4 industry pain point.\n\n### 2. Invoice Read Receipts + Smart Follow-Up\n\nOnly shopVOX Pro has read receipts ($199+/user). We build it as core: know when customers open invoices, auto-trigger follow-up if they view but don't pay within X days. Multi-channel (SMS + email).\n\n### 3. Production-Aware Line Items\n\nNo competitor auto-populates invoice line items from the production workflow. If a job has 3 print locations with 4 colors each, plus garment data, the invoice auto-generates with all items pre-filled. Zero re-entry from quote to invoice.\n\n### 4. First-Class Deposit Workflow\n\nConfigurable deposit % per customer or job type, automatic balance calculation, deposit receipt to customer, remaining balance prominently displayed on final invoice. Most competitors treat deposits as an afterthought.\n\n### 5. Batch Operations for High-Volume Shops\n\nGenerate invoices for all completed jobs this week, batch send, batch mark as paid. For shops processing 50+ jobs/week, this is transformative. Only Printavo has multi-invoice payment (no one has batch operations).\n\n### 6. Progressive Disclosure\n\nshopVOX and DecoNetwork criticized for overwhelming complexity. We nail progressive disclosure: simple invoice creation under 5 minutes on day one, with advanced features (progress invoicing, PO numbers, custom fields) revealed as the shop grows.\n\n### 7. Job Profitability Dashboard\n\nOnly Printavo offers basic P&L per order. We show real-time margin: garment cost + ink cost + screen cost + labor vs. invoice total. Immediate visibility into which jobs make money.\n\n## 10. Key Decisions (Interview)\n\nCritical decisions made during user interview with 4Ink owner. These override research recommendations where they differ.\n\n| # | Decision | Answer | Rationale |\n|---|----------|--------|-----------|\n| 1 | Current invoicing state | QuickBooks (manual entry) | Eliminating double-entry is the core value prop |\n| 2 | Line item display | Configurable per invoice | Toggle between itemized and bundled views |\n| 3 | Deposit policy | Varies by customer | Smart defaults from tier + history |\n| 4 | Accounting software | QuickBooks (Online or Desktop TBD) | Need to confirm with Chris |\n| 5 | Quote-to-invoice conversion | Manual one-click | Allows production changes before invoicing |\n| 6 | Payment processor | **Square** (4Ink's existing) | Don't fix what isn't broken |\n| 7 | Customer-facing view | Separate vertical (customer portal) | All external views handled in portal vertical |\n| 8 | Progress billing | Deposit + final only | Single invoice, deposits as partial payments |\n| 9 | Deposit UX | Smart default with manual override | % or flat amount, driven by customer context |\n| 10 | Invoice numbering | Match QuickBooks scheme | Ensures clean sync when integrated |\n| 11 | Read receipts | Phase 2 (with customer portal) | Build status infrastructure now |\n| 12 | Change tracking | Lightweight diff log | Track quote-to-invoice divergence internally |\n| 13 | Payment reminders | Gentle cadence | 3 days before, on due, 3/7 days overdue |\n| 14 | Late fees | Yes, configurable per customer | Auto-calculate, separate line item |\n| 15 | Credit memos | Formal CM documents | Linked to original invoice, needed for QB sync |\n| 16 | Phase 1 scope | Full internal flow | Schema + list + detail + create + payments + customer tab |\n| 17 | Customer-furnished garments | Supported | Print/setup only, no garment charge |\n| 18 | Multi-state tax | Mostly IN, some KY | Tax rate per invoice (not hardcoded) |\n| 19 | AR aging | Stats bar on list page | Detailed report deferred to reporting vertical |\n\n### Key Design Decision: Single Invoice with Partial Payments\n\nResearch initially recommended two separate invoices (deposit + final) as the \"textbook\" approach. 4Ink owner pushed back — wanted linked tracking, not independent documents. **Final decision:** Single invoice for the full amount. Deposits recorded as partial payments. Balance due updates automatically.\n\n```\n Step                    Status          Balance Due\n ---------------------------------------------------------\n Invoice created         Draft           $1,000\n Invoice sent            Sent            $1,000\n Deposit received ($500) Partial         $500\n Production happens      Partial         $500\n Final payment ($500)    Paid            $0\n```\n\n### Key Design Decision: Smart Deposit Defaults\n\nDefault deposit amount driven by: **customer tier** (standard/preferred/contract/wholesale sets baseline %), **payment history** (revenue, on-time record adjusts recommendation), **contract terms** (fixed negotiated amounts for contract customers). UX: pre-filled \"Recommended Deposit\" with manual override supporting both percentage and flat dollar amount.\n\n### Key Correction: Square Over Stripe\n\nResearch recommended Stripe. **4Ink already uses Square.** Default to Square for payment processing integration (Phase 2+). Only consider Stripe if there's a compelling reason to switch.\n\n### Open Items for Future Resolution\n\n1. Confirm QuickBooks version — Online vs Desktop affects API approach (REST vs QBXML)\n2. Invoice template branding — Does 4Ink want custom logo/colors on invoices?\n3. Recurring invoices — Needed for contract customers with monthly orders? (Defer to Phase 2)\n4. Multi-currency — International customers? (Likely not relevant for IN/KY market)\n5. Commission tracking — Does 4Ink pay sales commissions? (Defer to reporting vertical)\n\n## 11. Research Source Documents\n\nAll agent research was captured in detailed markdown documents. These are the primary sources for this synthesis.\n\n| Document | Path | Contents |\n|----------|------|----------|\n| Industry Best Practices | `docs/spikes/invoicing-industry-practices.md` | 8-step quote-to-cash pipeline, line item categories & pricing, payment terms, rush fee tiers, spoilage standards, top 10 pain points |\n| Competitor Analysis | `docs/spikes/invoicing-competitor-analysis.md` | Deep dive on PrintLife, Printavo, shopVOX, DecoNetwork, InkSoft, GraphicsFlow. Feature matrix, pricing comparison, differentiation opportunities |\n| Integration Architecture | `docs/spikes/invoicing-integration-map.md` | Data flow diagrams, schema dependency map, field mapping (quote → invoice), integration with 5 existing + 4 future verticals, build order |\n| UX Patterns | `docs/spikes/invoicing-ux-patterns.md` | Route map, 3 key screen designs (list, detail, new), status badges, component reuse (7 existing + 6 new), user journeys, anti-patterns |\n| Legal & Compliance | `docs/spikes/invoicing-compliance.md` | State tax treatment (8 states), required invoice elements, data integrity, record retention, PCI DSS, ACH, QB integration entity mapping |\n| Decision Record | `docs/spikes/invoicing-decisions.md` | Full 19-decision record from user interview with detailed rationale for key decisions, open items for future resolution |\n\n---\n\n## Table-Stakes Checklist\n\nEvery feature listed below is required to be competitive. Missing any one creates a dealbreaker for some segment of users:\n\n1. One-click quote-to-invoice conversion with all data carrying over\n2. Custom line items with categories, descriptions, quantities, unit prices\n3. Setup fees and custom fees (rush, ink changes, screen reclaim)\n4. Tax calculation with override and tax-exempt support\n5. Deposits and partial payments (50% deposit is industry standard)\n6. PDF export with professional formatting\n7. Email delivery with embedded payment link\n8. QuickBooks Online integration\n9. At least one payment processor (Square for 4Ink)\n10. Customer-facing invoice view with online payment\n11. Payment status tracking (paid, partial, overdue)\n12. Basic sales reporting (revenue, outstanding, by customer)\n13. Invoice duplication for repeat orders\n14. Discounts (fixed amount and percentage)","src/content/sessions/2026-02-10-invoicing-vertical-research.md","b5a1ebad84549844",{"html":1077,"metadata":1078},"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Metric\u003C/th>\u003Cth>Value\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>5\u003C/td>\u003Ctd>Research Agents\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>6\u003C/td>\u003Ctd>Competitors Analyzed\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>80+\u003C/td>\u003Ctd>Sources Cited\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Col>\n\u003Cli>\u003Ca href=\"#executive-summary\">Executive Summary\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#industry\">Industry Best Practices\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#competitors\">Competitive Landscape\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#integration\">Integration Architecture\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#ux\">UX Recommendations\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#compliance\">Legal &#x26; Compliance\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#schemas\">Proposed Data Model\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#build-plan\">Build Sequence\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#differentiation\">Differentiation Strategy\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#decisions\">Key Decisions (Interview)\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#sources\">Research Source Documents\u003C/a>\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"1-executive-summary\">1. Executive Summary\u003C/h2>\n\u003Cp>\u003Cstrong>The invoicing vertical is the natural next step for Screen Print Pro.\u003C/strong> The existing quote schema already contains 90% of the data an invoice needs. The competitive landscape reveals fragmented solutions where every platform excels in 1-2 areas but has significant blind spots. Our opportunity: production-aware invoicing that feels as simple as Printavo on day one but grows with the shop.\u003C/p>\n\u003Ch3 id=\"key-findings-across-all-research-tracks\">Key Findings Across All Research Tracks\u003C/h3>\n\u003Cp>\u003Cstrong>Industry:\u003C/strong> Screen printing invoicing is well-established but poorly served. The quote-to-cash pipeline (Quote → Deposit → Production → Final Invoice) is standard. Shops charge for garments, print costs per color/location, screen setup, art, rush fees, and shipping. 50% deposit is the norm. The #1 pain point is chasing late payments — 87% of invoices are paid after the due date.\u003C/p>\n\u003Cp>\u003Cstrong>Competitive:\u003C/strong> PrintLife has strong supplier integration but no multi-user support. PrintLife leads on supplier catalog integration (S&#x26;S, SanMar, Alphabroder) and has a unique ink change-out guardrail. But it’s single-user only with no G2/Capterra presence. Printavo dominates small shops but users outgrow it. shopVOX has the deepest features but is overly complex. No one nails both simplicity and power.\u003C/p>\n\u003Cp>\u003Cstrong>Integration:\u003C/strong> Existing schemas are 90% ready for invoicing. The quote schema’s line items, customer payment terms, tax-exempt fields, and pricing tiers map directly to invoice fields. Only two new schema files needed: \u003Ccode>invoice.ts\u003C/code> and \u003Ccode>credit-memo.ts\u003C/code>. Five existing verticals (Quotes, Customers, Artwork, Screen Room, Production) connect to invoicing. Four future verticals (Jobs, Reporting, Shipping, Inventory) consume invoice data.\u003C/p>\n\u003Cp>\u003Cstrong>UX:\u003C/strong> Mirror the existing quote form pattern. The invoice creation UX should use the same collapsible section form + sticky summary bar as the Quote Form. Invoice list follows the Customers page pattern (stats bar + smart view tabs + data table). Component reuse is extensive: StatusBadge, ColumnHeaderMenu, CustomerCombobox, LineItemRow, PricingSummary, EmailPreviewModal.\u003C/p>\n\u003Cp>\u003Cstrong>Compliance:\u003C/strong> Screen printing is taxable as fabrication in virtually all states. The entire charge (materials + labor + setup + design) is taxable. The only common exemption is resale certificates. Invoices must be immutable once issued (void, never delete). 7-year data retention. QuickBooks Online is the primary accounting integration target. PCI compliance handled by using tokenized processors (Stripe/Square).\u003C/p>\n\u003Ch2 id=\"2-industry-best-practices\">2. Industry Best Practices\u003C/h2>\n\u003Ch3 id=\"the-8-step-quote-to-cash-pipeline\">The 8-Step Quote-to-Cash Pipeline\u003C/h3>\n\u003Cp>Every screen printing shop follows this fundamental workflow, with variations in deposit percentage and payment terms:\u003C/p>\n\u003Cpre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>Estimate/Quote  →  Customer Approval  →  Deposit (50%)  →  Work Order\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>     |                                                        |\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  Production  →  Quality Check  →  Invoice (balance)  →  Delivery + Payment\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"standard-invoice-line-item-categories\">Standard Invoice Line Item Categories\u003C/h3>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Category\u003C/th>\u003Cth>Description\u003C/th>\u003Cth>Typical Pricing\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>Garment Cost\u003C/td>\u003Ctd>Wholesale with 150-200% markup\u003C/td>\u003Ctd>$5 wholesale → $7.50-$10\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Print Cost\u003C/td>\u003Ctd>Per piece, per color, per location\u003C/td>\u003Ctd>$1.80-$5.00/piece\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Screen Setup\u003C/td>\u003Ctd>Per screen (per color per location)\u003C/td>\u003Ctd>$10-$30/screen\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Art/Design\u003C/td>\u003Ctd>Custom artwork or modifications\u003C/td>\u003Ctd>$25 (text) to $65/hr (custom)\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Color Change\u003C/td>\u003Ctd>Switching ink mid-run\u003C/td>\u003Ctd>$10-$15/change\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Rush Fee\u003C/td>\u003Ctd>Tiered by turnaround time\u003C/td>\u003Ctd>10-50% surcharge\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Shipping\u003C/td>\u003Ctd>Carrier charges + handling\u003C/td>\u003Ctd>Actual + $6/box handling\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Film Output\u003C/td>\u003Ctd>Cost of film positives\u003C/td>\u003Ctd>$12-$15 per spot color\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Pantone Match\u003C/td>\u003Ctd>Custom color mixing\u003C/td>\u003Ctd>$10-$15 per color\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Sample/Pre-prod\u003C/td>\u003Ctd>Test prints before full run\u003C/td>\u003Ctd>$150+ minimum\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch3 id=\"payment-terms-by-customer-type\">Payment Terms by Customer Type\u003C/h3>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Term\u003C/th>\u003Cth>Who Gets It\u003C/th>\u003Cth>Notes\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>100% Upfront\u003C/td>\u003Ctd>New/unknown customers\u003C/td>\u003Ctd>Full payment before production\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>50% Deposit + Balance\u003C/td>\u003Ctd>Standard for most jobs\u003C/td>\u003Ctd>Industry standard\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>COD\u003C/td>\u003Ctd>Walk-in customers\u003C/td>\u003Ctd>Payment at pickup\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Net 15\u003C/td>\u003Ctd>Established customers\u003C/td>\u003Ctd>Requires credit application\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Net 30\u003C/td>\u003Ctd>Large/corporate accounts\u003C/td>\u003Ctd>1.5%/month late fee standard\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Net 60\u003C/td>\u003Ctd>Rare, large contracts only\u003C/td>\u003Ctd>High risk for small shops\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch3 id=\"industry-spoilage-standards\">Industry Spoilage Standards\u003C/h3>\n\u003Cp>Spoilage affects invoicing through credit memos and adjustments:\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Standard:\u003C/strong> 2% acceptable spoilage rate\u003C/li>\n\u003Cli>\u003Cstrong>100+ pieces:\u003C/strong> Up to 3%\u003C/li>\n\u003Cli>\u003Cstrong>Under 100 pieces:\u003C/strong> Up to 10% (higher due to setup proportion)\u003C/li>\n\u003Cli>\u003Cstrong>Best-in-class target:\u003C/strong> Under 2%\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"top-10-invoicing-pain-points-ranked-by-frequency\">Top 10 Invoicing Pain Points (Ranked by Frequency)\u003C/h3>\n\u003Col>\n\u003Cli>\u003Cstrong>Chasing late payments\u003C/strong> — 87% of invoices paid late; over 50% of B2B invoices in US are past due\u003C/li>\n\u003Cli>\u003Cstrong>Cash flow gaps\u003C/strong> — fronting materials with Net 30 terms devastating for small shops\u003C/li>\n\u003Cli>\u003Cstrong>Quote-to-invoice disconnection\u003C/strong> — manual re-entry introduces errors\u003C/li>\n\u003Cli>\u003Cstrong>Accounting sync issues\u003C/strong> — one-directional sync, credit memos don’t export\u003C/li>\n\u003Cli>\u003Cstrong>Deposit tracking\u003C/strong> — which deposits collected, applied, what balance remains\u003C/li>\n\u003Cli>\u003Cstrong>Tax complexity\u003C/strong> — resale certificates, expirations, multi-state nexus\u003C/li>\n\u003Cli>\u003Cstrong>Change order management\u003C/strong> — mid-production changes hard to track on invoices\u003C/li>\n\u003Cli>\u003Cstrong>Overrun/underrun reconciliation\u003C/strong> — actual vs ordered quantities\u003C/li>\n\u003Cli>\u003Cstrong>Multiple payment methods\u003C/strong> — cash + check + Venmo + card = reconciliation nightmare\u003C/li>\n\u003Cli>\u003Cstrong>Professional appearance\u003C/strong> — generic templates undermine credibility\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"3-competitive-landscape\">3. Competitive Landscape\u003C/h2>\n\u003Ch3 id=\"feature-comparison-matrix\">Feature Comparison Matrix\u003C/h3>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Feature\u003C/th>\u003Cth>PrintLife\u003C/th>\u003Cth>Printavo\u003C/th>\u003Cth>shopVOX\u003C/th>\u003Cth>DecoNetwork\u003C/th>\u003Cth>InkSoft\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>Quote → Invoice\u003C/td>\u003Ctd>Yes\u003C/td>\u003Ctd>Yes\u003C/td>\u003Ctd>3-step\u003C/td>\u003Ctd>1-click\u003C/td>\u003Ctd>Yes\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Progress invoicing\u003C/td>\u003Ctd>No\u003C/td>\u003Ctd>Partial\u003C/td>\u003Ctd>Best\u003C/td>\u003Ctd>Yes\u003C/td>\u003Ctd>Partial\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Multi-invoice payment\u003C/td>\u003Ctd>No\u003C/td>\u003Ctd>Unique\u003C/td>\u003Ctd>No\u003C/td>\u003Ctd>No\u003C/td>\u003Ctd>No\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Invoice read receipts\u003C/td>\u003Ctd>No\u003C/td>\u003Ctd>No\u003C/td>\u003Ctd>Unique\u003C/td>\u003Ctd>No\u003C/td>\u003Ctd>No\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Stripe\u003C/td>\u003Ctd>Yes\u003C/td>\u003Ctd>Yes\u003C/td>\u003Ctd>Yes\u003C/td>\u003Ctd>DecoPay\u003C/td>\u003Ctd>Own\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>QuickBooks Online\u003C/td>\u003Ctd>Yes\u003C/td>\u003Ctd>2hr sync\u003C/td>\u003Ctd>Yes\u003C/td>\u003Ctd>Yes\u003C/td>\u003Ctd>No\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Xero / Sage\u003C/td>\u003Ctd>No\u003C/td>\u003Ctd>No\u003C/td>\u003Ctd>Both\u003C/td>\u003Ctd>Both\u003C/td>\u003Ctd>No\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>SMS invoicing\u003C/td>\u003Ctd>Twilio\u003C/td>\u003Ctd>Premium\u003C/td>\u003Ctd>No\u003C/td>\u003Ctd>No\u003C/td>\u003Ctd>No\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Customer portal\u003C/td>\u003Ctd>Strong\u003C/td>\u003Ctd>Yes\u003C/td>\u003Ctd>cPortal\u003C/td>\u003Ctd>Yes\u003C/td>\u003Ctd>Yes\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Multi-user / roles\u003C/td>\u003Ctd>No\u003C/td>\u003Ctd>Limited\u003C/td>\u003Ctd>Yes\u003C/td>\u003Ctd>Yes\u003C/td>\u003Ctd>Yes\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Supplier catalogs\u003C/td>\u003Ctd>Best\u003C/td>\u003Ctd>No\u003C/td>\u003Ctd>No\u003C/td>\u003Ctd>Yes\u003C/td>\u003Ctd>Yes\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>AR / Sales reports\u003C/td>\u003Ctd>Basic\u003C/td>\u003Ctd>Full\u003C/td>\u003Ctd>Best\u003C/td>\u003Ctd>Limited\u003C/td>\u003Ctd>Basic\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch3 id=\"pricing-comparison\">Pricing Comparison\u003C/h3>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Platform\u003C/th>\u003Cth>Entry\u003C/th>\u003Cth>Mid Tier\u003C/th>\u003Cth>Top Tier\u003C/th>\u003Cth>Model\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>PrintLife\u003C/td>\u003Ctd>Not public\u003C/td>\u003Ctd>Not public\u003C/td>\u003Ctd>Not public\u003C/td>\u003Ctd>Subscription\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Printavo\u003C/td>\u003Ctd>$49/mo\u003C/td>\u003Ctd>$149/mo\u003C/td>\u003Ctd>$199/mo + $99 Merch\u003C/td>\u003Ctd>Tiered flat\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>shopVOX\u003C/td>\u003Ctd>$99 + $19/user\u003C/td>\u003Ctd>$199 + $39/user\u003C/td>\u003Ctd>Custom\u003C/td>\u003Ctd>Base + per-user\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>DecoNetwork\u003C/td>\u003Ctd>$199/mo\u003C/td>\u003Ctd>Custom\u003C/td>\u003Ctd>Custom\u003C/td>\u003Ctd>Tiered + license\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>InkSoft\u003C/td>\u003Ctd>$314/mo\u003C/td>\u003Ctd>$419/mo\u003C/td>\u003Ctd>—\u003C/td>\u003Ctd>Flat rate\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch3 id=\"printlife-deep-assessment\">PrintLife Deep Assessment\u003C/h3>\n\u003Cp>\u003Cstrong>PrintLife Strengths (Match or Exceed):\u003C/strong>\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Supplier integration\u003C/strong> — S&#x26;S, SanMar, Alphabroder directly in project builder\u003C/li>\n\u003Cli>\u003Cstrong>Ink change-out guardrail\u003C/strong> — unique production safeguard, no competitor has this\u003C/li>\n\u003Cli>\u003Cstrong>Triple payment processor\u003C/strong> — only platform with Stripe + PayPal + Square\u003C/li>\n\u003Cli>\u003Cstrong>SMS via Twilio\u003C/strong> — quotes and invoices via text\u003C/li>\n\u003Cli>\u003Cstrong>Customer portal\u003C/strong> — self-ordering within shop-defined parameters\u003C/li>\n\u003C/ul>\n\u003Cp>\u003Cstrong>PrintLife Weaknesses (Our Opportunity):\u003C/strong>\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Single-user only\u003C/strong> — dealbreaker for growing shops; role-based permissions undelivered\u003C/li>\n\u003Cli>\u003Cstrong>No G2/Capterra presence\u003C/strong> — invisible to buyers researching options\u003C/li>\n\u003Cli>\u003Cstrong>Only QuickBooks Online\u003C/strong> — no Xero, Sage, QB Desktop\u003C/li>\n\u003Cli>\u003Cstrong>No progress invoicing\u003C/strong> — can’t invoice partial deliveries\u003C/li>\n\u003Cli>\u003Cstrong>Limited reporting\u003C/strong> — basic compared to Printavo/shopVOX\u003C/li>\n\u003Cli>\u003Cstrong>Small dev team\u003C/strong> — roadmap items slip; bug fixes take priority\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"4-integration-architecture\">4. Integration Architecture\u003C/h2>\n\u003Ch3 id=\"master-data-flow-quote-to-cash-lifecycle\">Master Data Flow: Quote-to-Cash Lifecycle\u003C/h3>\n\u003Cpre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan> QUOTE (Estimate)          JOB (Production)          INVOICE (Billing)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan> ┌──────────────┐   Accept  ┌──────────────┐  Convert  ┌──────────────┐\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan> │ Line items   │ ────────> │ Actual costs │ ────────> │ Locked prices│\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan> │ Pricing      │           │ tracked here │           │ Payments     │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan> │ Discounts    │           │              │           │ Balance due  │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan> └──────┬───────┘           └──────┬───────┘           └──────┬───────┘\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>        │                          │                          │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>        │ Price Matrix             │ Variance                 │ Revenue\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>        v                          v                          v\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>   ┌──────────┐             ┌──────────┐              ┌──────────────┐\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>   │ CUSTOMER │             │ COSTING  │              │  REPORTING   │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>   │ terms    │             │ actual   │              │  AR aging    │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>   │ tax info │             │ vs quote │              │  revenue     │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>   └──────────┘             └──────────┘              └──────────────┘\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"integration-with-existing-verticals\">Integration with Existing Verticals\u003C/h3>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Vertical\u003C/th>\u003Cth>Integration Point\u003C/th>\u003Cth>Data Flow\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>Quotes\u003C/td>\u003Ctd>Quote → Invoice conversion\u003C/td>\u003Ctd>Line items, pricing, discounts snapshot &#x26; lock. Only accepted quotes can generate invoices.\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Customers\u003C/td>\u003Ctd>Financial context\u003C/td>\u003Ctd>\u003Ccode>paymentTerms\u003C/code> → due date calc, \u003Ccode>taxExempt\u003C/code> → tax rate, \u003Ccode>billingAddress\u003C/code> → invoice address, \u003Ccode>pricingTier\u003C/code> → default discount\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Artwork\u003C/td>\u003Ctd>Billable charges\u003C/td>\u003Ctd>Art creation ($40 flat), revisions ($65/hr), complex custom (quoted). Referenced via \u003Ccode>artworkId\u003C/code>\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Screen Room\u003C/td>\u003Ctd>Setup fee itemization\u003C/td>\u003Ctd>Screen burn ($15-35/screen), reclaim ($5-10), color change ($5/screen). Linked via \u003Ccode>jobId\u003C/code>\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Production\u003C/td>\u003Ctd>Invoice triggers\u003C/td>\u003Ctd>”design” → deposit invoice, “shipped” → final invoice. Auto-flag shipped jobs with unpaid invoices\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch3 id=\"integration-with-future-verticals\">Integration with Future Verticals\u003C/h3>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Vertical\u003C/th>\u003Cth>Invoice Data Consumed\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>Jobs\u003C/td>\u003Ctd>Quoted vs actual vs billed comparison. Profitability per job. Margin analysis.\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Reporting\u003C/td>\u003Ctd>AR aging (0-30, 31-60, 61-90, 90+), payment velocity, customer lifetime value, revenue trends, discount impact\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Shipping\u003C/td>\u003Ctd>Shipping line items, delivery confirmation triggers final invoice, tracking numbers attached to invoices\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Inventory\u003C/td>\u003Ctd>Garment COGS flows to job costing. Size upcharges through to invoice. Spoilage absorbed in margin.\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch3 id=\"schema-dependencies\">Schema Dependencies\u003C/h3>\n\u003Cp>\u003Cstrong>Existing schemas that feed invoicing:\u003C/strong> \u003Ccode>customer.ts\u003C/code> (payment terms, tax-exempt, billing address, pricing tier), \u003Ccode>quote.ts\u003C/code> (line items, discounts, shipping, tax), \u003Ccode>job.ts\u003C/code> (production state triggers), \u003Ccode>artwork.ts\u003C/code> (billable art charges), \u003Ccode>screen.ts\u003C/code> (setup fees). \u003Cstrong>One existing schema needs update:\u003C/strong> \u003Ccode>note.ts\u003C/code> needs “invoice” added to \u003Ccode>noteEntityTypeEnum\u003C/code>.\u003C/p>\n\u003Ch2 id=\"5-ux-recommendations\">5. UX Recommendations\u003C/h2>\n\u003Ch3 id=\"information-architecture\">Information Architecture\u003C/h3>\n\u003Cp>Add “Invoices” to sidebar between Quotes and Customers, reflecting the natural workflow order:\u003C/p>\n\u003Cpre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>Dashboard    /\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>Jobs         /jobs\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>Quotes       /quotes\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>Invoices     /invoices       &#x3C;-- NEW\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>Customers    /customers\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>Screen Room  /screens\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>Garments     /garments\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"key-screens\">Key Screens\u003C/h3>\n\u003Cp>\u003Cstrong>Screen 1: Invoices List\u003C/strong> \u003Ccode>/invoices\u003C/code>\u003C/p>\n\u003Cp>\u003Cstrong>Pattern:\u003C/strong> Mirrors Customers page — Stats Bar + Smart View Tabs + Data Table\u003C/p>\n\u003Cp>\u003Cstrong>Stats bar (4 KPIs):\u003C/strong> Total Outstanding, Overdue Count &#x26; Amount, Paid This Month, Avg Days to Pay\u003C/p>\n\u003Cp>\u003Cstrong>Smart view tabs:\u003C/strong> All | Draft | Outstanding | Overdue | Paid\u003C/p>\n\u003Cp>\u003Cstrong>Table columns:\u003C/strong> Invoice #, Customer, Status, Amount, Due Date, Balance Due, Date Created\u003C/p>\n\u003Cp>\u003Cstrong>Batch operations:\u003C/strong> Send Selected, Mark as Paid, Send Reminder\u003C/p>\n\u003Cp>\u003Cstrong>Screen 2: Invoice Detail\u003C/strong> \u003Ccode>/invoices/[id]\u003C/code>\u003C/p>\n\u003Cp>\u003Cstrong>Pattern:\u003C/strong> Mirrors QuoteDetailView\u003C/p>\n\u003Cp>\u003Cstrong>Layout:\u003C/strong> Sticky header (invoice # + status + actions) → Customer info card → Source links (quote, job) → Line items table → Pricing summary → Payment ledger + “Record Payment” → Reminder timeline → Notes\u003C/p>\n\u003Cp>\u003Cstrong>Actions by status:\u003C/strong>\u003C/p>\n\u003Cul>\n\u003Cli>Draft: Edit, Send, Delete\u003C/li>\n\u003Cli>Sent/Open: Record Payment, Send Reminder, Void, Duplicate\u003C/li>\n\u003Cli>Overdue: Record Payment, Send Reminder (escalated), Void\u003C/li>\n\u003Cli>Paid: View Receipt, Duplicate\u003C/li>\n\u003C/ul>\n\u003Cp>\u003Cstrong>Screen 3: New Invoice\u003C/strong> \u003Ccode>/invoices/new\u003C/code>\u003C/p>\n\u003Cp>\u003Cstrong>Pattern:\u003C/strong> Mirrors QuoteForm with collapsible sections + sticky summary bar\u003C/p>\n\u003Cp>\u003Cstrong>Primary flow:\u003C/strong> “Create Invoice” from accepted quote auto-populates everything\u003C/p>\n\u003Cp>\u003Cstrong>Sections:\u003C/strong> Customer (auto-filled) → Line Items (from quote, editable) → Pricing (auto-calculated) → Payment Terms (from customer default) → Notes\u003C/p>\n\u003Cp>\u003Cstrong>Actions:\u003C/strong> Cancel | Save as Draft | Review &#x26; Send\u003C/p>\n\u003Ch3 id=\"status-badges\">Status Badges\u003C/h3>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Status\u003C/th>\u003Cth>Style\u003C/th>\u003Cth>Token\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>Draft\u003C/td>\u003Ctd>\u003Ccode>bg-muted text-muted-foreground\u003C/code>\u003C/td>\u003Ctd>Neutral, low emphasis\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Sent / Open\u003C/td>\u003Ctd>\u003Ccode>bg-action/10 text-action\u003C/code>\u003C/td>\u003Ctd>Niji blue — awaiting action\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Partially Paid\u003C/td>\u003Ctd>\u003Ccode>bg-warning/10 text-warning\u003C/code>\u003C/td>\u003Ctd>Gold — in progress\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Paid\u003C/td>\u003Ctd>\u003Ccode>bg-success/10 text-success\u003C/code>\u003C/td>\u003Ctd>Green — complete\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Overdue\u003C/td>\u003Ctd>\u003Ccode>bg-error/10 text-error\u003C/code>\u003C/td>\u003Ctd>Red — needs attention\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Void\u003C/td>\u003Ctd>\u003Ccode>bg-muted text-muted-foreground\u003C/code>\u003C/td>\u003Ctd>Struck through, dimmed\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch3 id=\"component-reuse-strategy\">Component Reuse Strategy\u003C/h3>\n\u003Cp>Extensive reuse from existing components minimizes build effort:\u003C/p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Existing Component\u003C/th>\u003Cth>Reuse For\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>\u003Ccode>StatusBadge\u003C/code>\u003C/td>\u003Ctd>Extend to support InvoiceStatus\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>ColumnHeaderMenu\u003C/code>\u003C/td>\u003Ctd>Invoice table column sorting/filtering\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>CustomerCombobox\u003C/code>\u003C/td>\u003Ctd>Customer selection on invoice form\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>CollapsibleSection\u003C/code>\u003C/td>\u003Ctd>Invoice form sections\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>LineItemRow\u003C/code>\u003C/td>\u003Ctd>Invoice line items (from quotes)\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>PricingSummary\u003C/code>\u003C/td>\u003Ctd>Invoice pricing section\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>EmailPreviewModal\u003C/code>\u003C/td>\u003Ctd>Invoice email preview\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch3 id=\"new-components-needed\">New Components Needed\u003C/h3>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Component\u003C/th>\u003Cth>Purpose\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>\u003Ccode>InvoiceStatsBar\u003C/code>\u003C/td>\u003Ctd>4 KPI cards for invoice list page\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>PaymentLedger\u003C/code>\u003C/td>\u003Ctd>Table of recorded payments on invoice detail\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>RecordPaymentSheet\u003C/code>\u003C/td>\u003Ctd>Slide-out form for recording payments\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>InvoiceActions\u003C/code>\u003C/td>\u003Ctd>Context-aware action buttons per status\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>PaymentReminderTimeline\u003C/code>\u003C/td>\u003Ctd>Visual timeline of sent/scheduled reminders\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>OverdueBadge\u003C/code>\u003C/td>\u003Ctd>Badge with days overdue + pulse animation\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"6-legal--compliance\">6. Legal &#x26; Compliance\u003C/h2>\n\u003Ch3 id=\"tax-treatment-screen-printing-is-fabrication\">Tax Treatment: Screen Printing Is Fabrication\u003C/h3>\n\u003Cp>\u003Cstrong>Critical:\u003C/strong> In virtually all major US states, screen printing is classified as \u003Cstrong>fabrication of tangible personal property\u003C/strong>. The \u003Cem>entire\u003C/em> charge (materials + labor + setup + design) is taxable. Separately stating labor does NOT make it exempt. The only common exemption is a valid resale certificate.\u003C/p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>State\u003C/th>\u003Cth>Tax Rate (State)\u003C/th>\u003Cth>Treatment\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>California\u003C/td>\u003Ctd>7.25% + local\u003C/td>\u003Ctd>Fabrication. Setup/rush fees included in taxable amount.\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Texas\u003C/td>\u003Ctd>6.25% + local (8.25% max)\u003C/td>\u003Ctd>Fabrication. Total sales price including all expenses.\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Florida\u003C/td>\u003Ctd>6% + local\u003C/td>\u003Ctd>Fully taxable. All charges even when separately stated.\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>New York\u003C/td>\u003Ctd>4% + local (8.875% NYC)\u003C/td>\u003Ctd>Fabrication under Section 1105(c)(2).\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Ohio\u003C/td>\u003Ctd>5.75% + local\u003C/td>\u003Ctd>Services to tangible personal property are taxable.\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>North Carolina\u003C/td>\u003Ctd>4.75% + local\u003C/td>\u003Ctd>Creative design charges included in taxable sales price.\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch3 id=\"required-invoice-elements-us\">Required Invoice Elements (US)\u003C/h3>\n\u003Cul>\n\u003Cli>Seller’s legal business name and DBA\u003C/li>\n\u003Cli>Seller’s business address\u003C/li>\n\u003Cli>Buyer’s name and address\u003C/li>\n\u003Cli>Unique sequential invoice number\u003C/li>\n\u003Cli>Invoice date and due date\u003C/li>\n\u003Cli>Itemized description with quantities and unit prices\u003C/li>\n\u003Cli>Sales tax separately stated\u003C/li>\n\u003Cli>Total amount due\u003C/li>\n\u003Cli>Tax ID (EIN/TIN) for 1099 reporting thresholds\u003C/li>\n\u003Cli>Payment terms and accepted methods\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"data-integrity-requirements\">Data Integrity Requirements\u003C/h3>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Requirement\u003C/th>\u003Cth>Implementation\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>Invoice immutability\u003C/td>\u003Ctd>Never modify issued invoices. Use credit memos + new invoices for corrections.\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Sequential numbering\u003C/td>\u003Ctd>Auto-increment, never skip or reuse voided numbers\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Audit trail\u003C/td>\u003Ctd>Log every action: who, what, when, before/after values. Append-only.\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Data retention\u003C/td>\u003Ctd>7 years minimum (covers bad debt deductions, underreporting)\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Never hard-delete\u003C/td>\u003Ctd>Void invoices, never delete. Keep all financial records.\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>PCI compliance\u003C/td>\u003Ctd>Never store card numbers. Use tokenized processors (Stripe/Square).\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch3 id=\"accounting-integration-quickbooks-online\">Accounting Integration: QuickBooks Online\u003C/h3>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Entity\u003C/th>\u003Cth>Direction\u003C/th>\u003Cth>Notes\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>Customers\u003C/td>\u003Ctd>Bidirectional\u003C/td>\u003Ctd>Name, email, address, tax-exempt\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Invoices\u003C/td>\u003Ctd>App → QBO\u003C/td>\u003Ctd>Line items, tax, totals, due dates\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Payments\u003C/td>\u003Ctd>App → QBO\u003C/td>\u003Ctd>Method, amount, applied to invoice\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Tax Rates\u003C/td>\u003Ctd>QBO → App\u003C/td>\u003Ctd>Pull configured rates\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Credit Memos\u003C/td>\u003Ctd>App → QBO\u003C/td>\u003Ctd>For refunds and adjustments\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Cp>\u003Cstrong>Top integration pitfalls:\u003C/strong> Duplicate entries (biggest risk), 2-hour sync delays (Printavo), tax rounding differences, orphan records from deleted-not-voided invoices, OAuth token expiration. Use idempotency keys and always void (never delete).\u003C/p>\n\u003Ch2 id=\"7-proposed-data-model\">7. Proposed Data Model\u003C/h2>\n\u003Ch3 id=\"invoice-status-state-machine\">Invoice Status State Machine\u003C/h3>\n\u003Cpre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan> draft --> sent --> viewed --> paid\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>                --> partial --> paid\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan> draft --> cancelled\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan> (any except paid) --> void\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan> (overdue is computed, not stored — past dueDate + unpaid)\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"core-enums\">Core Enums\u003C/h3>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Enum\u003C/th>\u003Cth>Values\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>\u003Ccode>invoiceStatusEnum\u003C/code>\u003C/td>\u003Ctd>draft, sent, viewed, partial, paid, void, cancelled\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>billingTypeEnum\u003C/code>\u003C/td>\u003Ctd>full, deposit, progress, final\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>paymentMethodEnum\u003C/code>\u003C/td>\u003Ctd>cash, check, credit-card, debit-card, ach, venmo, zelle, paypal, other\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>invoiceLineItemTypeEnum\u003C/code>\u003C/td>\u003Ctd>garment, decoration, setup, artwork, shipping, rush, discount, tax, adjustment, other\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>creditMemoReasonEnum\u003C/code>\u003C/td>\u003Ctd>overpayment, return, defect, pricing-error, void-partial-paid, goodwill, other\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch3 id=\"invoice-schema-key-fields\">Invoice Schema (Key Fields)\u003C/h3>\n\u003Cpre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>invoiceSchema = z.object({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  id: z.string().uuid(),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  invoiceNumber: z.string(),        // INV-1001\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  customerId: z.string().uuid(),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  quoteId: z.string().uuid().optional(),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  jobId: z.string().uuid().optional(),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  billingType: billingTypeEnum,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  // Addresses (snapshot at creation)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  billingAddress: addressSchema.optional(),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  shippingAddress: addressSchema.optional(),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  // Line items\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  lineItems: z.array(invoiceLineItemSchema),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  // Financial summary\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  subtotal, discounts, taxRate, taxAmount,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  shipping, total, amountPaid, amountDue,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  payments: z.array(paymentSchema),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  // Dates\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  invoiceDate, dueDate, paidDate?,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  // Price locking\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  pricingSnapshot: { quoteTotal, lockedAt },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  // Status + lifecycle\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  status: invoiceStatusEnum,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  sentAt?, viewedAt?, voidedAt?, voidReason?,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  // Notes\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  internalNotes?, customerNotes?,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  termsAndConditions?,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>})\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"new-files-needed\">New Files Needed\u003C/h3>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>File\u003C/th>\u003Cth>Purpose\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>\u003Ccode>lib/schemas/invoice.ts\u003C/code>\u003C/td>\u003Ctd>Invoice schema + line item, payment, discount sub-schemas + all enums\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>lib/schemas/credit-memo.ts\u003C/code>\u003C/td>\u003Ctd>Credit memo schema for adjustments and voids\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Update \u003Ccode>lib/constants.ts\u003C/code>\u003C/td>\u003Ctd>Add status labels, colors, billing type labels, payment method labels\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Update \u003Ccode>lib/schemas/note.ts\u003C/code>\u003C/td>\u003Ctd>Add “invoice” to \u003Ccode>noteEntityTypeEnum\u003C/code>\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"8-build-sequence\">8. Build Sequence\u003C/h2>\n\u003Ch3 id=\"phase-1a-schema--data-layer\">Phase 1a: Schema &#x26; Data Layer\u003C/h3>\n\u003Col>\n\u003Cli>Define \u003Ccode>invoice.ts\u003C/code> schema (Zod)\u003C/li>\n\u003Cli>Define \u003Ccode>credit-memo.ts\u003C/code> schema\u003C/li>\n\u003Cli>Update \u003Ccode>note.ts\u003C/code> to include “invoice” entity type\u003C/li>\n\u003Cli>Add invoice constants to \u003Ccode>constants.ts\u003C/code>\u003C/li>\n\u003Cli>Create mock invoice data in \u003Ccode>mock-data.ts\u003C/code>\u003C/li>\n\u003Cli>Write schema tests (Vitest)\u003C/li>\n\u003Cli>Add reverse lookup helpers\u003C/li>\n\u003C/ol>\n\u003Ch3 id=\"phase-1b-invoice-list--detail-read-only-views\">Phase 1b: Invoice List &#x26; Detail (Read-Only Views)\u003C/h3>\n\u003Col start=\"8\">\n\u003Cli>Invoice List page (\u003Ccode>/invoices\u003C/code>) with DataTable, stats bar, smart view tabs\u003C/li>\n\u003Cli>Invoice Detail page (\u003Ccode>/invoices/[id]\u003C/code>) with header, line items, pricing summary, payment history\u003C/li>\n\u003Cli>Add sidebar navigation link\u003C/li>\n\u003C/ol>\n\u003Ch3 id=\"phase-1c-quote-to-invoice-conversion\">Phase 1c: Quote-to-Invoice Conversion\u003C/h3>\n\u003Col start=\"11\">\n\u003Cli>“Create Invoice” button on Quote Detail (accepted quotes only)\u003C/li>\n\u003Cli>CreateInvoiceModal: billing type, deposit %, line item review, tax/shipping adjustment, preview\u003C/li>\n\u003Cli>Invoice creation logic (client-side mock data mutation)\u003C/li>\n\u003C/ol>\n\u003Ch3 id=\"phase-1d-payment-recording\">Phase 1d: Payment Recording\u003C/h3>\n\u003Col start=\"14\">\n\u003Cli>RecordPaymentSheet: amount (pre-filled), method, reference, date, notes\u003C/li>\n\u003Cli>Payment list on invoice detail\u003C/li>\n\u003Cli>Auto-status update: partial → paid when fully paid\u003C/li>\n\u003C/ol>\n\u003Ch3 id=\"phase-1e-customer-integration\">Phase 1e: Customer Integration\u003C/h3>\n\u003Col start=\"17\">\n\u003Cli>Add “Invoices” tab to Customer Detail page\u003C/li>\n\u003Cli>Customer financial summary: total billed, total paid, outstanding balance\u003C/li>\n\u003Cli>Payment history on customer page\u003C/li>\n\u003C/ol>\n\u003Ch3 id=\"phase-2-automation--polish\">Phase 2: Automation &#x26; Polish\u003C/h3>\n\u003Col start=\"20\">\n\u003Cli>Dashboard integration (overdue invoices, AR summary)\u003C/li>\n\u003Cli>Invoice email preview\u003C/li>\n\u003Cli>Void/cancel workflow with credit memo generation\u003C/li>\n\u003Cli>Progress billing workflow (deposit → progress → final)\u003C/li>\n\u003Cli>Invoice duplication\u003C/li>\n\u003Cli>PDF preview/download\u003C/li>\n\u003C/ol>\n\u003Ch3 id=\"phase-3-backend--integrations\">Phase 3: Backend &#x26; Integrations\u003C/h3>\n\u003Col start=\"26\">\n\u003Cli>Database persistence\u003C/li>\n\u003Cli>Email delivery\u003C/li>\n\u003Cli>QuickBooks Online integration (OAuth 2.0)\u003C/li>\n\u003Cli>Payment gateway (Square)\u003C/li>\n\u003Cli>Automated recurring invoices\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"9-differentiation-strategy\">9. Differentiation Strategy\u003C/h2>\n\u003Cp>Gaps no competitor fills well, or features we can execute better:\u003C/p>\n\u003Ch3 id=\"1-real-time-quickbooks-sync\">1. Real-Time QuickBooks Sync\u003C/h3>\n\u003Cp>Printavo syncs every 2 hours. shopVOX requires manual config. Real-time, bidirectional sync is a headline differentiator that eliminates the #4 industry pain point.\u003C/p>\n\u003Ch3 id=\"2-invoice-read-receipts--smart-follow-up\">2. Invoice Read Receipts + Smart Follow-Up\u003C/h3>\n\u003Cp>Only shopVOX Pro has read receipts ($199+/user). We build it as core: know when customers open invoices, auto-trigger follow-up if they view but don’t pay within X days. Multi-channel (SMS + email).\u003C/p>\n\u003Ch3 id=\"3-production-aware-line-items\">3. Production-Aware Line Items\u003C/h3>\n\u003Cp>No competitor auto-populates invoice line items from the production workflow. If a job has 3 print locations with 4 colors each, plus garment data, the invoice auto-generates with all items pre-filled. Zero re-entry from quote to invoice.\u003C/p>\n\u003Ch3 id=\"4-first-class-deposit-workflow\">4. First-Class Deposit Workflow\u003C/h3>\n\u003Cp>Configurable deposit % per customer or job type, automatic balance calculation, deposit receipt to customer, remaining balance prominently displayed on final invoice. Most competitors treat deposits as an afterthought.\u003C/p>\n\u003Ch3 id=\"5-batch-operations-for-high-volume-shops\">5. Batch Operations for High-Volume Shops\u003C/h3>\n\u003Cp>Generate invoices for all completed jobs this week, batch send, batch mark as paid. For shops processing 50+ jobs/week, this is transformative. Only Printavo has multi-invoice payment (no one has batch operations).\u003C/p>\n\u003Ch3 id=\"6-progressive-disclosure\">6. Progressive Disclosure\u003C/h3>\n\u003Cp>shopVOX and DecoNetwork criticized for overwhelming complexity. We nail progressive disclosure: simple invoice creation under 5 minutes on day one, with advanced features (progress invoicing, PO numbers, custom fields) revealed as the shop grows.\u003C/p>\n\u003Ch3 id=\"7-job-profitability-dashboard\">7. Job Profitability Dashboard\u003C/h3>\n\u003Cp>Only Printavo offers basic P&#x26;L per order. We show real-time margin: garment cost + ink cost + screen cost + labor vs. invoice total. Immediate visibility into which jobs make money.\u003C/p>\n\u003Ch2 id=\"10-key-decisions-interview\">10. Key Decisions (Interview)\u003C/h2>\n\u003Cp>Critical decisions made during user interview with 4Ink owner. These override research recommendations where they differ.\u003C/p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>#\u003C/th>\u003Cth>Decision\u003C/th>\u003Cth>Answer\u003C/th>\u003Cth>Rationale\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>1\u003C/td>\u003Ctd>Current invoicing state\u003C/td>\u003Ctd>QuickBooks (manual entry)\u003C/td>\u003Ctd>Eliminating double-entry is the core value prop\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>2\u003C/td>\u003Ctd>Line item display\u003C/td>\u003Ctd>Configurable per invoice\u003C/td>\u003Ctd>Toggle between itemized and bundled views\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>3\u003C/td>\u003Ctd>Deposit policy\u003C/td>\u003Ctd>Varies by customer\u003C/td>\u003Ctd>Smart defaults from tier + history\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>4\u003C/td>\u003Ctd>Accounting software\u003C/td>\u003Ctd>QuickBooks (Online or Desktop TBD)\u003C/td>\u003Ctd>Need to confirm with Chris\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>5\u003C/td>\u003Ctd>Quote-to-invoice conversion\u003C/td>\u003Ctd>Manual one-click\u003C/td>\u003Ctd>Allows production changes before invoicing\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>6\u003C/td>\u003Ctd>Payment processor\u003C/td>\u003Ctd>\u003Cstrong>Square\u003C/strong> (4Ink’s existing)\u003C/td>\u003Ctd>Don’t fix what isn’t broken\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>7\u003C/td>\u003Ctd>Customer-facing view\u003C/td>\u003Ctd>Separate vertical (customer portal)\u003C/td>\u003Ctd>All external views handled in portal vertical\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>8\u003C/td>\u003Ctd>Progress billing\u003C/td>\u003Ctd>Deposit + final only\u003C/td>\u003Ctd>Single invoice, deposits as partial payments\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>9\u003C/td>\u003Ctd>Deposit UX\u003C/td>\u003Ctd>Smart default with manual override\u003C/td>\u003Ctd>% or flat amount, driven by customer context\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>10\u003C/td>\u003Ctd>Invoice numbering\u003C/td>\u003Ctd>Match QuickBooks scheme\u003C/td>\u003Ctd>Ensures clean sync when integrated\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>11\u003C/td>\u003Ctd>Read receipts\u003C/td>\u003Ctd>Phase 2 (with customer portal)\u003C/td>\u003Ctd>Build status infrastructure now\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>12\u003C/td>\u003Ctd>Change tracking\u003C/td>\u003Ctd>Lightweight diff log\u003C/td>\u003Ctd>Track quote-to-invoice divergence internally\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>13\u003C/td>\u003Ctd>Payment reminders\u003C/td>\u003Ctd>Gentle cadence\u003C/td>\u003Ctd>3 days before, on due, 3/7 days overdue\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>14\u003C/td>\u003Ctd>Late fees\u003C/td>\u003Ctd>Yes, configurable per customer\u003C/td>\u003Ctd>Auto-calculate, separate line item\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>15\u003C/td>\u003Ctd>Credit memos\u003C/td>\u003Ctd>Formal CM documents\u003C/td>\u003Ctd>Linked to original invoice, needed for QB sync\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>16\u003C/td>\u003Ctd>Phase 1 scope\u003C/td>\u003Ctd>Full internal flow\u003C/td>\u003Ctd>Schema + list + detail + create + payments + customer tab\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>17\u003C/td>\u003Ctd>Customer-furnished garments\u003C/td>\u003Ctd>Supported\u003C/td>\u003Ctd>Print/setup only, no garment charge\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>18\u003C/td>\u003Ctd>Multi-state tax\u003C/td>\u003Ctd>Mostly IN, some KY\u003C/td>\u003Ctd>Tax rate per invoice (not hardcoded)\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>19\u003C/td>\u003Ctd>AR aging\u003C/td>\u003Ctd>Stats bar on list page\u003C/td>\u003Ctd>Detailed report deferred to reporting vertical\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch3 id=\"key-design-decision-single-invoice-with-partial-payments\">Key Design Decision: Single Invoice with Partial Payments\u003C/h3>\n\u003Cp>Research initially recommended two separate invoices (deposit + final) as the “textbook” approach. 4Ink owner pushed back — wanted linked tracking, not independent documents. \u003Cstrong>Final decision:\u003C/strong> Single invoice for the full amount. Deposits recorded as partial payments. Balance due updates automatically.\u003C/p>\n\u003Cpre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan> Step                    Status          Balance Due\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan> ---------------------------------------------------------\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan> Invoice created         Draft           $1,000\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan> Invoice sent            Sent            $1,000\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan> Deposit received ($500) Partial         $500\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan> Production happens      Partial         $500\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan> Final payment ($500)    Paid            $0\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"key-design-decision-smart-deposit-defaults\">Key Design Decision: Smart Deposit Defaults\u003C/h3>\n\u003Cp>Default deposit amount driven by: \u003Cstrong>customer tier\u003C/strong> (standard/preferred/contract/wholesale sets baseline %), \u003Cstrong>payment history\u003C/strong> (revenue, on-time record adjusts recommendation), \u003Cstrong>contract terms\u003C/strong> (fixed negotiated amounts for contract customers). UX: pre-filled “Recommended Deposit” with manual override supporting both percentage and flat dollar amount.\u003C/p>\n\u003Ch3 id=\"key-correction-square-over-stripe\">Key Correction: Square Over Stripe\u003C/h3>\n\u003Cp>Research recommended Stripe. \u003Cstrong>4Ink already uses Square.\u003C/strong> Default to Square for payment processing integration (Phase 2+). Only consider Stripe if there’s a compelling reason to switch.\u003C/p>\n\u003Ch3 id=\"open-items-for-future-resolution\">Open Items for Future Resolution\u003C/h3>\n\u003Col>\n\u003Cli>Confirm QuickBooks version — Online vs Desktop affects API approach (REST vs QBXML)\u003C/li>\n\u003Cli>Invoice template branding — Does 4Ink want custom logo/colors on invoices?\u003C/li>\n\u003Cli>Recurring invoices — Needed for contract customers with monthly orders? (Defer to Phase 2)\u003C/li>\n\u003Cli>Multi-currency — International customers? (Likely not relevant for IN/KY market)\u003C/li>\n\u003Cli>Commission tracking — Does 4Ink pay sales commissions? (Defer to reporting vertical)\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"11-research-source-documents\">11. Research Source Documents\u003C/h2>\n\u003Cp>All agent research was captured in detailed markdown documents. These are the primary sources for this synthesis.\u003C/p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Document\u003C/th>\u003Cth>Path\u003C/th>\u003Cth>Contents\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>Industry Best Practices\u003C/td>\u003Ctd>\u003Ccode>docs/spikes/invoicing-industry-practices.md\u003C/code>\u003C/td>\u003Ctd>8-step quote-to-cash pipeline, line item categories &#x26; pricing, payment terms, rush fee tiers, spoilage standards, top 10 pain points\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Competitor Analysis\u003C/td>\u003Ctd>\u003Ccode>docs/spikes/invoicing-competitor-analysis.md\u003C/code>\u003C/td>\u003Ctd>Deep dive on PrintLife, Printavo, shopVOX, DecoNetwork, InkSoft, GraphicsFlow. Feature matrix, pricing comparison, differentiation opportunities\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Integration Architecture\u003C/td>\u003Ctd>\u003Ccode>docs/spikes/invoicing-integration-map.md\u003C/code>\u003C/td>\u003Ctd>Data flow diagrams, schema dependency map, field mapping (quote → invoice), integration with 5 existing + 4 future verticals, build order\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>UX Patterns\u003C/td>\u003Ctd>\u003Ccode>docs/spikes/invoicing-ux-patterns.md\u003C/code>\u003C/td>\u003Ctd>Route map, 3 key screen designs (list, detail, new), status badges, component reuse (7 existing + 6 new), user journeys, anti-patterns\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Legal &#x26; Compliance\u003C/td>\u003Ctd>\u003Ccode>docs/spikes/invoicing-compliance.md\u003C/code>\u003C/td>\u003Ctd>State tax treatment (8 states), required invoice elements, data integrity, record retention, PCI DSS, ACH, QB integration entity mapping\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Decision Record\u003C/td>\u003Ctd>\u003Ccode>docs/spikes/invoicing-decisions.md\u003C/code>\u003C/td>\u003Ctd>Full 19-decision record from user interview with detailed rationale for key decisions, open items for future resolution\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Chr>\n\u003Ch2 id=\"table-stakes-checklist\">Table-Stakes Checklist\u003C/h2>\n\u003Cp>Every feature listed below is required to be competitive. Missing any one creates a dealbreaker for some segment of users:\u003C/p>\n\u003Col>\n\u003Cli>One-click quote-to-invoice conversion with all data carrying over\u003C/li>\n\u003Cli>Custom line items with categories, descriptions, quantities, unit prices\u003C/li>\n\u003Cli>Setup fees and custom fees (rush, ink changes, screen reclaim)\u003C/li>\n\u003Cli>Tax calculation with override and tax-exempt support\u003C/li>\n\u003Cli>Deposits and partial payments (50% deposit is industry standard)\u003C/li>\n\u003Cli>PDF export with professional formatting\u003C/li>\n\u003Cli>Email delivery with embedded payment link\u003C/li>\n\u003Cli>QuickBooks Online integration\u003C/li>\n\u003Cli>At least one payment processor (Square for 4Ink)\u003C/li>\n\u003Cli>Customer-facing invoice view with online payment\u003C/li>\n\u003Cli>Payment status tracking (paid, partial, overdue)\u003C/li>\n\u003Cli>Basic sales reporting (revenue, outstanding, by customer)\u003C/li>\n\u003Cli>Invoice duplication for repeat orders\u003C/li>\n\u003Cli>Discounts (fixed amount and percentage)\u003C/li>\n\u003C/ol>",{"headings":1079,"localImagePaths":1248,"remoteImagePaths":1249,"frontmatter":1250,"imagePaths":1254},[1080,1083,1086,1089,1092,1095,1098,1101,1104,1107,1110,1113,1116,1119,1122,1125,1128,1131,1134,1137,1140,1143,1146,1149,1152,1155,1158,1161,1164,1167,1170,1173,1176,1179,1182,1185,1188,1191,1194,1197,1200,1203,1206,1209,1212,1215,1218,1221,1224,1227,1230,1233,1236,1239,1242,1245],{"depth":34,"slug":1081,"text":1082},"1-executive-summary","1. Executive Summary",{"depth":40,"slug":1084,"text":1085},"key-findings-across-all-research-tracks","Key Findings Across All Research Tracks",{"depth":34,"slug":1087,"text":1088},"2-industry-best-practices","2. Industry Best Practices",{"depth":40,"slug":1090,"text":1091},"the-8-step-quote-to-cash-pipeline","The 8-Step Quote-to-Cash Pipeline",{"depth":40,"slug":1093,"text":1094},"standard-invoice-line-item-categories","Standard Invoice Line Item Categories",{"depth":40,"slug":1096,"text":1097},"payment-terms-by-customer-type","Payment Terms by Customer Type",{"depth":40,"slug":1099,"text":1100},"industry-spoilage-standards","Industry Spoilage Standards",{"depth":40,"slug":1102,"text":1103},"top-10-invoicing-pain-points-ranked-by-frequency","Top 10 Invoicing Pain Points (Ranked by Frequency)",{"depth":34,"slug":1105,"text":1106},"3-competitive-landscape","3. Competitive Landscape",{"depth":40,"slug":1108,"text":1109},"feature-comparison-matrix","Feature Comparison Matrix",{"depth":40,"slug":1111,"text":1112},"pricing-comparison","Pricing Comparison",{"depth":40,"slug":1114,"text":1115},"printlife-deep-assessment","PrintLife Deep Assessment",{"depth":34,"slug":1117,"text":1118},"4-integration-architecture","4. Integration Architecture",{"depth":40,"slug":1120,"text":1121},"master-data-flow-quote-to-cash-lifecycle","Master Data Flow: Quote-to-Cash Lifecycle",{"depth":40,"slug":1123,"text":1124},"integration-with-existing-verticals","Integration with Existing Verticals",{"depth":40,"slug":1126,"text":1127},"integration-with-future-verticals","Integration with Future Verticals",{"depth":40,"slug":1129,"text":1130},"schema-dependencies","Schema Dependencies",{"depth":34,"slug":1132,"text":1133},"5-ux-recommendations","5. UX Recommendations",{"depth":40,"slug":1135,"text":1136},"information-architecture","Information Architecture",{"depth":40,"slug":1138,"text":1139},"key-screens","Key Screens",{"depth":40,"slug":1141,"text":1142},"status-badges","Status Badges",{"depth":40,"slug":1144,"text":1145},"component-reuse-strategy","Component Reuse Strategy",{"depth":40,"slug":1147,"text":1148},"new-components-needed","New Components Needed",{"depth":34,"slug":1150,"text":1151},"6-legal--compliance","6. Legal & Compliance",{"depth":40,"slug":1153,"text":1154},"tax-treatment-screen-printing-is-fabrication","Tax Treatment: Screen Printing Is Fabrication",{"depth":40,"slug":1156,"text":1157},"required-invoice-elements-us","Required Invoice Elements (US)",{"depth":40,"slug":1159,"text":1160},"data-integrity-requirements","Data Integrity Requirements",{"depth":40,"slug":1162,"text":1163},"accounting-integration-quickbooks-online","Accounting Integration: QuickBooks Online",{"depth":34,"slug":1165,"text":1166},"7-proposed-data-model","7. Proposed Data Model",{"depth":40,"slug":1168,"text":1169},"invoice-status-state-machine","Invoice Status State Machine",{"depth":40,"slug":1171,"text":1172},"core-enums","Core Enums",{"depth":40,"slug":1174,"text":1175},"invoice-schema-key-fields","Invoice Schema (Key Fields)",{"depth":40,"slug":1177,"text":1178},"new-files-needed","New Files Needed",{"depth":34,"slug":1180,"text":1181},"8-build-sequence","8. Build Sequence",{"depth":40,"slug":1183,"text":1184},"phase-1a-schema--data-layer","Phase 1a: Schema & Data Layer",{"depth":40,"slug":1186,"text":1187},"phase-1b-invoice-list--detail-read-only-views","Phase 1b: Invoice List & Detail (Read-Only Views)",{"depth":40,"slug":1189,"text":1190},"phase-1c-quote-to-invoice-conversion","Phase 1c: Quote-to-Invoice Conversion",{"depth":40,"slug":1192,"text":1193},"phase-1d-payment-recording","Phase 1d: Payment Recording",{"depth":40,"slug":1195,"text":1196},"phase-1e-customer-integration","Phase 1e: Customer Integration",{"depth":40,"slug":1198,"text":1199},"phase-2-automation--polish","Phase 2: Automation & Polish",{"depth":40,"slug":1201,"text":1202},"phase-3-backend--integrations","Phase 3: Backend & Integrations",{"depth":34,"slug":1204,"text":1205},"9-differentiation-strategy","9. Differentiation Strategy",{"depth":40,"slug":1207,"text":1208},"1-real-time-quickbooks-sync","1. Real-Time QuickBooks Sync",{"depth":40,"slug":1210,"text":1211},"2-invoice-read-receipts--smart-follow-up","2. Invoice Read Receipts + Smart Follow-Up",{"depth":40,"slug":1213,"text":1214},"3-production-aware-line-items","3. Production-Aware Line Items",{"depth":40,"slug":1216,"text":1217},"4-first-class-deposit-workflow","4. First-Class Deposit Workflow",{"depth":40,"slug":1219,"text":1220},"5-batch-operations-for-high-volume-shops","5. Batch Operations for High-Volume Shops",{"depth":40,"slug":1222,"text":1223},"6-progressive-disclosure","6. Progressive Disclosure",{"depth":40,"slug":1225,"text":1226},"7-job-profitability-dashboard","7. Job Profitability Dashboard",{"depth":34,"slug":1228,"text":1229},"10-key-decisions-interview","10. Key Decisions (Interview)",{"depth":40,"slug":1231,"text":1232},"key-design-decision-single-invoice-with-partial-payments","Key Design Decision: Single Invoice with Partial Payments",{"depth":40,"slug":1234,"text":1235},"key-design-decision-smart-deposit-defaults","Key Design Decision: Smart Deposit Defaults",{"depth":40,"slug":1237,"text":1238},"key-correction-square-over-stripe","Key Correction: Square Over Stripe",{"depth":40,"slug":1240,"text":1241},"open-items-for-future-resolution","Open Items for Future Resolution",{"depth":34,"slug":1243,"text":1244},"11-research-source-documents","11. Research Source Documents",{"depth":34,"slug":1246,"text":1247},"table-stakes-checklist","Table-Stakes Checklist",[],[],{"title":1066,"subtitle":1067,"date":1251,"phase":17,"vertical":864,"verticalSecondary":1252,"stage":20,"tags":1253,"sessionId":1071,"branch":1072,"status":25},["Date","2026-02-10T00:00:00.000Z"],[],[20,189],[],"2026-02-11-invoicing-breadboard",{"id":1255,"data":1257,"body":1265,"filePath":1266,"digest":1267,"rendered":1268},{"title":1258,"subtitle":1259,"date":1260,"phase":17,"vertical":864,"verticalSecondary":1261,"stage":187,"tags":1262,"sessionId":1263,"branch":1264,"status":25},"Invoicing Breadboard","UI affordances, code affordances, wiring, and component boundaries for the invoicing vertical — the buildable blueprint before code.",["Date","2026-02-11T00:00:00.000Z"],[],[189,20],"ba5ae290-306e-47a6-b09b-c2c10320dad0","session/0211-invoicing-breadboard","## Source Document\n\n[docs/breadboards/invoicing-breadboard.md](https://github.com/cmbays/print-4ink/blob/session/0211-invoicing-breadboard/docs/breadboards/invoicing-breadboard.md) →\n\n## At a Glance\n\n| Stat | Value |\n|------|-------|\n| Places | 9 |\n| UI Affordances | 99 |\n| Code Affordances | 44 |\n| Data Stores | 25 |\n| Components | 18 |\n| Build Steps | 13 |\n\n## Places (Screens & Modals)\n\n| ID | Name | Type | Route |\n|----|------|------|-------|\n| P1 | Invoices List | Page | /invoices |\n| P2 | Invoice Detail | Page | /invoices/[id] |\n| P2.1 | Record Payment | Sheet | — |\n| P2.2 | Send Reminder | Modal | — |\n| P2.3 | Void Invoice | Dialog | — |\n| P2.4 | Credit Memo | Modal | — |\n| P3 | New Invoice Form | Page | /invoices/new |\n| P3.1 | Review & Send | Sheet | — |\n| P4 | Edit Invoice | Page (Draft only) | /invoices/[id]/edit |\n\n## Key Design Decisions\n\n### Single Invoice + Partial Payments\n\nOne invoice for the full amount. Deposits recorded as partial payments. Balance due updates automatically. Simpler than two-invoice approach.\n\n### Smart Deposit Defaults\n\nDeposit amount pre-calculated from customer tier (standard=50%, contract=per agreement). Manual override with % or flat $ toggle.\n\n### Quote-to-Invoice Conversion\n\nOne-click from accepted quote. Prices locked from quote (never recalculated). Change tracking shows what diverged. Tax recalculated from customer exempt status.\n\n### Configurable Itemization\n\nToggle between itemized view (every component as separate line) and bundled view (one line per garment style) per invoice.\n\n### Status Lifecycle\n\n`draft → sent → partial → paid` with computed `overdue` (past due + unpaid). Void from any non-paid state. Credit memos for paid invoices.\n\n## Component Reuse from Quoting\n\n| Component | Source | Reuse Strategy |\n|-----------|--------|----------------|\n| StatusBadge | `components/features/` | Extend for invoice statuses |\n| CustomerCombobox | `components/features/` | Reuse as-is |\n| CollapsibleSection | `quotes/_components/` | Reuse for form sections |\n| PricingSummary | `quotes/_components/` | Pattern reference (new impl) |\n| EmailPreviewModal | `quotes/_components/` | Pattern reference for reminders |\n\n## New Components\n\n| Component | Purpose |\n|-----------|---------|\n| InvoiceStatsBar | 4 KPI cards: Outstanding, Overdue, Paid This Month, Avg Days to Pay |\n| InvoicesDataTable | Filterable table with smart view tabs and batch operations |\n| InvoiceForm | Create/edit form shared between new + edit pages |\n| PaymentLedger | Table of payments with running balance |\n| RecordPaymentSheet | Slide-out form for recording payments |\n| DepositSection | Smart deposit with % / flat toggle |\n| ChangeDiffPanel | Quote vs invoice change tracking |\n| ReminderTimeline | Timeline of sent/scheduled payment reminders |\n| CreateCreditMemoModal | Formal CM document creation |\n| OverdueBadge | Shared badge with days count + pulse animation |\n\n## Build Order\n\n1. **Schema creation** (Medium) — invoice.ts, credit-memo.ts, payment method enum\n2. **Constants update** (Low) — Status labels/colors, payment methods, CM reasons\n3. **Mock data** (Medium) — 6-8 invoices, 10+ payments, 1-2 credit memos\n4. **Shared components** (Low) — StatusBadge extension + OverdueBadge (parallel)\n5. **Invoices List page** (Medium) — StatsBar + DataTable + smart view tabs + batch ops\n6. **InvoiceForm + line items + pricing** (High) — Critical path — highest complexity, shared between new + edit\n7. **Invoice Detail + actions + payment ledger** (High) — Detail view, context-aware actions, reminders, change diff\n8. **New Invoice page + Review Sheet** (Medium) — Quote-to-invoice populate logic is key\n9. **Detail modals/sheets** (Medium) — RecordPayment, SendReminder, Void, CreditMemo\n10. **Edit Invoice page** (Low) — Reuses InvoiceForm, draft only\n11. **Customer Detail integration** (Medium) — Invoices tab + financial summary on customer page\n12. **Sidebar nav link** (Low) — Add \"Invoices\" between Quotes and Customers\n13. **Quote Detail wiring** (Low) — \"Create Invoice\" button on accepted quotes\n\n**Critical path:** 1 → 2 → 3 → 6 → 8 (InvoiceForm with quote-to-invoice conversion)\n\n## Deferred to Phase 2\n\n| Feature | Why Deferred |\n|---------|-------------|\n| PDF generation | Requires library (react-pdf), not critical for mock |\n| Real email sending | Requires backend + SMTP |\n| QuickBooks sync | Requires OAuth + QBO API |\n| Square payment gateway | Requires Square SDK |\n| Late fee auto-calculation | Schema supports, UI deferred |\n| Read receipts | Requires customer portal |\n| Customer portal | Separate vertical per decision #7 |\n| Recurring invoices | Contract customer feature, Phase 2 |\n\n## Input Documents\n\n- [Invoicing Vertical Research](2026-02-10-invoicing-vertical-research.html) — Industry analysis, competitor deep-dive, 19 key decisions\n- `docs/spikes/invoicing-decisions.md` — Decision record\n- `docs/spikes/invoicing-ux-patterns.md` — Screen designs and component reuse\n- `docs/spikes/invoicing-integration-map.md` — Schema dependencies and data flow\n- `docs/spikes/invoicing-compliance.md` — Tax, legal, audit requirements\n- `docs/breadboards/quoting-breadboard.md` — Upstream quoting vertical","src/content/sessions/2026-02-11-invoicing-breadboard.md","38103f2aa9e5b477",{"html":1269,"metadata":1270},"\u003Ch2 id=\"source-document\">Source Document\u003C/h2>\n\u003Cp>\u003Ca href=\"https://github.com/cmbays/print-4ink/blob/session/0211-invoicing-breadboard/docs/breadboards/invoicing-breadboard.md\">docs/breadboards/invoicing-breadboard.md\u003C/a> →\u003C/p>\n\u003Ch2 id=\"at-a-glance\">At a Glance\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Stat\u003C/th>\u003Cth>Value\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>Places\u003C/td>\u003Ctd>9\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>UI Affordances\u003C/td>\u003Ctd>99\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Code Affordances\u003C/td>\u003Ctd>44\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Data Stores\u003C/td>\u003Ctd>25\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Components\u003C/td>\u003Ctd>18\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Build Steps\u003C/td>\u003Ctd>13\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"places-screens--modals\">Places (Screens &#x26; Modals)\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>ID\u003C/th>\u003Cth>Name\u003C/th>\u003Cth>Type\u003C/th>\u003Cth>Route\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>P1\u003C/td>\u003Ctd>Invoices List\u003C/td>\u003Ctd>Page\u003C/td>\u003Ctd>/invoices\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>P2\u003C/td>\u003Ctd>Invoice Detail\u003C/td>\u003Ctd>Page\u003C/td>\u003Ctd>/invoices/[id]\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>P2.1\u003C/td>\u003Ctd>Record Payment\u003C/td>\u003Ctd>Sheet\u003C/td>\u003Ctd>—\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>P2.2\u003C/td>\u003Ctd>Send Reminder\u003C/td>\u003Ctd>Modal\u003C/td>\u003Ctd>—\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>P2.3\u003C/td>\u003Ctd>Void Invoice\u003C/td>\u003Ctd>Dialog\u003C/td>\u003Ctd>—\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>P2.4\u003C/td>\u003Ctd>Credit Memo\u003C/td>\u003Ctd>Modal\u003C/td>\u003Ctd>—\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>P3\u003C/td>\u003Ctd>New Invoice Form\u003C/td>\u003Ctd>Page\u003C/td>\u003Ctd>/invoices/new\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>P3.1\u003C/td>\u003Ctd>Review &#x26; Send\u003C/td>\u003Ctd>Sheet\u003C/td>\u003Ctd>—\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>P4\u003C/td>\u003Ctd>Edit Invoice\u003C/td>\u003Ctd>Page (Draft only)\u003C/td>\u003Ctd>/invoices/[id]/edit\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"key-design-decisions\">Key Design Decisions\u003C/h2>\n\u003Ch3 id=\"single-invoice--partial-payments\">Single Invoice + Partial Payments\u003C/h3>\n\u003Cp>One invoice for the full amount. Deposits recorded as partial payments. Balance due updates automatically. Simpler than two-invoice approach.\u003C/p>\n\u003Ch3 id=\"smart-deposit-defaults\">Smart Deposit Defaults\u003C/h3>\n\u003Cp>Deposit amount pre-calculated from customer tier (standard=50%, contract=per agreement). Manual override with % or flat $ toggle.\u003C/p>\n\u003Ch3 id=\"quote-to-invoice-conversion\">Quote-to-Invoice Conversion\u003C/h3>\n\u003Cp>One-click from accepted quote. Prices locked from quote (never recalculated). Change tracking shows what diverged. Tax recalculated from customer exempt status.\u003C/p>\n\u003Ch3 id=\"configurable-itemization\">Configurable Itemization\u003C/h3>\n\u003Cp>Toggle between itemized view (every component as separate line) and bundled view (one line per garment style) per invoice.\u003C/p>\n\u003Ch3 id=\"status-lifecycle\">Status Lifecycle\u003C/h3>\n\u003Cp>\u003Ccode>draft → sent → partial → paid\u003C/code> with computed \u003Ccode>overdue\u003C/code> (past due + unpaid). Void from any non-paid state. Credit memos for paid invoices.\u003C/p>\n\u003Ch2 id=\"component-reuse-from-quoting\">Component Reuse from Quoting\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Component\u003C/th>\u003Cth>Source\u003C/th>\u003Cth>Reuse Strategy\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>StatusBadge\u003C/td>\u003Ctd>\u003Ccode>components/features/\u003C/code>\u003C/td>\u003Ctd>Extend for invoice statuses\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>CustomerCombobox\u003C/td>\u003Ctd>\u003Ccode>components/features/\u003C/code>\u003C/td>\u003Ctd>Reuse as-is\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>CollapsibleSection\u003C/td>\u003Ctd>\u003Ccode>quotes/_components/\u003C/code>\u003C/td>\u003Ctd>Reuse for form sections\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>PricingSummary\u003C/td>\u003Ctd>\u003Ccode>quotes/_components/\u003C/code>\u003C/td>\u003Ctd>Pattern reference (new impl)\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>EmailPreviewModal\u003C/td>\u003Ctd>\u003Ccode>quotes/_components/\u003C/code>\u003C/td>\u003Ctd>Pattern reference for reminders\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"new-components\">New Components\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Component\u003C/th>\u003Cth>Purpose\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>InvoiceStatsBar\u003C/td>\u003Ctd>4 KPI cards: Outstanding, Overdue, Paid This Month, Avg Days to Pay\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>InvoicesDataTable\u003C/td>\u003Ctd>Filterable table with smart view tabs and batch operations\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>InvoiceForm\u003C/td>\u003Ctd>Create/edit form shared between new + edit pages\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>PaymentLedger\u003C/td>\u003Ctd>Table of payments with running balance\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>RecordPaymentSheet\u003C/td>\u003Ctd>Slide-out form for recording payments\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>DepositSection\u003C/td>\u003Ctd>Smart deposit with % / flat toggle\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>ChangeDiffPanel\u003C/td>\u003Ctd>Quote vs invoice change tracking\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>ReminderTimeline\u003C/td>\u003Ctd>Timeline of sent/scheduled payment reminders\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>CreateCreditMemoModal\u003C/td>\u003Ctd>Formal CM document creation\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>OverdueBadge\u003C/td>\u003Ctd>Shared badge with days count + pulse animation\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"build-order\">Build Order\u003C/h2>\n\u003Col>\n\u003Cli>\u003Cstrong>Schema creation\u003C/strong> (Medium) — invoice.ts, credit-memo.ts, payment method enum\u003C/li>\n\u003Cli>\u003Cstrong>Constants update\u003C/strong> (Low) — Status labels/colors, payment methods, CM reasons\u003C/li>\n\u003Cli>\u003Cstrong>Mock data\u003C/strong> (Medium) — 6-8 invoices, 10+ payments, 1-2 credit memos\u003C/li>\n\u003Cli>\u003Cstrong>Shared components\u003C/strong> (Low) — StatusBadge extension + OverdueBadge (parallel)\u003C/li>\n\u003Cli>\u003Cstrong>Invoices List page\u003C/strong> (Medium) — StatsBar + DataTable + smart view tabs + batch ops\u003C/li>\n\u003Cli>\u003Cstrong>InvoiceForm + line items + pricing\u003C/strong> (High) — Critical path — highest complexity, shared between new + edit\u003C/li>\n\u003Cli>\u003Cstrong>Invoice Detail + actions + payment ledger\u003C/strong> (High) — Detail view, context-aware actions, reminders, change diff\u003C/li>\n\u003Cli>\u003Cstrong>New Invoice page + Review Sheet\u003C/strong> (Medium) — Quote-to-invoice populate logic is key\u003C/li>\n\u003Cli>\u003Cstrong>Detail modals/sheets\u003C/strong> (Medium) — RecordPayment, SendReminder, Void, CreditMemo\u003C/li>\n\u003Cli>\u003Cstrong>Edit Invoice page\u003C/strong> (Low) — Reuses InvoiceForm, draft only\u003C/li>\n\u003Cli>\u003Cstrong>Customer Detail integration\u003C/strong> (Medium) — Invoices tab + financial summary on customer page\u003C/li>\n\u003Cli>\u003Cstrong>Sidebar nav link\u003C/strong> (Low) — Add “Invoices” between Quotes and Customers\u003C/li>\n\u003Cli>\u003Cstrong>Quote Detail wiring\u003C/strong> (Low) — “Create Invoice” button on accepted quotes\u003C/li>\n\u003C/ol>\n\u003Cp>\u003Cstrong>Critical path:\u003C/strong> 1 → 2 → 3 → 6 → 8 (InvoiceForm with quote-to-invoice conversion)\u003C/p>\n\u003Ch2 id=\"deferred-to-phase-2\">Deferred to Phase 2\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Feature\u003C/th>\u003Cth>Why Deferred\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>PDF generation\u003C/td>\u003Ctd>Requires library (react-pdf), not critical for mock\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Real email sending\u003C/td>\u003Ctd>Requires backend + SMTP\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>QuickBooks sync\u003C/td>\u003Ctd>Requires OAuth + QBO API\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Square payment gateway\u003C/td>\u003Ctd>Requires Square SDK\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Late fee auto-calculation\u003C/td>\u003Ctd>Schema supports, UI deferred\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Read receipts\u003C/td>\u003Ctd>Requires customer portal\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Customer portal\u003C/td>\u003Ctd>Separate vertical per decision #7\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Recurring invoices\u003C/td>\u003Ctd>Contract customer feature, Phase 2\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"input-documents\">Input Documents\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Ca href=\"2026-02-10-invoicing-vertical-research.html\">Invoicing Vertical Research\u003C/a> — Industry analysis, competitor deep-dive, 19 key decisions\u003C/li>\n\u003Cli>\u003Ccode>docs/spikes/invoicing-decisions.md\u003C/code> — Decision record\u003C/li>\n\u003Cli>\u003Ccode>docs/spikes/invoicing-ux-patterns.md\u003C/code> — Screen designs and component reuse\u003C/li>\n\u003Cli>\u003Ccode>docs/spikes/invoicing-integration-map.md\u003C/code> — Schema dependencies and data flow\u003C/li>\n\u003Cli>\u003Ccode>docs/spikes/invoicing-compliance.md\u003C/code> — Tax, legal, audit requirements\u003C/li>\n\u003Cli>\u003Ccode>docs/breadboards/quoting-breadboard.md\u003C/code> — Upstream quoting vertical\u003C/li>\n\u003C/ul>",{"headings":1271,"localImagePaths":1310,"remoteImagePaths":1311,"frontmatter":1312,"imagePaths":1316},[1272,1275,1278,1281,1282,1285,1288,1291,1294,1297,1300,1303,1304,1307],{"depth":34,"slug":1273,"text":1274},"source-document","Source Document",{"depth":34,"slug":1276,"text":1277},"at-a-glance","At a Glance",{"depth":34,"slug":1279,"text":1280},"places-screens--modals","Places (Screens & Modals)",{"depth":34,"slug":221,"text":222},{"depth":40,"slug":1283,"text":1284},"single-invoice--partial-payments","Single Invoice + Partial Payments",{"depth":40,"slug":1286,"text":1287},"smart-deposit-defaults","Smart Deposit Defaults",{"depth":40,"slug":1289,"text":1290},"quote-to-invoice-conversion","Quote-to-Invoice Conversion",{"depth":40,"slug":1292,"text":1293},"configurable-itemization","Configurable Itemization",{"depth":40,"slug":1295,"text":1296},"status-lifecycle","Status Lifecycle",{"depth":34,"slug":1298,"text":1299},"component-reuse-from-quoting","Component Reuse from Quoting",{"depth":34,"slug":1301,"text":1302},"new-components","New Components",{"depth":34,"slug":218,"text":219},{"depth":34,"slug":1305,"text":1306},"deferred-to-phase-2","Deferred to Phase 2",{"depth":34,"slug":1308,"text":1309},"input-documents","Input Documents",[],[],{"title":1258,"subtitle":1259,"date":1313,"phase":17,"vertical":864,"verticalSecondary":1314,"stage":187,"tags":1315,"sessionId":1263,"branch":1264,"status":25},["Date","2026-02-11T00:00:00.000Z"],[],[189,20],[],"2026-02-10-worktree-migration",{"id":1317,"data":1319,"body":1326,"filePath":1327,"digest":1328,"rendered":1329},{"title":1320,"subtitle":1321,"date":1322,"phase":17,"vertical":18,"verticalSecondary":1323,"stage":75,"tags":1324,"sessionId":1325,"branch":908,"status":25},"Git Worktree Migration + Memory Refactoring","Migrated from git checkout to git worktrees for concurrent session isolation, auto-generated for_human index, and slimmed progress/memory files by 70%.",["Date","2026-02-10T00:00:00.000Z"],[],[75,22],"8a3b9d7b-461c-48a8-bdbc-7b4361c6260a","## Why\n\nConcurrent Claude Code sessions sharing a single working directory caused file conflicts. The old `git checkout -b` workflow meant only one session could safely edit files at a time. Git worktrees give each session its own isolated directory.\n\nAdditionally, `progress.txt` (251 lines) and `MEMORY.md` (202+ lines) were bloated with historical data loaded into every session's context window, wasting tokens.\n\n## What Changed\n\n| Stat | Value |\n|------|-------|\n| progress.txt lines | 251 → 95 |\n| MEMORY.md lines | 202 → 72 |\n| gitbutler-lessons.md | 165 → 0 |\n| auto-indexed entries | 15 |\n\n### Files Created\n\n- **scripts/generate-for-human-index.js** — Zero-dep Node.js script that scans for_human/*.html, extracts metadata, generates index.html + README.md\n- **docs/HISTORY.md** — Archived session logs and completed feature details (moved from progress.txt)\n- **memory/worktree-workflow.md** — Detailed worktree rules, stacked PRs, cleanup protocol\n\n### Files Modified\n\n- **progress.txt → PROGRESS.md** — Renamed and slimmed from 251 to 95 lines using collapsible \u003Cdetails> sections\n- **CLAUDE.md** — Updated Commands (worktree cmds), Session Startup (worktree workflow), added Hot File Protocol, updated Canonical Docs table, For Human Docs section, Lessons Learned\n- **.gitignore** — Added .session-context.md (per-worktree scratchpad)\n- **package.json** — Added `gen:index` npm script\n- **MEMORY.md** — Refactored from 202 to 72 lines, removed duplication with PROGRESS.md\n\n### Files Deleted\n\n- **memory/gitbutler-lessons.md** — 165 lines of obsolete GitButler CLI commands (removed in PR #40)\n\n## Key Decisions\n\n### Hot File Protocol\n\nPROGRESS.md, for_human/index.html, and for_human/README.md are never committed on feature branches. They're updated on main after PR merge to avoid merge conflicts from concurrent sessions.\n\n### Auto-Generated Index\n\nfor_human/index.html and README.md are now generated by `npm run gen:index`. Sessions only commit their individual HTML doc. The script extracts title, subtitle, tags, and date from each file's HTML structure.\n\n### Three-Tier Progress System\n\nPROGRESS.md (active state, ~95 lines) → HISTORY.md (archived details) → MEMORY.md (cross-session patterns, ~72 lines). Each tier serves a different purpose with no duplication.","src/content/sessions/2026-02-10-worktree-migration.md","aefcedd5f7ab2488",{"html":1330,"metadata":1331},"\u003Ch2 id=\"why\">Why\u003C/h2>\n\u003Cp>Concurrent Claude Code sessions sharing a single working directory caused file conflicts. The old \u003Ccode>git checkout -b\u003C/code> workflow meant only one session could safely edit files at a time. Git worktrees give each session its own isolated directory.\u003C/p>\n\u003Cp>Additionally, \u003Ccode>progress.txt\u003C/code> (251 lines) and \u003Ccode>MEMORY.md\u003C/code> (202+ lines) were bloated with historical data loaded into every session’s context window, wasting tokens.\u003C/p>\n\u003Ch2 id=\"what-changed\">What Changed\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Stat\u003C/th>\u003Cth>Value\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>progress.txt lines\u003C/td>\u003Ctd>251 → 95\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>MEMORY.md lines\u003C/td>\u003Ctd>202 → 72\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>gitbutler-lessons.md\u003C/td>\u003Ctd>165 → 0\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>auto-indexed entries\u003C/td>\u003Ctd>15\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch3 id=\"files-created\">Files Created\u003C/h3>\n\u003Cul>\n\u003Cli>\u003Cstrong>scripts/generate-for-human-index.js\u003C/strong> — Zero-dep Node.js script that scans for_human/*.html, extracts metadata, generates index.html + README.md\u003C/li>\n\u003Cli>\u003Cstrong>docs/HISTORY.md\u003C/strong> — Archived session logs and completed feature details (moved from progress.txt)\u003C/li>\n\u003Cli>\u003Cstrong>memory/worktree-workflow.md\u003C/strong> — Detailed worktree rules, stacked PRs, cleanup protocol\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"files-modified\">Files Modified\u003C/h3>\n\u003Cul>\n\u003Cli>\u003Cstrong>progress.txt → PROGRESS.md\u003C/strong> — Renamed and slimmed from 251 to 95 lines using collapsible \u003Cdetails> sections\u003C/details>\u003C/li>\n\u003Cli>\u003Cstrong>CLAUDE.md\u003C/strong> — Updated Commands (worktree cmds), Session Startup (worktree workflow), added Hot File Protocol, updated Canonical Docs table, For Human Docs section, Lessons Learned\u003C/li>\n\u003Cli>\u003Cstrong>.gitignore\u003C/strong> — Added .session-context.md (per-worktree scratchpad)\u003C/li>\n\u003Cli>\u003Cstrong>package.json\u003C/strong> — Added \u003Ccode>gen:index\u003C/code> npm script\u003C/li>\n\u003Cli>\u003Cstrong>MEMORY.md\u003C/strong> — Refactored from 202 to 72 lines, removed duplication with PROGRESS.md\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"files-deleted\">Files Deleted\u003C/h3>\n\u003Cul>\n\u003Cli>\u003Cstrong>memory/gitbutler-lessons.md\u003C/strong> — 165 lines of obsolete GitButler CLI commands (removed in PR #40)\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"key-decisions\">Key Decisions\u003C/h2>\n\u003Ch3 id=\"hot-file-protocol\">Hot File Protocol\u003C/h3>\n\u003Cp>PROGRESS.md, for_human/index.html, and for_human/README.md are never committed on feature branches. They’re updated on main after PR merge to avoid merge conflicts from concurrent sessions.\u003C/p>\n\u003Ch3 id=\"auto-generated-index\">Auto-Generated Index\u003C/h3>\n\u003Cp>for_human/index.html and README.md are now generated by \u003Ccode>npm run gen:index\u003C/code>. Sessions only commit their individual HTML doc. The script extracts title, subtitle, tags, and date from each file’s HTML structure.\u003C/p>\n\u003Ch3 id=\"three-tier-progress-system\">Three-Tier Progress System\u003C/h3>\n\u003Cp>PROGRESS.md (active state, ~95 lines) → HISTORY.md (archived details) → MEMORY.md (cross-session patterns, ~72 lines). Each tier serves a different purpose with no duplication.\u003C/p>",{"headings":1332,"localImagePaths":1354,"remoteImagePaths":1355,"frontmatter":1356,"imagePaths":1360},[1333,1334,1335,1338,1339,1342,1345,1348,1351],{"depth":34,"slug":917,"text":918},{"depth":34,"slug":284,"text":285},{"depth":40,"slug":1336,"text":1337},"files-created","Files Created",{"depth":40,"slug":887,"text":888},{"depth":40,"slug":1340,"text":1341},"files-deleted","Files Deleted",{"depth":34,"slug":1343,"text":1344},"key-decisions","Key Decisions",{"depth":40,"slug":1346,"text":1347},"hot-file-protocol","Hot File Protocol",{"depth":40,"slug":1349,"text":1350},"auto-generated-index","Auto-Generated Index",{"depth":40,"slug":1352,"text":1353},"three-tier-progress-system","Three-Tier Progress System",[],[],{"title":1320,"subtitle":1321,"date":1357,"phase":17,"vertical":18,"verticalSecondary":1358,"stage":75,"tags":1359,"sessionId":1325,"branch":908,"status":25},["Date","2026-02-10T00:00:00.000Z"],[],[75,22],[],"2026-02-11-invoicing-build",{"id":1361,"data":1363,"body":1370,"filePath":1371,"digest":1372,"rendered":1373},{"title":1364,"subtitle":1365,"date":1366,"phase":17,"vertical":864,"verticalSecondary":1367,"stage":75,"tags":1368,"sessionId":1263,"branch":1369,"status":25},"Invoicing Vertical Build","Full invoicing system — schemas, list page, form, detail view, overlays, and integrations. 30 new files, 8 modified, 314 tests passing.",["Date","2026-02-11T00:00:00.000Z"],[],[77,75],"session/0211-invoicing-build","## Build Summary\n\n| Stat | Value |\n|------|-------|\n| New Files | 30 |\n| Modified Files | 8 |\n| Tests Passing | 314 |\n| Quality Gate | 10/10 |\n\n## Build Phases\n\n### Phase 0 — Data Foundation\n\nZod schemas for invoices and credit memos. Status state machine (`isValidStatusTransition`), financial calculators with big.js precision, mock data (8 invoices, 11 payments, 2 credit memos). All math uses `money()` / `round2()` / `toNumber()` — zero floating-point.\n\n### Phase 1 — List Page\n\nStats bar (outstanding, overdue, paid this month, avg days to pay), smart view tabs (All/Draft/Outstanding/Overdue/Paid), data table with sort, search, batch ops, desktop table + mobile cards, and overdue badge with pulse animation.\n\n### Phase 2 — Form + Detail View\n\nFull invoice form (customer, line items, pricing summary, deposit, payment terms), detail view with payment ledger, reminder timeline, change diff panel, audit log, and context-aware action buttons per status.\n\n### Phase 3 — Overlays + Edit\n\nRecord Payment sheet, Send Reminder modal, Void Invoice dialog (destructive, permanent), Create Credit Memo modal (line-item selection, bounded by invoice total), and edit page (draft-only guard).\n\n### Phase 4 — Integration Points\n\nSidebar navigation (Receipt icon), Customer detail invoices tab, Quote detail \"Create Invoice\" button (accepted quotes only), and all cross-vertical navigation wiring.\n\n## Key Architecture Decisions\n\n### big.js for All Financial Arithmetic\n\nEvery monetary calculation goes through `lib/helpers/money.ts`. Schema invariants use `Big.eq()` for exact comparison. IEEE 754 floating-point is never used for money — not even for simple addition.\n\n### Status State Machine\n\n`isValidStatusTransition()` enforces: draft→sent→partial→paid, with void as terminal from any non-paid state. All UI actions check transitions before enabling buttons.\n\n### Immutability After Send\n\nEdit page redirects to detail view for non-draft invoices. InvoiceForm rejects non-draft mode. No backdoor to modify sent/partial/paid invoices.\n\n### Overdue Is Computed, Never Stored\n\nSingle `computeIsOverdue()` function used everywhere (stats, table, detail, badge). Compares `dueDate \u003C today AND balanceDue > 0 AND status in [sent, partial]`.\n\n### Conditional Rendering for Dialog State\n\nReact 19 ESLint forbids `setState` in effects. All sheet/dialog components use conditional rendering (`{show && \u003CComponent />}`) so React unmounts/remounts, naturally resetting useState hooks.\n\n## Quality Gate Results\n\n| # | Category | Result |\n|---|----------|--------|\n| 1 | Visual Hierarchy | Pass |\n| 2 | Spacing & Layout | Pass |\n| 3 | Typography | Pass |\n| 4 | Color Usage | Pass |\n| 5 | Interactive States | Pass |\n| 6 | Icons | Pass |\n| 7 | Motion & Animation | Pass |\n| 8 | Empty & Error States | Pass |\n| 9 | Accessibility | Pass |\n| 10 | Jobs Filter (Density) | Pass |\n\nFixes applied during quality gate: `font-bold`→`font-semibold` (1), `role=\"alert\"` additions (2), `aria-hidden=\"true\"` on decorative icons (3), empty state icon sizes to `size-12` (2), search no-results now quotes query.\n\n## Files Created\n\n| File | Phase |\n|------|-------|\n| `lib/schemas/invoice.ts` | 0 |\n| `lib/schemas/credit-memo.ts` | 0 |\n| `lib/helpers/invoice-utils.ts` | 0 |\n| `lib/helpers/money.ts` | 0 |\n| `lib/schemas/__tests__/invoice.test.ts` | 0 |\n| `lib/schemas/__tests__/credit-memo.test.ts` | 0 |\n| `components/features/OverdueBadge.tsx` | 1 |\n| `invoices/page.tsx` | 1 |\n| `invoices/_components/InvoiceStatsBar.tsx` | 1 |\n| `invoices/_components/InvoicesSmartViewTabs.tsx` | 1 |\n| `invoices/_components/InvoicesDataTable.tsx` | 1 |\n| `invoices/_components/InvoiceForm.tsx` | 2 |\n| `invoices/_components/InvoiceLineItemRow.tsx` | 2 |\n| `invoices/_components/InvoicePricingSummary.tsx` | 2 |\n| `invoices/_components/DepositSection.tsx` | 2 |\n| `invoices/_components/PaymentTermsSection.tsx` | 2 |\n| `invoices/new/page.tsx` | 2 |\n| `invoices/_components/ReviewSendSheet.tsx` | 2 |\n| `invoices/[id]/page.tsx` | 2 |\n| `invoices/_components/InvoiceDetailView.tsx` | 2 |\n| `invoices/_components/InvoiceActions.tsx` | 2 |\n| `invoices/_components/PaymentLedger.tsx` | 2 |\n| `invoices/_components/ChangeDiffPanel.tsx` | 2 |\n| `invoices/_components/ReminderTimeline.tsx` | 2 |\n| `invoices/_components/RecordPaymentSheet.tsx` | 3 |\n| `invoices/_components/SendReminderModal.tsx` | 3 |\n| `invoices/_components/VoidInvoiceDialog.tsx` | 3 |\n| `invoices/_components/CreateCreditMemoModal.tsx` | 3 |\n| `invoices/[id]/edit/page.tsx` | 3 |\n| `customers/[id]/_components/CustomerInvoicesTable.tsx` | 4 |\n\n## Mock Data Coverage\n\n| Invoice | Status | Total | Notes |\n|---------|--------|-------|-------|\n| INV-0001 | Paid | $765 | 2 payments (check + square) |\n| INV-0002 | Sent/Overdue | $2,614 | Past due 27 days, 1 reminder |\n| INV-0003 | Draft | $855 | Deposit requested $427.50 |\n| INV-0004 | Paid | $1,850 | Holiday merch, 2 payments |\n| INV-0005 | Partial | $840 | Deposit received, due in 4d |\n| INV-0006 | Sent | $3,200 | Wholesale, due in 17d |\n| INV-0007 | Partial | $2,100 | ACH + Zelle, due in 9d |\n| INV-0008 | Void | $450 | Customer cancelled |\n\nPlus 11 payment records and 2 credit memos covering check, cash, square, venmo, zelle, and ACH methods.\n\n## Lessons Learned\n\n### big.js Is Non-Negotiable for Financial UI\n\nEven \"display-only\" components that compute stats (sums, averages) must use big.js. Floating-point errors compound across 8 invoices with multi-payment ledgers. The `money()` wrapper makes it painless.\n\n### Quality Gate Catches Real Issues\n\nThe 10-category audit found 8 fixable issues across typography (`font-bold`), accessibility (`role=\"alert\"`, `aria-hidden`), and empty states (icon sizing). All fixed in 3 commits with zero regressions.\n\n### Conditional Rendering Beats useEffect Reset\n\nReact 19 ESLint flags `setState` in effects. The pattern `{show && \u003CSheet />}` is cleaner — unmount/remount naturally resets all hooks. Applied to RecordPaymentSheet, SendReminderModal, VoidInvoiceDialog, and CreateCreditMemoModal.\n\n---\n\n## Artifacts\n\n- **PR**: [#50 — Invoicing vertical build](https://github.com/cmbays/print-4ink/pull/50)\n- **Breadboard**: `docs/breadboards/invoicing-breadboard.md`\n- **Research spikes**: `docs/spikes/invoicing-*.md` (6 files)\n- **Plan**: `.claude/plans/zesty-wibbling-river.md`","src/content/sessions/2026-02-11-invoicing-build.md","b0b10a301d63449b",{"html":1374,"metadata":1375},"\u003Ch2 id=\"build-summary\">Build Summary\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Stat\u003C/th>\u003Cth>Value\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>New Files\u003C/td>\u003Ctd>30\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Modified Files\u003C/td>\u003Ctd>8\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Tests Passing\u003C/td>\u003Ctd>314\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Quality Gate\u003C/td>\u003Ctd>10/10\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"build-phases\">Build Phases\u003C/h2>\n\u003Ch3 id=\"phase-0--data-foundation\">Phase 0 — Data Foundation\u003C/h3>\n\u003Cp>Zod schemas for invoices and credit memos. Status state machine (\u003Ccode>isValidStatusTransition\u003C/code>), financial calculators with big.js precision, mock data (8 invoices, 11 payments, 2 credit memos). All math uses \u003Ccode>money()\u003C/code> / \u003Ccode>round2()\u003C/code> / \u003Ccode>toNumber()\u003C/code> — zero floating-point.\u003C/p>\n\u003Ch3 id=\"phase-1--list-page\">Phase 1 — List Page\u003C/h3>\n\u003Cp>Stats bar (outstanding, overdue, paid this month, avg days to pay), smart view tabs (All/Draft/Outstanding/Overdue/Paid), data table with sort, search, batch ops, desktop table + mobile cards, and overdue badge with pulse animation.\u003C/p>\n\u003Ch3 id=\"phase-2--form--detail-view\">Phase 2 — Form + Detail View\u003C/h3>\n\u003Cp>Full invoice form (customer, line items, pricing summary, deposit, payment terms), detail view with payment ledger, reminder timeline, change diff panel, audit log, and context-aware action buttons per status.\u003C/p>\n\u003Ch3 id=\"phase-3--overlays--edit\">Phase 3 — Overlays + Edit\u003C/h3>\n\u003Cp>Record Payment sheet, Send Reminder modal, Void Invoice dialog (destructive, permanent), Create Credit Memo modal (line-item selection, bounded by invoice total), and edit page (draft-only guard).\u003C/p>\n\u003Ch3 id=\"phase-4--integration-points\">Phase 4 — Integration Points\u003C/h3>\n\u003Cp>Sidebar navigation (Receipt icon), Customer detail invoices tab, Quote detail “Create Invoice” button (accepted quotes only), and all cross-vertical navigation wiring.\u003C/p>\n\u003Ch2 id=\"key-architecture-decisions\">Key Architecture Decisions\u003C/h2>\n\u003Ch3 id=\"bigjs-for-all-financial-arithmetic\">big.js for All Financial Arithmetic\u003C/h3>\n\u003Cp>Every monetary calculation goes through \u003Ccode>lib/helpers/money.ts\u003C/code>. Schema invariants use \u003Ccode>Big.eq()\u003C/code> for exact comparison. IEEE 754 floating-point is never used for money — not even for simple addition.\u003C/p>\n\u003Ch3 id=\"status-state-machine\">Status State Machine\u003C/h3>\n\u003Cp>\u003Ccode>isValidStatusTransition()\u003C/code> enforces: draft→sent→partial→paid, with void as terminal from any non-paid state. All UI actions check transitions before enabling buttons.\u003C/p>\n\u003Ch3 id=\"immutability-after-send\">Immutability After Send\u003C/h3>\n\u003Cp>Edit page redirects to detail view for non-draft invoices. InvoiceForm rejects non-draft mode. No backdoor to modify sent/partial/paid invoices.\u003C/p>\n\u003Ch3 id=\"overdue-is-computed-never-stored\">Overdue Is Computed, Never Stored\u003C/h3>\n\u003Cp>Single \u003Ccode>computeIsOverdue()\u003C/code> function used everywhere (stats, table, detail, badge). Compares \u003Ccode>dueDate &#x3C; today AND balanceDue > 0 AND status in [sent, partial]\u003C/code>.\u003C/p>\n\u003Ch3 id=\"conditional-rendering-for-dialog-state\">Conditional Rendering for Dialog State\u003C/h3>\n\u003Cp>React 19 ESLint forbids \u003Ccode>setState\u003C/code> in effects. All sheet/dialog components use conditional rendering (\u003Ccode>{show &#x26;&#x26; &#x3C;Component />}\u003C/code>) so React unmounts/remounts, naturally resetting useState hooks.\u003C/p>\n\u003Ch2 id=\"quality-gate-results\">Quality Gate Results\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>#\u003C/th>\u003Cth>Category\u003C/th>\u003Cth>Result\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>1\u003C/td>\u003Ctd>Visual Hierarchy\u003C/td>\u003Ctd>Pass\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>2\u003C/td>\u003Ctd>Spacing &#x26; Layout\u003C/td>\u003Ctd>Pass\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>3\u003C/td>\u003Ctd>Typography\u003C/td>\u003Ctd>Pass\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>4\u003C/td>\u003Ctd>Color Usage\u003C/td>\u003Ctd>Pass\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>5\u003C/td>\u003Ctd>Interactive States\u003C/td>\u003Ctd>Pass\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>6\u003C/td>\u003Ctd>Icons\u003C/td>\u003Ctd>Pass\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>7\u003C/td>\u003Ctd>Motion &#x26; Animation\u003C/td>\u003Ctd>Pass\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>8\u003C/td>\u003Ctd>Empty &#x26; Error States\u003C/td>\u003Ctd>Pass\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>9\u003C/td>\u003Ctd>Accessibility\u003C/td>\u003Ctd>Pass\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>10\u003C/td>\u003Ctd>Jobs Filter (Density)\u003C/td>\u003Ctd>Pass\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Cp>Fixes applied during quality gate: \u003Ccode>font-bold\u003C/code>→\u003Ccode>font-semibold\u003C/code> (1), \u003Ccode>role=\"alert\"\u003C/code> additions (2), \u003Ccode>aria-hidden=\"true\"\u003C/code> on decorative icons (3), empty state icon sizes to \u003Ccode>size-12\u003C/code> (2), search no-results now quotes query.\u003C/p>\n\u003Ch2 id=\"files-created\">Files Created\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>File\u003C/th>\u003Cth>Phase\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>\u003Ccode>lib/schemas/invoice.ts\u003C/code>\u003C/td>\u003Ctd>0\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>lib/schemas/credit-memo.ts\u003C/code>\u003C/td>\u003Ctd>0\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>lib/helpers/invoice-utils.ts\u003C/code>\u003C/td>\u003Ctd>0\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>lib/helpers/money.ts\u003C/code>\u003C/td>\u003Ctd>0\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>lib/schemas/__tests__/invoice.test.ts\u003C/code>\u003C/td>\u003Ctd>0\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>lib/schemas/__tests__/credit-memo.test.ts\u003C/code>\u003C/td>\u003Ctd>0\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>components/features/OverdueBadge.tsx\u003C/code>\u003C/td>\u003Ctd>1\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>invoices/page.tsx\u003C/code>\u003C/td>\u003Ctd>1\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>invoices/_components/InvoiceStatsBar.tsx\u003C/code>\u003C/td>\u003Ctd>1\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>invoices/_components/InvoicesSmartViewTabs.tsx\u003C/code>\u003C/td>\u003Ctd>1\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>invoices/_components/InvoicesDataTable.tsx\u003C/code>\u003C/td>\u003Ctd>1\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>invoices/_components/InvoiceForm.tsx\u003C/code>\u003C/td>\u003Ctd>2\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>invoices/_components/InvoiceLineItemRow.tsx\u003C/code>\u003C/td>\u003Ctd>2\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>invoices/_components/InvoicePricingSummary.tsx\u003C/code>\u003C/td>\u003Ctd>2\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>invoices/_components/DepositSection.tsx\u003C/code>\u003C/td>\u003Ctd>2\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>invoices/_components/PaymentTermsSection.tsx\u003C/code>\u003C/td>\u003Ctd>2\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>invoices/new/page.tsx\u003C/code>\u003C/td>\u003Ctd>2\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>invoices/_components/ReviewSendSheet.tsx\u003C/code>\u003C/td>\u003Ctd>2\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>invoices/[id]/page.tsx\u003C/code>\u003C/td>\u003Ctd>2\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>invoices/_components/InvoiceDetailView.tsx\u003C/code>\u003C/td>\u003Ctd>2\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>invoices/_components/InvoiceActions.tsx\u003C/code>\u003C/td>\u003Ctd>2\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>invoices/_components/PaymentLedger.tsx\u003C/code>\u003C/td>\u003Ctd>2\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>invoices/_components/ChangeDiffPanel.tsx\u003C/code>\u003C/td>\u003Ctd>2\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>invoices/_components/ReminderTimeline.tsx\u003C/code>\u003C/td>\u003Ctd>2\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>invoices/_components/RecordPaymentSheet.tsx\u003C/code>\u003C/td>\u003Ctd>3\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>invoices/_components/SendReminderModal.tsx\u003C/code>\u003C/td>\u003Ctd>3\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>invoices/_components/VoidInvoiceDialog.tsx\u003C/code>\u003C/td>\u003Ctd>3\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>invoices/_components/CreateCreditMemoModal.tsx\u003C/code>\u003C/td>\u003Ctd>3\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>invoices/[id]/edit/page.tsx\u003C/code>\u003C/td>\u003Ctd>3\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>customers/[id]/_components/CustomerInvoicesTable.tsx\u003C/code>\u003C/td>\u003Ctd>4\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"mock-data-coverage\">Mock Data Coverage\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Invoice\u003C/th>\u003Cth>Status\u003C/th>\u003Cth>Total\u003C/th>\u003Cth>Notes\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>INV-0001\u003C/td>\u003Ctd>Paid\u003C/td>\u003Ctd>$765\u003C/td>\u003Ctd>2 payments (check + square)\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>INV-0002\u003C/td>\u003Ctd>Sent/Overdue\u003C/td>\u003Ctd>$2,614\u003C/td>\u003Ctd>Past due 27 days, 1 reminder\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>INV-0003\u003C/td>\u003Ctd>Draft\u003C/td>\u003Ctd>$855\u003C/td>\u003Ctd>Deposit requested $427.50\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>INV-0004\u003C/td>\u003Ctd>Paid\u003C/td>\u003Ctd>$1,850\u003C/td>\u003Ctd>Holiday merch, 2 payments\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>INV-0005\u003C/td>\u003Ctd>Partial\u003C/td>\u003Ctd>$840\u003C/td>\u003Ctd>Deposit received, due in 4d\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>INV-0006\u003C/td>\u003Ctd>Sent\u003C/td>\u003Ctd>$3,200\u003C/td>\u003Ctd>Wholesale, due in 17d\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>INV-0007\u003C/td>\u003Ctd>Partial\u003C/td>\u003Ctd>$2,100\u003C/td>\u003Ctd>ACH + Zelle, due in 9d\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>INV-0008\u003C/td>\u003Ctd>Void\u003C/td>\u003Ctd>$450\u003C/td>\u003Ctd>Customer cancelled\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Cp>Plus 11 payment records and 2 credit memos covering check, cash, square, venmo, zelle, and ACH methods.\u003C/p>\n\u003Ch2 id=\"lessons-learned\">Lessons Learned\u003C/h2>\n\u003Ch3 id=\"bigjs-is-non-negotiable-for-financial-ui\">big.js Is Non-Negotiable for Financial UI\u003C/h3>\n\u003Cp>Even “display-only” components that compute stats (sums, averages) must use big.js. Floating-point errors compound across 8 invoices with multi-payment ledgers. The \u003Ccode>money()\u003C/code> wrapper makes it painless.\u003C/p>\n\u003Ch3 id=\"quality-gate-catches-real-issues\">Quality Gate Catches Real Issues\u003C/h3>\n\u003Cp>The 10-category audit found 8 fixable issues across typography (\u003Ccode>font-bold\u003C/code>), accessibility (\u003Ccode>role=\"alert\"\u003C/code>, \u003Ccode>aria-hidden\u003C/code>), and empty states (icon sizing). All fixed in 3 commits with zero regressions.\u003C/p>\n\u003Ch3 id=\"conditional-rendering-beats-useeffect-reset\">Conditional Rendering Beats useEffect Reset\u003C/h3>\n\u003Cp>React 19 ESLint flags \u003Ccode>setState\u003C/code> in effects. The pattern \u003Ccode>{show &#x26;&#x26; &#x3C;Sheet />}\u003C/code> is cleaner — unmount/remount naturally resets all hooks. Applied to RecordPaymentSheet, SendReminderModal, VoidInvoiceDialog, and CreateCreditMemoModal.\u003C/p>\n\u003Chr>\n\u003Ch2 id=\"artifacts\">Artifacts\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Cstrong>PR\u003C/strong>: \u003Ca href=\"https://github.com/cmbays/print-4ink/pull/50\">#50 — Invoicing vertical build\u003C/a>\u003C/li>\n\u003Cli>\u003Cstrong>Breadboard\u003C/strong>: \u003Ccode>docs/breadboards/invoicing-breadboard.md\u003C/code>\u003C/li>\n\u003Cli>\u003Cstrong>Research spikes\u003C/strong>: \u003Ccode>docs/spikes/invoicing-*.md\u003C/code> (6 files)\u003C/li>\n\u003Cli>\u003Cstrong>Plan\u003C/strong>: \u003Ccode>.claude/plans/zesty-wibbling-river.md\u003C/code>\u003C/li>\n\u003C/ul>",{"headings":1376,"localImagePaths":1436,"remoteImagePaths":1437,"frontmatter":1438,"imagePaths":1442},[1377,1380,1383,1386,1389,1392,1395,1398,1401,1404,1407,1410,1413,1416,1419,1420,1423,1426,1429,1432,1435],{"depth":34,"slug":1378,"text":1379},"build-summary","Build Summary",{"depth":34,"slug":1381,"text":1382},"build-phases","Build Phases",{"depth":40,"slug":1384,"text":1385},"phase-0--data-foundation","Phase 0 — Data Foundation",{"depth":40,"slug":1387,"text":1388},"phase-1--list-page","Phase 1 — List Page",{"depth":40,"slug":1390,"text":1391},"phase-2--form--detail-view","Phase 2 — Form + Detail View",{"depth":40,"slug":1393,"text":1394},"phase-3--overlays--edit","Phase 3 — Overlays + Edit",{"depth":40,"slug":1396,"text":1397},"phase-4--integration-points","Phase 4 — Integration Points",{"depth":34,"slug":1399,"text":1400},"key-architecture-decisions","Key Architecture Decisions",{"depth":40,"slug":1402,"text":1403},"bigjs-for-all-financial-arithmetic","big.js for All Financial Arithmetic",{"depth":40,"slug":1405,"text":1406},"status-state-machine","Status State Machine",{"depth":40,"slug":1408,"text":1409},"immutability-after-send","Immutability After Send",{"depth":40,"slug":1411,"text":1412},"overdue-is-computed-never-stored","Overdue Is Computed, Never Stored",{"depth":40,"slug":1414,"text":1415},"conditional-rendering-for-dialog-state","Conditional Rendering for Dialog State",{"depth":34,"slug":1417,"text":1418},"quality-gate-results","Quality Gate Results",{"depth":34,"slug":1336,"text":1337},{"depth":34,"slug":1421,"text":1422},"mock-data-coverage","Mock Data Coverage",{"depth":34,"slug":1424,"text":1425},"lessons-learned","Lessons Learned",{"depth":40,"slug":1427,"text":1428},"bigjs-is-non-negotiable-for-financial-ui","big.js Is Non-Negotiable for Financial UI",{"depth":40,"slug":1430,"text":1431},"quality-gate-catches-real-issues","Quality Gate Catches Real Issues",{"depth":40,"slug":1433,"text":1434},"conditional-rendering-beats-useeffect-reset","Conditional Rendering Beats useEffect Reset",{"depth":34,"slug":59,"text":60},[],[],{"title":1364,"subtitle":1365,"date":1439,"phase":17,"vertical":864,"verticalSecondary":1440,"stage":75,"tags":1441,"sessionId":1263,"branch":1369,"status":25},["Date","2026-02-11T00:00:00.000Z"],[],[77,75],[],"2026-02-11-price-matrix-breadboard",{"id":1443,"data":1445,"body":1452,"filePath":1453,"digest":1454,"rendered":1455},{"title":1446,"subtitle":1447,"date":1448,"phase":17,"vertical":971,"verticalSecondary":1449,"stage":187,"tags":1450,"sessionId":1451,"branch":974,"status":25},"Price Matrix Breadboard","UI affordance map, wiring, component boundaries, and parallelized build order for the Price Matrix vertical",["Date","2026-02-11T00:00:00.000Z"],[],[189,22],"ac42f9fb-92e3-4d10-971d-bec20c749009","## At a Glance\n\n| Stat | Value |\n|------|-------|\n| Places | 8 |\n| UI Affordances | 167 |\n| Code Affordances | 80 |\n| Data Stores | 14 |\n\nThe breadboard maps the full Price Matrix vertical: a centralized pricing engine living under Settings, with a peek/shortcut from Quotes. Two service types (Screen Print + DTF), multiple templates with tag-based customer mapping, real-time margin indicators, sandbox what-if mode, and a 5-minute setup wizard.\n\n## Source Document\n\n### Breadboard Blueprint\n\n[docs/breadboards/price-matrix-breadboard.md](https://github.com/cmbays/print-4ink/blob/session/0210-price-matrix/docs/breadboards/price-matrix-breadboard.md)\n\nFull affordance tables, wiring verification, component boundaries, and scope coverage matrix.\n\n## Places Mapped\n\n| ID | Type | Name | Route |\n|----|------|------|-------|\n| P1 | Page | Pricing Hub | /settings/pricing |\n| P1.1 | Modal | New Template Wizard | 5-step setup |\n| P1.2 | Sheet | Tag-Template Mapping | customer tag → template |\n| P2 | Page | Screen Print Matrix Editor | /settings/pricing/screen-print/[id] |\n| P2.1 | Modal | Side-by-Side Comparison | current vs. proposed |\n| P2.2 | Sheet | Cost Configuration | garment + ink + overhead |\n| P3 | Page | DTF Matrix Editor | /settings/pricing/dtf/[id] |\n| P4 | Sheet | Matrix Peek (from Quotes) | read-only + quick adjust |\n\n## Build Plan — Critical Path\n\nThe build follows a dependency chain with three parallelization windows. Foundation work is sequential, then the plan fans out.\n\n```\nPHASE A — Foundation (sequential)\n\n#1 Schemas → #2 Pricing Engine → #3 Mock Data\n     |\n#4 Shared Components (MarginIndicator, CostBreakdownTooltip)\n     |\n#5 Sidebar Update + #6 Pricing Hub\n\nPHASE B — Editors (parallel after Hub)\n\n  [Agent A] #7 Setup Wizard (P1.1)\n  [Agent B] #8 Screen Print Editor (P2)\n  [Agent C] #9 DTF Editor (P3)\n\nPHASE C — Features (parallel after SP Editor)\n\n  [Agent A] #8a Sandbox + Comparison (P2.1)\n  [Agent B] #8b Power Mode Grid\n  [Agent C] #8c Cost Config Sheet (P2.2)\n\nPHASE D — Integration (parallel)\n\n  [Agent A] #10 Matrix Peek Sheet (P4)\n  [Agent B] #11 Tag-Template Mapping (P1.2)\n```\n\n## Parallelization Strategy\n\n### Phase A — Sequential Foundation\n\nSchemas, pricing engine, mock data, shared components, sidebar, and hub page. Each step depends on the previous. Single-agent work.\n\n- **#1 Zod Schemas** — `price-matrix.ts`, `dtf-pricing.ts`, `tag-template-mapping.ts`\n- **#2 Pricing Engine** — Pure functions in `lib/pricing-engine.ts`, fully testable\n- **#3 Mock Data** — 3 SP templates, 2 DTF templates, tag mappings, cost configs\n- **#4 Shared Components** — `MarginIndicator`, `CostBreakdownTooltip`, `PricingTemplateCard`\n- **#5 Sidebar** — Add Settings section with Pricing link\n- **#6 Pricing Hub** — Template cards, service type tabs, search\n\n### Phase B — 3 Parallel Agents\n\nOnce the hub is built, three independent editors can be built simultaneously. No shared state between them.\n\n- **Agent A: Setup Wizard** — 5-step modal with industry defaults and live preview (P1.1)\n- **Agent B: Screen Print Editor** — Simple Mode with quantity, color, location, garment sections + margin indicators (P2)\n- **Agent C: DTF Editor** — Sheet-size tiers, customer discounts, rush fees, film types (P3)\n\n### Phase C — 3 Parallel Agents\n\nAfter the base Screen Print Editor, three feature overlays can be added in parallel. Each is self-contained within P2.\n\n- **Agent A: Sandbox + Comparison** — Enter experiment mode, compare side-by-side, apply or discard (P2.1)\n- **Agent B: Power Mode Grid** — TanStack Table inline editing, bulk select, keyboard nav\n- **Agent C: Cost Config Sheet** — Configure production costs for margin calculations (P2.2)\n\n### Phase D — 2 Parallel Agents\n\nIntegration features that connect price matrix to existing verticals.\n\n- **Agent A: Matrix Peek Sheet** — Read-only pricing view from Quote Detail with quick-adjust options (P4)\n- **Agent B: Tag-Template Mapping** — Map customer type tags to pricing templates (P1.2)\n\n## Key Decisions\n\n### Settings-first, Quotes-peek\n\nPricing configuration lives under `/settings/pricing` (new sidebar section). Quotes get a read-only peek sheet with \"override this quote\" or \"edit template\" options. Not a top-level sidebar item.\n\n### Separate matrices for Screen Print vs DTF\n\nFundamentally different pricing models get separate editors (P2 vs P3), not tabs within the same page. Screen print = qty x colors x locations x garment. DTF = sheet length x customer tier x rush x film type.\n\n### Wizard over import\n\nPrintLife has no export capability. The strategy pivots to an exceptional wizard UX with industry-standard defaults pre-filled. CSV import deferred to Phase 2.\n\n### Tag-to-template customer mapping\n\nExisting `customerTypeTagEnum` (retail, sports-school, corporate, storefront-merch, wholesale) maps to pricing templates. When quoting a customer with tag \"sports-school\", the school template auto-applies.\n\n## Scope Coverage\n\nAll 30 interview findings mapped to specific affordances. Every demo must-have covered:\n\n| Demo Must-Have | Affordances |\n|----------------|-------------|\n| Margin visibility | U67, U130, U163, MarginIndicator component, green/yellow/red per cell |\n| 5-minute setup | P1.1 wizard (U20-U37), industry defaults, live preview |\n| What-if scenarios | Sandbox toggle (U53), comparison modal P2.1 (U100-U107) |\n| Quote integration | Matrix Peek P4 (U160-U167), pricing engine feeds quote calculator |\n\n## New Files Created\n\n| File | Purpose |\n|------|---------|\n| `docs/breadboards/price-matrix-breadboard.md` | Full breadboard: 8 places, 167 UI affordances, 80 code affordances, 14 data stores, build order |\n\n## Next Steps\n\n1. **Build Phase A** — Schemas, pricing engine, mock data, shared components, sidebar, hub\n2. **Spawn parallel agents** for Phase B (wizard + SP editor + DTF editor)\n3. **Spawn parallel agents** for Phase C (sandbox + power mode + cost config)\n4. **Integration** — Matrix peek from quotes, tag-template mapping\n5. **Quality gate** — Design audit against 15-point checklist","src/content/sessions/2026-02-11-price-matrix-breadboard.md","b0edf99b871ddbba",{"html":1456,"metadata":1457},"\u003Ch2 id=\"at-a-glance\">At a Glance\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Stat\u003C/th>\u003Cth>Value\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>Places\u003C/td>\u003Ctd>8\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>UI Affordances\u003C/td>\u003Ctd>167\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Code Affordances\u003C/td>\u003Ctd>80\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Data Stores\u003C/td>\u003Ctd>14\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Cp>The breadboard maps the full Price Matrix vertical: a centralized pricing engine living under Settings, with a peek/shortcut from Quotes. Two service types (Screen Print + DTF), multiple templates with tag-based customer mapping, real-time margin indicators, sandbox what-if mode, and a 5-minute setup wizard.\u003C/p>\n\u003Ch2 id=\"source-document\">Source Document\u003C/h2>\n\u003Ch3 id=\"breadboard-blueprint\">Breadboard Blueprint\u003C/h3>\n\u003Cp>\u003Ca href=\"https://github.com/cmbays/print-4ink/blob/session/0210-price-matrix/docs/breadboards/price-matrix-breadboard.md\">docs/breadboards/price-matrix-breadboard.md\u003C/a>\u003C/p>\n\u003Cp>Full affordance tables, wiring verification, component boundaries, and scope coverage matrix.\u003C/p>\n\u003Ch2 id=\"places-mapped\">Places Mapped\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>ID\u003C/th>\u003Cth>Type\u003C/th>\u003Cth>Name\u003C/th>\u003Cth>Route\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>P1\u003C/td>\u003Ctd>Page\u003C/td>\u003Ctd>Pricing Hub\u003C/td>\u003Ctd>/settings/pricing\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>P1.1\u003C/td>\u003Ctd>Modal\u003C/td>\u003Ctd>New Template Wizard\u003C/td>\u003Ctd>5-step setup\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>P1.2\u003C/td>\u003Ctd>Sheet\u003C/td>\u003Ctd>Tag-Template Mapping\u003C/td>\u003Ctd>customer tag → template\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>P2\u003C/td>\u003Ctd>Page\u003C/td>\u003Ctd>Screen Print Matrix Editor\u003C/td>\u003Ctd>/settings/pricing/screen-print/[id]\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>P2.1\u003C/td>\u003Ctd>Modal\u003C/td>\u003Ctd>Side-by-Side Comparison\u003C/td>\u003Ctd>current vs. proposed\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>P2.2\u003C/td>\u003Ctd>Sheet\u003C/td>\u003Ctd>Cost Configuration\u003C/td>\u003Ctd>garment + ink + overhead\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>P3\u003C/td>\u003Ctd>Page\u003C/td>\u003Ctd>DTF Matrix Editor\u003C/td>\u003Ctd>/settings/pricing/dtf/[id]\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>P4\u003C/td>\u003Ctd>Sheet\u003C/td>\u003Ctd>Matrix Peek (from Quotes)\u003C/td>\u003Ctd>read-only + quick adjust\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"build-plan--critical-path\">Build Plan — Critical Path\u003C/h2>\n\u003Cp>The build follows a dependency chain with three parallelization windows. Foundation work is sequential, then the plan fans out.\u003C/p>\n\u003Cpre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>PHASE A — Foundation (sequential)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>#1 Schemas → #2 Pricing Engine → #3 Mock Data\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>     |\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>#4 Shared Components (MarginIndicator, CostBreakdownTooltip)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>     |\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>#5 Sidebar Update + #6 Pricing Hub\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>PHASE B — Editors (parallel after Hub)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  [Agent A] #7 Setup Wizard (P1.1)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  [Agent B] #8 Screen Print Editor (P2)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  [Agent C] #9 DTF Editor (P3)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>PHASE C — Features (parallel after SP Editor)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  [Agent A] #8a Sandbox + Comparison (P2.1)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  [Agent B] #8b Power Mode Grid\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  [Agent C] #8c Cost Config Sheet (P2.2)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>PHASE D — Integration (parallel)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  [Agent A] #10 Matrix Peek Sheet (P4)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  [Agent B] #11 Tag-Template Mapping (P1.2)\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"parallelization-strategy\">Parallelization Strategy\u003C/h2>\n\u003Ch3 id=\"phase-a--sequential-foundation\">Phase A — Sequential Foundation\u003C/h3>\n\u003Cp>Schemas, pricing engine, mock data, shared components, sidebar, and hub page. Each step depends on the previous. Single-agent work.\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>#1 Zod Schemas\u003C/strong> — \u003Ccode>price-matrix.ts\u003C/code>, \u003Ccode>dtf-pricing.ts\u003C/code>, \u003Ccode>tag-template-mapping.ts\u003C/code>\u003C/li>\n\u003Cli>\u003Cstrong>#2 Pricing Engine\u003C/strong> — Pure functions in \u003Ccode>lib/pricing-engine.ts\u003C/code>, fully testable\u003C/li>\n\u003Cli>\u003Cstrong>#3 Mock Data\u003C/strong> — 3 SP templates, 2 DTF templates, tag mappings, cost configs\u003C/li>\n\u003Cli>\u003Cstrong>#4 Shared Components\u003C/strong> — \u003Ccode>MarginIndicator\u003C/code>, \u003Ccode>CostBreakdownTooltip\u003C/code>, \u003Ccode>PricingTemplateCard\u003C/code>\u003C/li>\n\u003Cli>\u003Cstrong>#5 Sidebar\u003C/strong> — Add Settings section with Pricing link\u003C/li>\n\u003Cli>\u003Cstrong>#6 Pricing Hub\u003C/strong> — Template cards, service type tabs, search\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"phase-b--3-parallel-agents\">Phase B — 3 Parallel Agents\u003C/h3>\n\u003Cp>Once the hub is built, three independent editors can be built simultaneously. No shared state between them.\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Agent A: Setup Wizard\u003C/strong> — 5-step modal with industry defaults and live preview (P1.1)\u003C/li>\n\u003Cli>\u003Cstrong>Agent B: Screen Print Editor\u003C/strong> — Simple Mode with quantity, color, location, garment sections + margin indicators (P2)\u003C/li>\n\u003Cli>\u003Cstrong>Agent C: DTF Editor\u003C/strong> — Sheet-size tiers, customer discounts, rush fees, film types (P3)\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"phase-c--3-parallel-agents\">Phase C — 3 Parallel Agents\u003C/h3>\n\u003Cp>After the base Screen Print Editor, three feature overlays can be added in parallel. Each is self-contained within P2.\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Agent A: Sandbox + Comparison\u003C/strong> — Enter experiment mode, compare side-by-side, apply or discard (P2.1)\u003C/li>\n\u003Cli>\u003Cstrong>Agent B: Power Mode Grid\u003C/strong> — TanStack Table inline editing, bulk select, keyboard nav\u003C/li>\n\u003Cli>\u003Cstrong>Agent C: Cost Config Sheet\u003C/strong> — Configure production costs for margin calculations (P2.2)\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"phase-d--2-parallel-agents\">Phase D — 2 Parallel Agents\u003C/h3>\n\u003Cp>Integration features that connect price matrix to existing verticals.\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Agent A: Matrix Peek Sheet\u003C/strong> — Read-only pricing view from Quote Detail with quick-adjust options (P4)\u003C/li>\n\u003Cli>\u003Cstrong>Agent B: Tag-Template Mapping\u003C/strong> — Map customer type tags to pricing templates (P1.2)\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"key-decisions\">Key Decisions\u003C/h2>\n\u003Ch3 id=\"settings-first-quotes-peek\">Settings-first, Quotes-peek\u003C/h3>\n\u003Cp>Pricing configuration lives under \u003Ccode>/settings/pricing\u003C/code> (new sidebar section). Quotes get a read-only peek sheet with “override this quote” or “edit template” options. Not a top-level sidebar item.\u003C/p>\n\u003Ch3 id=\"separate-matrices-for-screen-print-vs-dtf\">Separate matrices for Screen Print vs DTF\u003C/h3>\n\u003Cp>Fundamentally different pricing models get separate editors (P2 vs P3), not tabs within the same page. Screen print = qty x colors x locations x garment. DTF = sheet length x customer tier x rush x film type.\u003C/p>\n\u003Ch3 id=\"wizard-over-import\">Wizard over import\u003C/h3>\n\u003Cp>PrintLife has no export capability. The strategy pivots to an exceptional wizard UX with industry-standard defaults pre-filled. CSV import deferred to Phase 2.\u003C/p>\n\u003Ch3 id=\"tag-to-template-customer-mapping\">Tag-to-template customer mapping\u003C/h3>\n\u003Cp>Existing \u003Ccode>customerTypeTagEnum\u003C/code> (retail, sports-school, corporate, storefront-merch, wholesale) maps to pricing templates. When quoting a customer with tag “sports-school”, the school template auto-applies.\u003C/p>\n\u003Ch2 id=\"scope-coverage\">Scope Coverage\u003C/h2>\n\u003Cp>All 30 interview findings mapped to specific affordances. Every demo must-have covered:\u003C/p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Demo Must-Have\u003C/th>\u003Cth>Affordances\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>Margin visibility\u003C/td>\u003Ctd>U67, U130, U163, MarginIndicator component, green/yellow/red per cell\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>5-minute setup\u003C/td>\u003Ctd>P1.1 wizard (U20-U37), industry defaults, live preview\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>What-if scenarios\u003C/td>\u003Ctd>Sandbox toggle (U53), comparison modal P2.1 (U100-U107)\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Quote integration\u003C/td>\u003Ctd>Matrix Peek P4 (U160-U167), pricing engine feeds quote calculator\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"new-files-created\">New Files Created\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>File\u003C/th>\u003Cth>Purpose\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>\u003Ccode>docs/breadboards/price-matrix-breadboard.md\u003C/code>\u003C/td>\u003Ctd>Full breadboard: 8 places, 167 UI affordances, 80 code affordances, 14 data stores, build order\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"next-steps\">Next Steps\u003C/h2>\n\u003Col>\n\u003Cli>\u003Cstrong>Build Phase A\u003C/strong> — Schemas, pricing engine, mock data, shared components, sidebar, hub\u003C/li>\n\u003Cli>\u003Cstrong>Spawn parallel agents\u003C/strong> for Phase B (wizard + SP editor + DTF editor)\u003C/li>\n\u003Cli>\u003Cstrong>Spawn parallel agents\u003C/strong> for Phase C (sandbox + power mode + cost config)\u003C/li>\n\u003Cli>\u003Cstrong>Integration\u003C/strong> — Matrix peek from quotes, tag-template mapping\u003C/li>\n\u003Cli>\u003Cstrong>Quality gate\u003C/strong> — Design audit against 15-point checklist\u003C/li>\n\u003C/ol>",{"headings":1458,"localImagePaths":1505,"remoteImagePaths":1506,"frontmatter":1507,"imagePaths":1511},[1459,1460,1461,1464,1467,1470,1473,1476,1479,1482,1485,1486,1489,1492,1495,1498,1501,1504],{"depth":34,"slug":1276,"text":1277},{"depth":34,"slug":1273,"text":1274},{"depth":40,"slug":1462,"text":1463},"breadboard-blueprint","Breadboard Blueprint",{"depth":34,"slug":1465,"text":1466},"places-mapped","Places Mapped",{"depth":34,"slug":1468,"text":1469},"build-plan--critical-path","Build Plan — Critical Path",{"depth":34,"slug":1471,"text":1472},"parallelization-strategy","Parallelization Strategy",{"depth":40,"slug":1474,"text":1475},"phase-a--sequential-foundation","Phase A — Sequential Foundation",{"depth":40,"slug":1477,"text":1478},"phase-b--3-parallel-agents","Phase B — 3 Parallel Agents",{"depth":40,"slug":1480,"text":1481},"phase-c--3-parallel-agents","Phase C — 3 Parallel Agents",{"depth":40,"slug":1483,"text":1484},"phase-d--2-parallel-agents","Phase D — 2 Parallel Agents",{"depth":34,"slug":1343,"text":1344},{"depth":40,"slug":1487,"text":1488},"settings-first-quotes-peek","Settings-first, Quotes-peek",{"depth":40,"slug":1490,"text":1491},"separate-matrices-for-screen-print-vs-dtf","Separate matrices for Screen Print vs DTF",{"depth":40,"slug":1493,"text":1494},"wizard-over-import","Wizard over import",{"depth":40,"slug":1496,"text":1497},"tag-to-template-customer-mapping","Tag-to-template customer mapping",{"depth":34,"slug":1499,"text":1500},"scope-coverage","Scope Coverage",{"depth":34,"slug":1502,"text":1503},"new-files-created","New Files Created",{"depth":34,"slug":170,"text":171},[],[],{"title":1446,"subtitle":1447,"date":1508,"phase":17,"vertical":971,"verticalSecondary":1509,"stage":187,"tags":1510,"sessionId":1451,"branch":974,"status":25},["Date","2026-02-11T00:00:00.000Z"],[],[189,22],[],"2026-02-12-price-matrix-build",{"id":1512,"data":1514,"body":1522,"filePath":1523,"digest":1524,"rendered":1525},{"title":1515,"subtitle":1516,"date":1517,"phase":17,"vertical":971,"verticalSecondary":1518,"stage":75,"tags":1519,"sessionId":1520,"branch":1521,"status":25},"Price Matrix Build","Full implementation of the pricing engine vertical — schemas, editors, Power Grid, sandbox mode, and the useSpreadsheetEditor data grid widget",["Date","2026-02-12T00:00:00.000Z"],[],[77,75,304],"c564ffea-778c-43d0-a35f-2bb32431d23b","session/0211-price-matrix-build","## At a Glance\n\n| Stat | Value |\n|------|-------|\n| Files Changed | 29 |\n| Lines Added | 8,552 |\n| Commits | 10 |\n| Build Phases | 5 |\n\nThe complete Price Matrix vertical built across 5 phases: foundation schemas and pricing engine, three parallel editor builds, advanced features (sandbox, power grid, cost config), cross-vertical integration, and final polish. The crown jewel is `useSpreadsheetEditor`, a 777-line reusable hook powering the Power Grid's Excel-like editing UX.\n\n## Build Timeline\n\n```\nPHASE A — Foundation (db27e22)\n\n  Zod schemas → Pricing engine (568 LOC) → Mock data → Pricing Hub\n\nPHASE B — Editors (8eb4bf0)\n\n  [Parallel] Setup Wizard + Screen Print Editor + DTF Editor\n  15 new files, +3,672 lines\n\nPHASE C — Advanced Features (166e9bc)\n\n  [Parallel] Sandbox Mode + Power Grid + Cost Config\n  6 new files, +1,400 lines\n\nPHASE D — Integration (c6eca5a)\n\n  [Parallel] Tag-Template Mapper + Matrix Peek Sheet + big.js migration\n\nPHASE E — Polish (5810ddd)\n\n  Power Grid UX refinements, CodeRabbit review fixes, a11y improvements\n```\n\n## What Was Built\n\n### Pricing Hub\n\nTemplate cards with service type tabs (Screen Print / DTF), search filter, and a \"Create New Template\" call-to-action. The entry point for all pricing configuration. Each card shows the template name, service type, last-modified date, and active/draft status.\n\n`/settings/pricing`\n\n### Setup Wizard\n\n4-step guided flow: name and service type, quantity tiers, color pricing, review and create. Industry-standard defaults pre-filled at every step (standard break points at 12/24/48/72/144+, $25/screen setup, $0.50/color-hit base rate). A new shop owner can have pricing configured in under 5 minutes.\n\n### Screen Print Editor\n\nSimple Mode with 5 editing sections: ColorPricingGrid (quantity tiers x color counts), QuantityTierEditor (add/remove break points), LocationUpchargeEditor (front/back/sleeve/pocket), GarmentTypePricingEditor (t-shirt/hoodie/polo markup), and SetupFeeEditor (per-screen + bulk waiver). Real-time margin indicators (green/yellow/red) on every price cell with cost breakdown tooltips.\n\n`/settings/pricing/screen-print/[id]`\n\n### DTF Editor\n\nDTFSheetTierEditor for sheet-size-based pricing with DTFPricingCalculator for customer discounts and rush fees. Supports multiple sheet sizes (8.5x11 through 24x36), film type surcharges, and volume discount tiers.\n\n`/settings/pricing/dtf/[id]`\n\n### Power Grid\n\nTanStack Table spreadsheet with inline cell editing, keyboard navigation (arrow keys, Tab, Enter, Escape), cell selection with visual highlight, and column sorting. Toggle between Simple Mode and Power Mode via a switch in the editor header. Built on the `useSpreadsheetEditor` hook.\n\n### Sandbox Mode\n\nToggle to enter experimental pricing mode. Make changes without affecting live prices. A ComparisonView modal shows side-by-side diff of current vs. proposed values with percentage change indicators. Apply all changes or discard and revert.\n\n### Cost Configuration Sheet\n\nConfigure garment cost, ink cost per color, and overhead rate. These values feed margin calculations across all price cells in real time. Changes propagate instantly to margin indicators throughout the editor.\n\n### Tag-Template Mapper\n\nMap customer type tags (retail, wholesale, sports-school, corporate, storefront-merch) to pricing templates. When quoting a customer with tag \"sports-school\", the school pricing template auto-applies. Configured from the Pricing Hub.\n\n### Matrix Peek Sheet\n\nRead-only pricing preview accessible as a slide-in sheet from the Quote Detail page. Shows the pricing matrix relevant to the current quote's service type and customer tag, with a link to open the full editor.\n\n## The useSpreadsheetEditor Widget\n\nThe crown jewel of the build — a reusable 777-line React hook that powers the Power Grid. It manages all keyboard, mouse, clipboard, and edit state for a TanStack Table-based spreadsheet.\n\n### Architecture\n\n```\nReact Context (SpreadsheetContext)\n  |\n  +-- selectedCell    — which cell has focus\n  +-- editingCell     — which cell is in edit mode\n  +-- editValue       — current input value\n  +-- handlers        — onCellClick, onCellDblClick, onKeyDown, onBlur\n  |\nPriceCell (extracted component)\n  |\n  Reads state from Context, NOT from column defs\n  Column defs are module-level and stable (never recreated)\n  |\nTanStack Table\n  |\n  Stable column defs = no cell DOM recreation on state change\n```\n\n### Key Patterns\n\n### 1. Stable Column Defs\n\n**Problem:** Column defs that depend on interaction state cause cell DOM recreation on every keystroke, unmounting the edit input and losing focus.\n\n**Fix:** React Context + extracted PriceCell component. Column defs stay module-level and never change.\n\nTanStack Table uses column defs as a dependency for memoization. If the column def array identity changes, all cells re-render from scratch. When interaction state (selectedCell, editValue) was included in column def closures, every keystroke triggered a full table remount.\n\n### 2. requestAnimationFrame Race Condition\n\n**Problem:** mouseDown schedules rAF to focus the wrapper div. If dblclick fires before the rAF callback, the rAF steals focus from the edit input.\n\n**Fix:** Ref mirror (editingCellRef) checked inside the rAF callback. If a cell entered edit mode between mouseDown and rAF execution, the focus call is skipped.\n\nThe sequence: mouseDown fires, schedules rAF. dblclick fires (same event chain), enters edit mode, focuses the input. rAF callback runs, calls wrapper.focus(), stealing focus from the input. The ref mirror breaks this cycle.\n\n### 3. skipNextBlur Pattern\n\n**Problem:** Keyboard commit (Enter/Tab) triggers a blur event on the input, causing a double-commit.\n\n**Fix:** Set skipNextBlur.current = true before the keyboard commit. The blur handler checks this ref and skips its commit logic.\n\nEnter/Tab both commit the edit value and move selection. The commit changes state, which causes the input to unmount, which fires blur. Without the skipNextBlur guard, the value would be committed twice.\n\n### 4. editInputKeyDown Isolation\n\n**Problem:** Keyboard events on the wrapper div interfere with text editing in the input field.\n\n**Fix:** Attach editInputKeyDown directly to the input element with e.stopPropagation(). Handles Tab/Enter/Escape/Arrows in edit mode.\n\nThe wrapper div handles arrow key navigation for cell selection. When an input is active, arrow keys should move the cursor within the text, not change the selected cell. Stopping propagation at the input level prevents the wrapper handler from seeing these events.\n\n### How to Reuse\n\n```ts\nconst {\n  selectedCell, editingCell, editValue,\n  handleCellClick, handleCellDoubleClick,\n  handleKeyDown, handleBlur, handleEditChange,\n  setEditingCell, setEditValue\n} = useSpreadsheetEditor({\n  data,          // T[] — row data\n  columns,       // ColumnDef[] — stable, module-level\n  onCellChange,  // (rowIndex, colKey, value) => void\n})\n```\n\n## Key Learnings\n\n**Financial arithmetic:** Never use JavaScript floating-point (`+`, `-`, `*`, `/`) for monetary calculations. IEEE 754 causes silent errors (e.g., `0.1 + 0.2 = 0.30000000000000004`). Use `big.js` via the `lib/helpers/money.ts` wrapper: `money()`, `round2()`, `toNumber()`. Schema invariants use `Big.eq()` for exact comparison.\n\n### TanStack Table Column Def Stability\n\nColumn defs that depend on React state cause cell DOM recreation on every render. The entire table remounts, unmounting inputs and losing focus. Solution: React Context for interaction state, extracted cell components that subscribe to context, module-level column defs that never change identity.\n\n### requestAnimationFrame Race Conditions\n\nmouseDown + rAF + dblclick is a dangerous sequence. The rAF callback can execute after the dblclick handler has already changed state (e.g., entered edit mode). Always use ref mirrors to check current state inside rAF callbacks rather than relying on the values captured at scheduling time.\n\n### Parallel Agent Builds\n\nThree agents edited `editor.tsx` concurrently in Phase B and again in Phase C. This worked because changes were in different sections of the file. Lesson: always identify and document conflict zones before assigning parallel work. If two agents need to touch the same function, serialize them.\n\n### Radix Tooltip Hover Bugs\n\nAdjacent tooltips (like margin indicators in a dense grid) need a single shared `\u003CTooltipProvider>` with `skipDelayDuration={300}`, base `sideOffset >= 6`, `data-[state=closed]:pointer-events-none` on content, and `pointer-events-none` on the arrow. Do NOT use `disableHoverableContent` — it causes flickering on small targets.\n\n### React 19: No setState in Effects\n\nESLint now flags `useEffect` to reset form state when a dialog opens. Instead, have the parent conditionally render the dialog (`{showDialog && \u003CDialog />}`) so React unmounts/remounts the component, naturally resetting all `useState` hooks. Cleaner and avoids the flash of stale state.\n\n## File Map\n\n| File | Purpose |\n|------|---------|\n| `lib/schemas/price-matrix.ts` | Zod schemas for SP pricing (161 lines) |\n| `lib/schemas/dtf-pricing.ts` | Zod schemas for DTF pricing (107 lines) |\n| `lib/schemas/tag-template-mapping.ts` | Tag-to-template mapping schema (23 lines) |\n| `lib/pricing-engine.ts` | Pure pricing calculation functions (568 lines) |\n| `lib/helpers/money.ts` | big.js wrapper for safe money math |\n| `lib/hooks/useSpreadsheetEditor.ts` | Spreadsheet editing hook (777 lines) |\n| `app/.../settings/pricing/page.tsx` | Pricing Hub page |\n| `app/.../pricing/screen-print/[id]/editor.tsx` | Screen Print Editor (client component) |\n| `app/.../pricing/dtf/[id]/dtf-editor-client.tsx` | DTF Editor (client component) |\n| `app/.../pricing/_components/` | All shared pricing components |\n\n## PR and Commits\n\n| Hash | Description |\n|------|-------------|\n| db27e22 | **Phase A** — Schemas, pricing engine, mock data, hub page |\n| 8eb4bf0 | **Phase B** — Setup Wizard, Screen Print and DTF editors (15 files, +3,672 lines) |\n| 166e9bc | **Phase C** — Sandbox Mode, Power Grid, Cost Config (6 files, +1,400 lines) |\n| c6eca5a | **Phase D** — Tag-Template Mapper, Matrix Peek Sheet, big.js migration |\n| e95bffc | Quality gate fixes — lint errors, semantic colors, a11y, empty states |\n| eba7a95 | Power Grid UX — remove sort, per-cell overrides, selection enhancements |\n| 7f697be | Configurable max colors, compact header layout |\n| 3e6a095 | Add tooltips to margin legend in Power Grid header |\n| f204c34 | CodeRabbit review — money helper, schema validation, a11y, guards |\n| 5810ddd | CodeRabbit round 2 — maxColors consistency, a11y, input validation |\n\n## Next Steps\n\n1. **Matrix Peek from Quote Detail** — Partially built; needs the Quote Detail page to be wired up for full integration testing\n2. **Tag-Template Mapping** — Built and functional; needs the Customer Management vertical to test the auto-apply flow during quoting\n3. **Quality gate** — Full 15-dimension design audit against the screen audit protocol\n4. **User demo with 4Ink** — Walk through the 5-minute setup wizard, margin indicators, what-if sandbox, and Power Grid editing","src/content/sessions/2026-02-12-price-matrix-build.md","374d21b4498f6c42",{"html":1526,"metadata":1527},"\u003Ch2 id=\"at-a-glance\">At a Glance\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Stat\u003C/th>\u003Cth>Value\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>Files Changed\u003C/td>\u003Ctd>29\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Lines Added\u003C/td>\u003Ctd>8,552\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Commits\u003C/td>\u003Ctd>10\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>Build Phases\u003C/td>\u003Ctd>5\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Cp>The complete Price Matrix vertical built across 5 phases: foundation schemas and pricing engine, three parallel editor builds, advanced features (sandbox, power grid, cost config), cross-vertical integration, and final polish. The crown jewel is \u003Ccode>useSpreadsheetEditor\u003C/code>, a 777-line reusable hook powering the Power Grid’s Excel-like editing UX.\u003C/p>\n\u003Ch2 id=\"build-timeline\">Build Timeline\u003C/h2>\n\u003Cpre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>PHASE A — Foundation (db27e22)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  Zod schemas → Pricing engine (568 LOC) → Mock data → Pricing Hub\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>PHASE B — Editors (8eb4bf0)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  [Parallel] Setup Wizard + Screen Print Editor + DTF Editor\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  15 new files, +3,672 lines\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>PHASE C — Advanced Features (166e9bc)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  [Parallel] Sandbox Mode + Power Grid + Cost Config\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  6 new files, +1,400 lines\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>PHASE D — Integration (c6eca5a)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  [Parallel] Tag-Template Mapper + Matrix Peek Sheet + big.js migration\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>PHASE E — Polish (5810ddd)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  Power Grid UX refinements, CodeRabbit review fixes, a11y improvements\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"what-was-built\">What Was Built\u003C/h2>\n\u003Ch3 id=\"pricing-hub\">Pricing Hub\u003C/h3>\n\u003Cp>Template cards with service type tabs (Screen Print / DTF), search filter, and a “Create New Template” call-to-action. The entry point for all pricing configuration. Each card shows the template name, service type, last-modified date, and active/draft status.\u003C/p>\n\u003Cp>\u003Ccode>/settings/pricing\u003C/code>\u003C/p>\n\u003Ch3 id=\"setup-wizard\">Setup Wizard\u003C/h3>\n\u003Cp>4-step guided flow: name and service type, quantity tiers, color pricing, review and create. Industry-standard defaults pre-filled at every step (standard break points at 12/24/48/72/144+, $25/screen setup, $0.50/color-hit base rate). A new shop owner can have pricing configured in under 5 minutes.\u003C/p>\n\u003Ch3 id=\"screen-print-editor\">Screen Print Editor\u003C/h3>\n\u003Cp>Simple Mode with 5 editing sections: ColorPricingGrid (quantity tiers x color counts), QuantityTierEditor (add/remove break points), LocationUpchargeEditor (front/back/sleeve/pocket), GarmentTypePricingEditor (t-shirt/hoodie/polo markup), and SetupFeeEditor (per-screen + bulk waiver). Real-time margin indicators (green/yellow/red) on every price cell with cost breakdown tooltips.\u003C/p>\n\u003Cp>\u003Ccode>/settings/pricing/screen-print/[id]\u003C/code>\u003C/p>\n\u003Ch3 id=\"dtf-editor\">DTF Editor\u003C/h3>\n\u003Cp>DTFSheetTierEditor for sheet-size-based pricing with DTFPricingCalculator for customer discounts and rush fees. Supports multiple sheet sizes (8.5x11 through 24x36), film type surcharges, and volume discount tiers.\u003C/p>\n\u003Cp>\u003Ccode>/settings/pricing/dtf/[id]\u003C/code>\u003C/p>\n\u003Ch3 id=\"power-grid\">Power Grid\u003C/h3>\n\u003Cp>TanStack Table spreadsheet with inline cell editing, keyboard navigation (arrow keys, Tab, Enter, Escape), cell selection with visual highlight, and column sorting. Toggle between Simple Mode and Power Mode via a switch in the editor header. Built on the \u003Ccode>useSpreadsheetEditor\u003C/code> hook.\u003C/p>\n\u003Ch3 id=\"sandbox-mode\">Sandbox Mode\u003C/h3>\n\u003Cp>Toggle to enter experimental pricing mode. Make changes without affecting live prices. A ComparisonView modal shows side-by-side diff of current vs. proposed values with percentage change indicators. Apply all changes or discard and revert.\u003C/p>\n\u003Ch3 id=\"cost-configuration-sheet\">Cost Configuration Sheet\u003C/h3>\n\u003Cp>Configure garment cost, ink cost per color, and overhead rate. These values feed margin calculations across all price cells in real time. Changes propagate instantly to margin indicators throughout the editor.\u003C/p>\n\u003Ch3 id=\"tag-template-mapper\">Tag-Template Mapper\u003C/h3>\n\u003Cp>Map customer type tags (retail, wholesale, sports-school, corporate, storefront-merch) to pricing templates. When quoting a customer with tag “sports-school”, the school pricing template auto-applies. Configured from the Pricing Hub.\u003C/p>\n\u003Ch3 id=\"matrix-peek-sheet\">Matrix Peek Sheet\u003C/h3>\n\u003Cp>Read-only pricing preview accessible as a slide-in sheet from the Quote Detail page. Shows the pricing matrix relevant to the current quote’s service type and customer tag, with a link to open the full editor.\u003C/p>\n\u003Ch2 id=\"the-usespreadsheeteditor-widget\">The useSpreadsheetEditor Widget\u003C/h2>\n\u003Cp>The crown jewel of the build — a reusable 777-line React hook that powers the Power Grid. It manages all keyboard, mouse, clipboard, and edit state for a TanStack Table-based spreadsheet.\u003C/p>\n\u003Ch3 id=\"architecture\">Architecture\u003C/h3>\n\u003Cpre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>React Context (SpreadsheetContext)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  |\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  +-- selectedCell    — which cell has focus\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  +-- editingCell     — which cell is in edit mode\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  +-- editValue       — current input value\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  +-- handlers        — onCellClick, onCellDblClick, onKeyDown, onBlur\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  |\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>PriceCell (extracted component)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  |\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  Reads state from Context, NOT from column defs\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  Column defs are module-level and stable (never recreated)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  |\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>TanStack Table\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  |\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>  Stable column defs = no cell DOM recreation on state change\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"key-patterns\">Key Patterns\u003C/h3>\n\u003Ch3 id=\"1-stable-column-defs\">1. Stable Column Defs\u003C/h3>\n\u003Cp>\u003Cstrong>Problem:\u003C/strong> Column defs that depend on interaction state cause cell DOM recreation on every keystroke, unmounting the edit input and losing focus.\u003C/p>\n\u003Cp>\u003Cstrong>Fix:\u003C/strong> React Context + extracted PriceCell component. Column defs stay module-level and never change.\u003C/p>\n\u003Cp>TanStack Table uses column defs as a dependency for memoization. If the column def array identity changes, all cells re-render from scratch. When interaction state (selectedCell, editValue) was included in column def closures, every keystroke triggered a full table remount.\u003C/p>\n\u003Ch3 id=\"2-requestanimationframe-race-condition\">2. requestAnimationFrame Race Condition\u003C/h3>\n\u003Cp>\u003Cstrong>Problem:\u003C/strong> mouseDown schedules rAF to focus the wrapper div. If dblclick fires before the rAF callback, the rAF steals focus from the edit input.\u003C/p>\n\u003Cp>\u003Cstrong>Fix:\u003C/strong> Ref mirror (editingCellRef) checked inside the rAF callback. If a cell entered edit mode between mouseDown and rAF execution, the focus call is skipped.\u003C/p>\n\u003Cp>The sequence: mouseDown fires, schedules rAF. dblclick fires (same event chain), enters edit mode, focuses the input. rAF callback runs, calls wrapper.focus(), stealing focus from the input. The ref mirror breaks this cycle.\u003C/p>\n\u003Ch3 id=\"3-skipnextblur-pattern\">3. skipNextBlur Pattern\u003C/h3>\n\u003Cp>\u003Cstrong>Problem:\u003C/strong> Keyboard commit (Enter/Tab) triggers a blur event on the input, causing a double-commit.\u003C/p>\n\u003Cp>\u003Cstrong>Fix:\u003C/strong> Set skipNextBlur.current = true before the keyboard commit. The blur handler checks this ref and skips its commit logic.\u003C/p>\n\u003Cp>Enter/Tab both commit the edit value and move selection. The commit changes state, which causes the input to unmount, which fires blur. Without the skipNextBlur guard, the value would be committed twice.\u003C/p>\n\u003Ch3 id=\"4-editinputkeydown-isolation\">4. editInputKeyDown Isolation\u003C/h3>\n\u003Cp>\u003Cstrong>Problem:\u003C/strong> Keyboard events on the wrapper div interfere with text editing in the input field.\u003C/p>\n\u003Cp>\u003Cstrong>Fix:\u003C/strong> Attach editInputKeyDown directly to the input element with e.stopPropagation(). Handles Tab/Enter/Escape/Arrows in edit mode.\u003C/p>\n\u003Cp>The wrapper div handles arrow key navigation for cell selection. When an input is active, arrow keys should move the cursor within the text, not change the selected cell. Stopping propagation at the input level prevents the wrapper handler from seeing these events.\u003C/p>\n\u003Ch3 id=\"how-to-reuse\">How to Reuse\u003C/h3>\n\u003Cpre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"ts\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F97583\">const\u003C/span>\u003Cspan style=\"color:#E1E4E8\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#79B8FF\">  selectedCell\u003C/span>\u003Cspan style=\"color:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#79B8FF\">editingCell\u003C/span>\u003Cspan style=\"color:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#79B8FF\">editValue\u003C/span>\u003Cspan style=\"color:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#79B8FF\">  handleCellClick\u003C/span>\u003Cspan style=\"color:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#79B8FF\">handleCellDoubleClick\u003C/span>\u003Cspan style=\"color:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#79B8FF\">  handleKeyDown\u003C/span>\u003Cspan style=\"color:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#79B8FF\">handleBlur\u003C/span>\u003Cspan style=\"color:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#79B8FF\">handleEditChange\u003C/span>\u003Cspan style=\"color:#E1E4E8\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#79B8FF\">  setEditingCell\u003C/span>\u003Cspan style=\"color:#E1E4E8\">, \u003C/span>\u003Cspan style=\"color:#79B8FF\">setEditValue\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">} \u003C/span>\u003Cspan style=\"color:#F97583\">=\u003C/span>\u003Cspan style=\"color:#B392F0\"> useSpreadsheetEditor\u003C/span>\u003Cspan style=\"color:#E1E4E8\">({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">  data,          \u003C/span>\u003Cspan style=\"color:#6A737D\">// T[] — row data\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">  columns,       \u003C/span>\u003Cspan style=\"color:#6A737D\">// ColumnDef[] — stable, module-level\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">  onCellChange,  \u003C/span>\u003Cspan style=\"color:#6A737D\">// (rowIndex, colKey, value) => void\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E1E4E8\">})\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"key-learnings\">Key Learnings\u003C/h2>\n\u003Cp>\u003Cstrong>Financial arithmetic:\u003C/strong> Never use JavaScript floating-point (\u003Ccode>+\u003C/code>, \u003Ccode>-\u003C/code>, \u003Ccode>*\u003C/code>, \u003Ccode>/\u003C/code>) for monetary calculations. IEEE 754 causes silent errors (e.g., \u003Ccode>0.1 + 0.2 = 0.30000000000000004\u003C/code>). Use \u003Ccode>big.js\u003C/code> via the \u003Ccode>lib/helpers/money.ts\u003C/code> wrapper: \u003Ccode>money()\u003C/code>, \u003Ccode>round2()\u003C/code>, \u003Ccode>toNumber()\u003C/code>. Schema invariants use \u003Ccode>Big.eq()\u003C/code> for exact comparison.\u003C/p>\n\u003Ch3 id=\"tanstack-table-column-def-stability\">TanStack Table Column Def Stability\u003C/h3>\n\u003Cp>Column defs that depend on React state cause cell DOM recreation on every render. The entire table remounts, unmounting inputs and losing focus. Solution: React Context for interaction state, extracted cell components that subscribe to context, module-level column defs that never change identity.\u003C/p>\n\u003Ch3 id=\"requestanimationframe-race-conditions\">requestAnimationFrame Race Conditions\u003C/h3>\n\u003Cp>mouseDown + rAF + dblclick is a dangerous sequence. The rAF callback can execute after the dblclick handler has already changed state (e.g., entered edit mode). Always use ref mirrors to check current state inside rAF callbacks rather than relying on the values captured at scheduling time.\u003C/p>\n\u003Ch3 id=\"parallel-agent-builds\">Parallel Agent Builds\u003C/h3>\n\u003Cp>Three agents edited \u003Ccode>editor.tsx\u003C/code> concurrently in Phase B and again in Phase C. This worked because changes were in different sections of the file. Lesson: always identify and document conflict zones before assigning parallel work. If two agents need to touch the same function, serialize them.\u003C/p>\n\u003Ch3 id=\"radix-tooltip-hover-bugs\">Radix Tooltip Hover Bugs\u003C/h3>\n\u003Cp>Adjacent tooltips (like margin indicators in a dense grid) need a single shared \u003Ccode>&#x3C;TooltipProvider>\u003C/code> with \u003Ccode>skipDelayDuration={300}\u003C/code>, base \u003Ccode>sideOffset >= 6\u003C/code>, \u003Ccode>data-[state=closed]:pointer-events-none\u003C/code> on content, and \u003Ccode>pointer-events-none\u003C/code> on the arrow. Do NOT use \u003Ccode>disableHoverableContent\u003C/code> — it causes flickering on small targets.\u003C/p>\n\u003Ch3 id=\"react-19-no-setstate-in-effects\">React 19: No setState in Effects\u003C/h3>\n\u003Cp>ESLint now flags \u003Ccode>useEffect\u003C/code> to reset form state when a dialog opens. Instead, have the parent conditionally render the dialog (\u003Ccode>{showDialog &#x26;&#x26; &#x3C;Dialog />}\u003C/code>) so React unmounts/remounts the component, naturally resetting all \u003Ccode>useState\u003C/code> hooks. Cleaner and avoids the flash of stale state.\u003C/p>\n\u003Ch2 id=\"file-map\">File Map\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>File\u003C/th>\u003Cth>Purpose\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>\u003Ccode>lib/schemas/price-matrix.ts\u003C/code>\u003C/td>\u003Ctd>Zod schemas for SP pricing (161 lines)\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>lib/schemas/dtf-pricing.ts\u003C/code>\u003C/td>\u003Ctd>Zod schemas for DTF pricing (107 lines)\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>lib/schemas/tag-template-mapping.ts\u003C/code>\u003C/td>\u003Ctd>Tag-to-template mapping schema (23 lines)\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>lib/pricing-engine.ts\u003C/code>\u003C/td>\u003Ctd>Pure pricing calculation functions (568 lines)\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>lib/helpers/money.ts\u003C/code>\u003C/td>\u003Ctd>big.js wrapper for safe money math\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>lib/hooks/useSpreadsheetEditor.ts\u003C/code>\u003C/td>\u003Ctd>Spreadsheet editing hook (777 lines)\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>app/.../settings/pricing/page.tsx\u003C/code>\u003C/td>\u003Ctd>Pricing Hub page\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>app/.../pricing/screen-print/[id]/editor.tsx\u003C/code>\u003C/td>\u003Ctd>Screen Print Editor (client component)\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>app/.../pricing/dtf/[id]/dtf-editor-client.tsx\u003C/code>\u003C/td>\u003Ctd>DTF Editor (client component)\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Ccode>app/.../pricing/_components/\u003C/code>\u003C/td>\u003Ctd>All shared pricing components\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"pr-and-commits\">PR and Commits\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>Hash\u003C/th>\u003Cth>Description\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>db27e22\u003C/td>\u003Ctd>\u003Cstrong>Phase A\u003C/strong> — Schemas, pricing engine, mock data, hub page\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>8eb4bf0\u003C/td>\u003Ctd>\u003Cstrong>Phase B\u003C/strong> — Setup Wizard, Screen Print and DTF editors (15 files, +3,672 lines)\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>166e9bc\u003C/td>\u003Ctd>\u003Cstrong>Phase C\u003C/strong> — Sandbox Mode, Power Grid, Cost Config (6 files, +1,400 lines)\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>c6eca5a\u003C/td>\u003Ctd>\u003Cstrong>Phase D\u003C/strong> — Tag-Template Mapper, Matrix Peek Sheet, big.js migration\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>e95bffc\u003C/td>\u003Ctd>Quality gate fixes — lint errors, semantic colors, a11y, empty states\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>eba7a95\u003C/td>\u003Ctd>Power Grid UX — remove sort, per-cell overrides, selection enhancements\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>7f697be\u003C/td>\u003Ctd>Configurable max colors, compact header layout\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>3e6a095\u003C/td>\u003Ctd>Add tooltips to margin legend in Power Grid header\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>f204c34\u003C/td>\u003Ctd>CodeRabbit review — money helper, schema validation, a11y, guards\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>5810ddd\u003C/td>\u003Ctd>CodeRabbit round 2 — maxColors consistency, a11y, input validation\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"next-steps\">Next Steps\u003C/h2>\n\u003Col>\n\u003Cli>\u003Cstrong>Matrix Peek from Quote Detail\u003C/strong> — Partially built; needs the Quote Detail page to be wired up for full integration testing\u003C/li>\n\u003Cli>\u003Cstrong>Tag-Template Mapping\u003C/strong> — Built and functional; needs the Customer Management vertical to test the auto-apply flow during quoting\u003C/li>\n\u003Cli>\u003Cstrong>Quality gate\u003C/strong> — Full 15-dimension design audit against the screen audit protocol\u003C/li>\n\u003Cli>\u003Cstrong>User demo with 4Ink\u003C/strong> — Walk through the 5-minute setup wizard, margin indicators, what-if sandbox, and Power Grid editing\u003C/li>\n\u003C/ol>",{"headings":1528,"localImagePaths":1610,"remoteImagePaths":1611,"frontmatter":1612,"imagePaths":1616},[1529,1530,1533,1534,1537,1540,1543,1546,1549,1552,1555,1558,1561,1564,1567,1570,1573,1576,1579,1582,1585,1588,1591,1594,1597,1600,1603,1606,1609],{"depth":34,"slug":1276,"text":1277},{"depth":34,"slug":1531,"text":1532},"build-timeline","Build Timeline",{"depth":34,"slug":138,"text":139},{"depth":40,"slug":1535,"text":1536},"pricing-hub","Pricing Hub",{"depth":40,"slug":1538,"text":1539},"setup-wizard","Setup Wizard",{"depth":40,"slug":1541,"text":1542},"screen-print-editor","Screen Print Editor",{"depth":40,"slug":1544,"text":1545},"dtf-editor","DTF Editor",{"depth":40,"slug":1547,"text":1548},"power-grid","Power Grid",{"depth":40,"slug":1550,"text":1551},"sandbox-mode","Sandbox Mode",{"depth":40,"slug":1553,"text":1554},"cost-configuration-sheet","Cost Configuration Sheet",{"depth":40,"slug":1556,"text":1557},"tag-template-mapper","Tag-Template Mapper",{"depth":40,"slug":1559,"text":1560},"matrix-peek-sheet","Matrix Peek Sheet",{"depth":34,"slug":1562,"text":1563},"the-usespreadsheeteditor-widget","The useSpreadsheetEditor Widget",{"depth":40,"slug":1565,"text":1566},"architecture","Architecture",{"depth":40,"slug":1568,"text":1569},"key-patterns","Key Patterns",{"depth":40,"slug":1571,"text":1572},"1-stable-column-defs","1. Stable Column Defs",{"depth":40,"slug":1574,"text":1575},"2-requestanimationframe-race-condition","2. requestAnimationFrame Race Condition",{"depth":40,"slug":1577,"text":1578},"3-skipnextblur-pattern","3. skipNextBlur Pattern",{"depth":40,"slug":1580,"text":1581},"4-editinputkeydown-isolation","4. editInputKeyDown Isolation",{"depth":40,"slug":1583,"text":1584},"how-to-reuse","How to Reuse",{"depth":34,"slug":1586,"text":1587},"key-learnings","Key Learnings",{"depth":40,"slug":1589,"text":1590},"tanstack-table-column-def-stability","TanStack Table Column Def Stability",{"depth":40,"slug":1592,"text":1593},"requestanimationframe-race-conditions","requestAnimationFrame Race Conditions",{"depth":40,"slug":1595,"text":1596},"parallel-agent-builds","Parallel Agent Builds",{"depth":40,"slug":1598,"text":1599},"radix-tooltip-hover-bugs","Radix Tooltip Hover Bugs",{"depth":40,"slug":1601,"text":1602},"react-19-no-setstate-in-effects","React 19: No setState in Effects",{"depth":34,"slug":1604,"text":1605},"file-map","File Map",{"depth":34,"slug":1607,"text":1608},"pr-and-commits","PR and Commits",{"depth":34,"slug":170,"text":171},[],[],{"title":1515,"subtitle":1516,"date":1613,"phase":17,"vertical":971,"verticalSecondary":1614,"stage":75,"tags":1615,"sessionId":1520,"branch":1521,"status":25},["Date","2026-02-12T00:00:00.000Z"],[],[77,75,304],[]]