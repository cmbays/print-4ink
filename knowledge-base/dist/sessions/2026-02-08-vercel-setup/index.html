<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content="4Ink demo deployment infrastructure"><title>Vercel Setup with Access Code Protection &mdash; Screen Print Pro KB</title><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet"><link rel="stylesheet" href="/_astro/decisions.DGAibQh0.css"></head> <body>  <main class="max-w-[720px] mx-auto px-6 py-12"> <!-- Back link --> <a href="/" class="inline-flex items-center gap-1.5 text-text-muted text-sm hover:text-action transition-colors mb-8"> <span>&larr;</span> Back to Index
</a> <!-- Tag pills --> <div class="flex items-center gap-2 mb-4"> <span class="text-[11px] font-semibold uppercase tracking-wide px-2 py-0.5 rounded bg-success/12 text-success"> build </span> </div> <!-- Title --> <h1 class="text-[28px] font-bold tracking-tight leading-tight mb-2">Vercel Setup with Access Code Protection</h1> <!-- Subtitle --> <p class="text-[15px] text-text-secondary leading-relaxed mb-6">4Ink demo deployment infrastructure</p> <!-- Meta grid --> <div class="border border-border rounded-lg overflow-hidden mb-6"> <div class="grid grid-cols-2"> <!-- Row 1 --> <div class="px-4 py-3 border-b border-border"> <div class="text-[11px] font-semibold uppercase tracking-wide text-text-muted mb-1">Date</div> <div class="text-sm text-text-primary">2026-02-08</div> </div> <div class="px-4 py-3 border-b border-border border-l border-border"> <div class="text-[11px] font-semibold uppercase tracking-wide text-text-muted mb-1">Branch</div> <div class="text-sm"> <code class="font-mono text-xs bg-bg-surface px-1.5 py-0.5 rounded text-action">feat/vercel-setup</code> </div> </div> <!-- Row 2 --> <div class="px-4 py-3 border-b border-border"> <div class="text-[11px] font-semibold uppercase tracking-wide text-text-muted mb-1">Phase</div> <div class="text-sm text-text-primary">Phase 1</div> </div> <div class="px-4 py-3 border-b border-border border-l border-border"> <div class="text-[11px] font-semibold uppercase tracking-wide text-text-muted mb-1">Vertical</div> <div class="text-sm text-text-primary"> <a href="/verticals/meta" class="text-action hover:underline">Meta</a>  </div> </div> <!-- Row 3 --> <div class="px-4 py-3"> <div class="text-[11px] font-semibold uppercase tracking-wide text-text-muted mb-1">Stage</div> <div class="text-sm"> <a href="/verticals/meta/build" class="inline-flex items-center bg-bg-surface text-action text-xs font-medium px-2 py-0.5 rounded hover:bg-action/10 transition-colors"> Build </a> </div> </div> <div class="px-4 py-3 border-l border-border"> <div class="text-[11px] font-semibold uppercase tracking-wide text-text-muted mb-1">Status</div> <div class="text-sm font-medium text-success"> Complete </div> </div> </div> </div> <!-- Workflow chain --> <div class="mb-6"> <div class="text-[11px] font-semibold uppercase tracking-wide text-text-muted mb-2">Workflow Chain</div> <div class="bg-bg-elevated border border-border rounded-lg px-4 py-2"> <div class="overflow-x-auto"><div class="flex items-center gap-1.5 min-w-max py-2"><a href="/sessions/2026-02-07-shaping-skills" class="inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md text-[12px] border transition-colors whitespace-nowrap bg-bg-surface border-border text-text-secondary hover:text-text-primary hover:border-action/20" title="Shaping Skills Evaluation"><span class="font-semibold">Research</span><span class="opacity-60">&middot;</span><span class="opacity-80">Shaping Skills Evaluati…</span></a><span class="text-text-muted text-[11px] select-none">&rarr;</span><a href="/sessions/2026-02-08-strategic-pivot" class="inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md text-[12px] border transition-colors whitespace-nowrap bg-bg-surface border-border text-text-secondary hover:text-text-primary hover:border-action/20" title="Strategic Pivot: Vertical-by-Vertical"><span class="font-semibold">Impl Plan</span><span class="opacity-60">&middot;</span><span class="opacity-80">Strategic Pivot: Vertic…</span></a><span class="text-text-muted text-[11px] select-none">&rarr;</span><a href="/sessions/2026-02-07-ci-testing" class="inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md text-[12px] border transition-colors whitespace-nowrap bg-bg-surface border-border text-text-secondary hover:text-text-primary hover:border-action/20" title="CI &#38; Testing Setup"><span class="font-semibold">Build</span><span class="opacity-60">&middot;</span><span class="opacity-80">CI &amp; Testing Setup</span></a><span class="text-text-muted text-[11px] select-none">&rarr;</span><a href="/sessions/2026-02-07-skills-implementation" class="inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md text-[12px] border transition-colors whitespace-nowrap bg-bg-surface border-border text-text-secondary hover:text-text-primary hover:border-action/20" title="Skills Implementation"><span class="font-semibold">Build</span><span class="opacity-60">&middot;</span><span class="opacity-80">Skills Implementation</span></a><span class="text-text-muted text-[11px] select-none">&rarr;</span><a href="/sessions/2026-02-08-agent-architecture" class="inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md text-[12px] border transition-colors whitespace-nowrap bg-bg-surface border-border text-text-secondary hover:text-text-primary hover:border-action/20" title="Agent Architecture"><span class="font-semibold">Build</span><span class="opacity-60">&middot;</span><span class="opacity-80">Agent Architecture</span></a><span class="text-text-muted text-[11px] select-none">&rarr;</span><a href="/sessions/2026-02-08-vercel-setup" class="inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md text-[12px] border transition-colors whitespace-nowrap bg-action/10 border-action/30 text-action font-medium" title="Vercel Setup with Access Code Protection"><span class="font-semibold">Build</span><span class="opacity-60">&middot;</span><span class="opacity-80">Vercel Setup with Acces…</span></a><span class="text-text-muted text-[11px] select-none">&rarr;</span><a href="/sessions/2026-02-08-breadboarding-skill" class="inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md text-[12px] border transition-colors whitespace-nowrap bg-bg-surface border-border text-text-secondary hover:text-text-primary hover:border-action/20" title="Breadboarding Skill"><span class="font-semibold">Build</span><span class="opacity-60">&middot;</span><span class="opacity-80">Breadboarding Skill</span></a><span class="text-text-muted text-[11px] select-none">&rarr;</span><a href="/sessions/2026-02-10-work-orchestrator" class="inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md text-[12px] border transition-colors whitespace-nowrap bg-bg-surface border-border text-text-secondary hover:text-text-primary hover:border-action/20" title="work() — Worktree Orchestrator"><span class="font-semibold">Build</span><span class="opacity-60">&middot;</span><span class="opacity-80">work() — Worktree Orche…</span></a><span class="text-text-muted text-[11px] select-none">&rarr;</span><a href="/sessions/2026-02-10-worktree-migration" class="inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md text-[12px] border transition-colors whitespace-nowrap bg-bg-surface border-border text-text-secondary hover:text-text-primary hover:border-action/20" title="Git Worktree Migration + Memory Refactoring"><span class="font-semibold">Build</span><span class="opacity-60">&middot;</span><span class="opacity-80">Git Worktree Migration …</span></a></div></div> </div> </div> <!-- Session resume --> <div class="bg-bg-elevated border border-border rounded-lg px-4 py-3 mb-6"> <div class="text-[11px] font-semibold uppercase tracking-wide text-text-muted mb-2">Resume Session</div> <code class="font-mono text-xs text-action select-all">claude --resume 09b70260-83ac-4830-9b02-ed8c0683f699</code> </div> <!-- PR link -->  <!-- Divider --> <hr class="border-t border-border mb-8"> <!-- Body content --> <div class="prose"> <h2 id="overview">Overview</h2>
<p>Set up Vercel deployment for Screen Print Pro with password protection using an access code stored securely in Vercel’s environment variables. This allows secure demo access to 4Ink without exposing the app publicly.</p>
<p><strong>Security Note:</strong> The actual access code is stored in the <code>DEMO_ACCESS_CODE</code> environment variable in Vercel. Never commit the code to git. To view it:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>vercel env list</span></span></code></pre>
<h2 id="what-was-built">What Was Built</h2>
<h3 id="vercel-project-linked">Vercel Project Linked</h3>
<ul>
<li>Linked GitHub repository to Vercel hobby account</li>
<li>Project auto-configured for Next.js 16.1.6</li>
<li>Auto-detected production settings</li>
</ul>
<h3 id="access-code-protection-system">Access Code Protection System</h3>
<ul>
<li><strong>Middleware</strong> (<code>middleware.ts</code>) — Protects all routes except login pages</li>
<li><strong>Login Page</strong> (<code>/demo-login</code>) — Clean, branded interface for access code entry</li>
<li><strong>API Route</strong> (<code>/api/demo-login</code>) — Validates code and sets secure httpOnly cookie</li>
<li><strong>Environment Variable</strong> — <code>DEMO_ACCESS_CODE</code> encrypted in Vercel</li>
</ul>
<h3 id="security-details">Security Details</h3>
<ul>
<li>Cookie is <code>httpOnly</code> (cannot be accessed via JavaScript)</li>
<li>Cookie is <code>secure</code> (only sent over HTTPS in production)</li>
<li>Cookie is <code>sameSite=lax</code> (CSRF protection)</li>
<li>Cookie expires in 30 days</li>
<li>Access code stored as encrypted environment variable</li>
<li>Protection only active in production (dev mode bypassed for testing)</li>
</ul>
<h2 id="how-it-works">How It Works</h2>
<ol>
<li>User visits deployed app (e.g., <code>print-4ink.vercel.app</code>)</li>
<li>Middleware checks for <code>demo-access</code> cookie</li>
<li>If missing, redirect to <code>/demo-login</code></li>
<li>User enters access code</li>
<li>API validates against environment variable</li>
<li>If valid, cookie is set and user redirected to dashboard</li>
<li>Cookie persists for 30 days or until browser cleared</li>
</ol>
<h2 id="files-changed">Files Changed</h2>
<ul>
<li><a href="https://github.com/cmbays/print-4ink/blob/feat/vercel-setup/middleware.ts">middleware.ts (created)</a></li>
<li><a href="https://github.com/cmbays/print-4ink/blob/feat/vercel-setup/app/demo-login/page.tsx">app/demo-login/page.tsx (created)</a></li>
<li><a href="https://github.com/cmbays/print-4ink/blob/feat/vercel-setup/app/api/demo-login/route.ts">app/api/demo-login/route.ts (created)</a></li>
<li><a href="https://github.com/cmbays/print-4ink/compare/main...feat/vercel-setup">Full PR diff</a></li>
</ul>
<h2 id="next-steps">Next Steps</h2>
<h3 id="to-deploy-to-production">To Deploy to Production</h3>
<ol>
<li>PR receives CodeRabbit review</li>
<li>Merge to main when approved</li>
<li>Vercel auto-deploys main branch</li>
<li>Get production URL from Vercel dashboard</li>
<li>Share URL with 4Ink, access code separately</li>
</ol>
<h3 id="to-view-or-change-access-code">To View or Change Access Code</h3>
<p><strong>View current code:</strong></p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>vercel env list</span></span></code></pre>
<p><strong>Change the code:</strong></p>
<p>Update <code>DEMO_ACCESS_CODE</code> in the Vercel dashboard (recommended) or via CLI:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>vercel env rm DEMO_ACCESS_CODE &#x26;&#x26; printf "your-new-code" | vercel env add DEMO_ACCESS_CODE production</span></span></code></pre>
<p>Then redeploy: <code>vercel deploy --prod</code></p> </div> <!-- Footer --> <footer class="mt-16 pt-6 border-t border-border"> <p class="text-xs text-text-muted text-center">
Screen Print Pro &mdash; Vercel Setup with Access Code Protection &mdash; 2026-02-08 </p> </footer> </main>  </body></html>