{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "description": "Dispatch policies: which agents to assign based on PR classification",
  "policies": [
    {
      "id": "build-quality-always",
      "name": "Always review code quality",
      "agent": "build-reviewer",
      "priority": 100,
      "trigger": {
        "type": "always"
      },
      "scope": "all"
    },
    {
      "id": "security-on-auth",
      "name": "Security review for auth changes",
      "agent": "security-reviewer",
      "priority": 95,
      "trigger": {
        "type": "domain",
        "domains": ["auth"]
      },
      "scope": "auth-files"
    },
    {
      "id": "finance-on-pricing",
      "name": "Financial accuracy review for pricing",
      "agent": "finance-sme",
      "priority": 90,
      "trigger": {
        "type": "domain",
        "domains": ["pricing"]
      },
      "scope": "pricing-files"
    },
    {
      "id": "design-on-ui",
      "name": "Design system review for UI",
      "agent": "design-auditor",
      "priority": 80,
      "trigger": {
        "type": "domain",
        "domains": ["ui"]
      },
      "scope": "ui-files"
    },
    {
      "id": "critical-risk-escalation",
      "name": "Escalate for critical risk",
      "agent": "architecture-reviewer",
      "priority": 99,
      "trigger": {
        "type": "risk",
        "riskLevel": "critical"
      },
      "scope": "all"
    }
  ]
}
